commit 0a3aa67b1b0872941be79edcca654ea278c0b86f
Author: Roy Marples <roy@marples.name>
Date:   Sat Aug 31 17:48:39 2013 +0100

    Add 4 and 6 arguments to the waitip command so that you can specify
    which protocols to wait for.

commit 307f98623e91bfe3112c01b7b44b51748641d810
Author: Roy Marples <roy@marples.name>
Date:   Mon Aug 26 13:20:53 2013 +0100

    Add the persistent option to the default dhcpcd.conf
    Document how this can affect connected clients at shutdown, such as SSH

commit f87ced10d4316cdf60dd2c0f1b38cc825e845c64
Author: Roy Marples <roy@marples.name>
Date:   Sun Aug 25 11:22:48 2013 +0100

    Fix the persistent option.

commit 698ad80c88a5cdbe3376a3f4ac9219c842451a38
Author: Petr Salinger <Petr.Salinger@seznam.cz>
Date:   Tue Aug 20 16:59:51 2013 +0100

    Fix kFreeBSD compile.

commit 67003972c44778e548e4e13a0929ab38e02945bc
Author: Roy Marples <roy@marples.name>
Date:   Tue Aug 20 11:36:49 2013 +0100

    Fix compile
    Don't warn about BSD kernels not reporting DAD if not building IPv6

commit 9e668b2c161681e2298d890a38ea77de2c683359
Author: Roy Marples <roy@marples.name>
Date:   Tue Aug 20 11:29:43 2013 +0100

    Reduce code size by merging IPv6 ND with RS.

commit b97ffe07913b029a33e7ff1f12d5e75735defac4
Author: Roy Marples <roy@marples.name>
Date:   Mon Aug 19 10:38:38 2013 +0100

    Reword a little.

commit 8b62d0401d83ecbd8a14d285ce087db7e48009aa
Author: Ondrej Grover <ondrej.grover@gmail.com>
Date:   Sun Aug 11 06:34:36 2013 +0200

    bug #282, extend dhcpcd manual page to reflect actual behavior

commit d995aa130fcdadc3a99f948c89447d9960b8753e
Author: Roy Marples <roy@marples.name>
Date:   Mon Aug 19 10:09:32 2013 +0100

    Add the cloned static route, not the original

commit faa976cd32776d40fb1ed2ff8c2a40b58bcd469f
Author: Roy Marples <roy@marples.name>
Date:   Sun Aug 18 16:35:40 2013 +0100

    Try and fix bringing up virtual interfaces on BSD

commit cf8f9bfe8aef83e3e156d66b18981d44a63abd52
Author: Roy Marples <roy@marples.name>
Date:   Sun Aug 18 16:33:53 2013 +0100

    Clean up an un-used argument for non ipv6 builds.

commit 37708a7001c287ea0d86baf8110e2531a1057326
Author: Roy Marples <roy@marples.name>
Date:   Sat Aug 17 11:00:07 2013 +0100

    Fix build without IPv6

commit 118b94bdffca7e33a5e0d6b596eb7e51e7109e68
Author: Roy Marples <roy@marples.name>
Date:   Tue Aug 6 12:34:08 2013 +0100

    Actually validate the search list.
    Fixes #280

commit 94403f69a65f3ef1568429b6ceb54d4993f80e79
Author: Roy Marples <roy@marples.name>
Date:   Fri Aug 2 21:12:22 2013 +0100

    Release dhcpcd-6.0.5

commit 58abe0c2c1d2fa82b9ccb23761f5ed6cc61ccecf
Author: Robby Workman <rworkman@slackware.com>
Date:   Fri Aug 2 10:10:38 2013 +0100

    Slackware uses /etc/rc.d/rc.$service instead of just $service,
    so configure doesn't find those.  This patch overrides the
    defaults for SERVICEEXISTS, SERVICECMD, and SERVICESTATUS.

commit aa7950ecab7a7b31f2dea9c9eb196af0b7cff968
Author: Roy Marples <roy@marples.name>
Date:   Thu Aug 1 22:26:27 2013 +0100

    If we don't have resolvconf, don't print a search line in
    resolv.conf(5) if it matches the domain.

commit 11ce3111d0d7e194623b01235e2c9642ee8c347b
Author: Roy Marples <roy@marples.name>
Date:   Thu Aug 1 11:03:27 2013 +0100

    If the DNS search list is a direct match for the domain then
    don't bother writing the search option to resolv.conf

commit 287de2cd4fc426fef81cb77f000f297956baefa3
Author: Roy Marples <roy@marples.name>
Date:   Thu Aug 1 10:48:14 2013 +0100

    Fix domain option in DHCP messages

commit 5641f4ff660f3a5509e33175b9df78fa782671e1
Author: Roy Marples <roy@marples.name>
Date:   Mon Jul 29 21:24:48 2013 +0100

    Release dhcpcd-6.0.4

commit 37128421db55b9467b123835337e1eb806785437
Author: Roy Marples <roy@marples.name>
Date:   Sun Jul 28 11:53:59 2013 +0100

    We shouldn't force a hostname if no old hostname

commit dc5e1e40f1d6b2b1c19280aa4e69d8acd334d681
Author: Roy Marples <roy@marples.name>
Date:   Sun Jul 28 11:36:24 2013 +0100

    If we are lacking a domain option, derive one from the hostname if
    we can.

commit 2ba01fb16da5cd67143833c1e717e4aae213ab48
Author: Roy Marples <roy@marples.name>
Date:   Sun Jul 28 11:22:18 2013 +0100

    Add an option to respect whatever the server says for the hostname.
    Change the default back to FQDN as per RFC4702 section 3.1.

commit d2a1b447b551b8929119550c793a5a286978f839
Author: Roy Marples <roy@marples.name>
Date:   Thu Jul 25 16:39:38 2013 +0100

    Fix last patch after testing

commit 16389f8db1d3c204e2d0e505de0736cd8bbf225d
Author: Roy Marples <roy@marples.name>
Date:   Thu Jul 25 16:10:16 2013 +0100

    Add the option hostname_short, which will force the sending of the
    short hostname so DDNS will always work, even if the hostname domain
    is different from the DHCP servers.
    
    Change hostname_fqdn to true/false/unset value.
    unset means use what the DHCP server supplies
     (DHCPv4/DHCPv6 maybe inconsistent depending on server setup)
    true/false force the hostname to be either a FQDN or a short name.

commit 07733d10927b8bdc95cb1c0ec79862926b5151ed
Author: Thomas Klausner <wiz@NetBSD.org>
Date:   Tue Jul 23 17:45:46 2013 +0100

    Use Mt for email address

commit 2d2296a0744614401e32d09a34f39d9e96712043
Author: Roy Marples <roy@marples.name>
Date:   Mon Jul 22 20:05:54 2013 +0100

    Stop sending FQDN by default.
    Instead, if sending the hostname in DHCPv4, send a FQDN in DHCPv6.
    
    This allows for a cleaner configuration file and fixes some DDNS problems
    with upstream servers.

commit 4cd05c7c8a75ca03622df604e6442fd19a2f4f48
Author: Roy Marples <roy@marples.name>
Date:   Mon Jul 22 18:01:57 2013 +0100

    Fix DHCPv6 FQDN hostname assignment, broken last patch.

commit a8755baf81186177ec820e6230a714eacf8beeb2
Author: Roy Marples <roy@marples.name>
Date:   Sun Jul 21 12:21:24 2013 +0100

    Adjust option order returned.

commit 132973c9e7bcfbd423821c7086a5567c0639da98
Author: Roy Marples <roy@marples.name>
Date:   Sun Jul 21 10:57:27 2013 +0100

    Rename the script option fqdn_name to fqdn for DHCPv4 replies to
    match DHCPv6 as it makes name sense.
    Request the FQDN option by default as well as sending it.

commit 6bcd47080b0567af6a541986f88f0064728bf7e3
Author: Roy Marples <roy@marples.name>
Date:   Fri Jul 19 22:14:28 2013 +0100

    Clarify the duid option due to DHCPv6.

commit bd092e2838252b5df7cf9d9021b234df24b513f6
Author: Roy Marples <roy@marples.name>
Date:   Fri Jul 19 10:42:36 2013 +0100

    Release dhcpcd-6.0.3

commit a4262284bd0f9274d19e5c717e4d07dbd6f58715
Author: Roy Marples <roy@marples.name>
Date:   Tue Jul 2 15:02:17 2013 +0100

    By default we should not set a fully qualified hostname.

commit 05fbbab11a52932a174d3bd68710d2df9315e2fd
Author: Roy Marples <roy@marples.name>
Date:   Tue Jul 2 14:45:27 2013 +0100

    Only start DHCPv6 if the RA is new or has changed.

commit 022ed9d4ffadb825ee17eed2a1ba84859d53772f
Author: Roy Marples <roy@marples.name>
Date:   Mon Jul 1 20:34:54 2013 +0100

    Fix prior patch

commit c08f849a600494c7f5806d225b8b2cb6dc718841
Author: Roy Marples <roy@marples.name>
Date:   Mon Jul 1 20:21:16 2013 +0100

    Fix dhcpcd owning the RA if the kernel has disabled RA but there
    is no directive in dhcpcd.conf

commit 123307122636d511932e4fd9bc8c2f33d54e838f
Author: Roy Marples <roy@marples.name>
Date:   Fri Jun 28 17:42:29 2013 +0100

    Cater for non RFC conformant domains in the hostname field.

commit 1bbb56e355805d61c9262b27e048aff2852d7d47
Author: Roy Marples <roy@marples.name>
Date:   Tue Jun 25 10:04:10 2013 +0100

    Incase CFLAGS is set, we should still set std

commit 48fae286e546e842585b57b9ca58ae70b89f8fc2
Author: Roy Marples <roy@marples.name>
Date:   Tue Jun 25 09:50:08 2013 +0100

    Release dhcpcd-6.0.2

commit 8a9ad67a30825f52a5c3b50e40f00cf311e4fd07
Author: Roy Marples <roy@marples.name>
Date:   Tue Jun 25 09:31:11 2013 +0100

    Detect link address changes on Linux.
    Only NetBSD emits RTM_CHGADDR for link address changes.
    Sadly no other BSD emits anything for link address changes so we have
    to do a full discovery on carrier up.
    
    When a link address does change, simply carry on as we are, no need
    to drop any existing lease as the carrier change will do that for us.

commit cf7b1e9b0fc3b094f8e0491a34a025225e0cfadf
Author: Roy Marples <roy@marples.name>
Date:   Sat Jun 22 10:16:37 2013 +0100

    Release dhcpcd-6.0.1

commit 37ebc672c3427871fe337b7bd3fe9acd7fc95334
Author: Roy Marples <roy@marples.name>
Date:   Sat Jun 22 10:15:35 2013 +0100

    Fix a compile issue on Big Endian machines.
    Don't use magic numbers for DHCPv6 FQDN bits.

commit 56b7c5d65aad3f8c8e4f729af63c208c98e3e258
Author: Roy Marples <roy@marples.name>
Date:   Fri Jun 21 19:58:09 2013 +0100

    Release dhcpcd-6.0.0!

commit 2e242d2b91a0b669cdd7ab5bd3dd266aa8cb4ba4
Author: Roy Marples <roy@marples.name>
Date:   Fri Jun 21 19:17:52 2013 +0100

    We don't print the FQDN flags.

commit cfa28eba52cbd3db4d74821a85879bfde3ef0a20
Author: Roy Marples <roy@marples.name>
Date:   Thu Jun 20 11:35:16 2013 +0100

    Add RCSID and CVS headers when importing to NetBSD.

commit 7d24e6e3f570866cf52b494e720c615bc61f58d1
Author: Roy Marples <roy@marples.name>
Date:   Wed Jun 19 17:32:22 2013 +0100

    The loopback route should also use the metric.

commit b3cd5021674b421a9aed1ae035c82e66fbf20738
Author: Roy Marples <roy@marples.name>
Date:   Wed Jun 19 17:11:31 2013 +0100

    Add loopback support for Linux.

commit 101174ed4506d22eb096e2a14268bb50c345b562
Author: Roy Marples <roy@marples.name>
Date:   Wed Jun 19 17:02:19 2013 +0100

    Add a route from the IPv4 address to the loopback address.
    This allows for machine-internal communications to this address
    can use the large loopback mtu.

commit 245d787c05fc9077ee3c537c89a96399acbe079a
Author: Roy Marples <roy@marples.name>
Date:   Wed Jun 19 14:35:28 2013 +0100

    Note that ipv6ra_own doesn't work well on any BSD system.

commit 0d609f8b7727e0aa2f5dffa1380faeb1f6e68a68
Author: Roy Marples <roy@marples.name>
Date:   Wed Jun 19 11:06:54 2013 +0100

    Arrived interfaces should share the same commandline options.

commit 3625e4ff579299352c5eb00b9198b25c4d3872f6
Author: Roy Marples <roy@marples.name>
Date:   Wed Jun 19 10:41:30 2013 +0100

    Reduce the buggy PPP wait to 1 second.

commit 16faaf922813e952de86d22cf8a765bae51ed31e
Author: Roy Marples <roy@marples.name>
Date:   Wed Jun 19 10:36:52 2013 +0100

    When adding or changing routes, always supply IFP and IFA so we match
    kernel messages 100%.
    Restore purging kernel IPv6 routers.

commit 38fc723b23ca98cb34faec23c51b8c7813d2dd55
Author: Roy Marples <roy@marples.name>
Date:   Wed Jun 19 10:17:15 2013 +0100

    Restore linkaddr compat support for KFreeBSD

commit 0fe647136b048b20abe9858c8f853841990cf9e6
Author: Roy Marples <roy@marples.name>
Date:   Wed Jun 19 09:57:23 2013 +0100

    Fix operation on NetBSD

commit 68549279ebe9469df383e68cc068abfe22a9575c
Author: Roy Marples <roy@marples.name>
Date:   Tue Jun 18 23:20:52 2013 +0100

    We may not have a state when we drop delegates

commit 92d74b9359ef47674cf7a9a0d2d9a3fef87d70d7
Author: Roy Marples <roy@marples.name>
Date:   Tue Jun 18 10:17:28 2013 +0100

    Add a delay to initial Rebind IA_PD message.
    Delay initial DHCPv6 messages a futher 2 seconds for POINTOPOINT links to
    try and ensure dhcpcd receives a reply.
    Process link events last so that dhcpcd can process any rejection messages.
    When a delegating interface stops, the delegates addresses will be removed.

commit 2ce554dc543b2e9da524e25294aeab5acf385a92
Author: Roy Marples <roy@marples.name>
Date:   Wed Jun 12 19:24:16 2013 +0100

    Fix a crash with departing interfaces.
    Fix more needless spam when an interface departs.

commit 07972c9de35a4bce3d8bd63c2ed579ec0cfcdf54
Author: Roy Marples <roy@marples.name>
Date:   Wed Jun 12 16:21:05 2013 +0100

    Ensure we read the full lease.

commit 656b8834c82343f1f5568aaa9f9acff913b5168c
Author: Roy Marples <roy@marples.name>
Date:   Wed Jun 12 16:01:59 2013 +0100

    Add initial delays as per RFC3315, 17.1.2, 18.1.2 and 18.1.5.
    
    When rebooting an interface, re-request information or abort
    the current transaction and re-discover.

commit e35c2e611945b4d2f0cc7beeae83d273aa04db63
Author: Roy Marples <roy@marples.name>
Date:   Wed Jun 12 11:55:39 2013 +0100

    Ensure we have the correct type to send in our saved lease as the
    user could change from IA_PD to IA_NA.
    Re-send INFORM_REQUEST at each ROUTERADVERT.
    Save some code by sharing the drop addrs loop.

commit 28db8e54c0b2b1be95e721ef870ac034cc024015
Author: Roy Marples <roy@marples.name>
Date:   Tue Jun 11 23:49:07 2013 +0100

    Drop delegated addresses when we enter the discover phase.
    Don't request expired IAs.

commit 34cb5a31e17becc93038283297cdd8b07e281b45
Author: Roy Marples <roy@marples.name>
Date:   Tue Jun 11 11:13:19 2013 +0100

    When releasing, remove the delegated addresses.

commit e44224dfe008d39877e87ac436646ce068a09612
Author: Roy Marples <roy@marples.name>
Date:   Tue Jun 11 09:55:58 2013 +0100

    If we get an invalid reply when rebinding a PD we should re-enter
    the discover phase.

commit 46f2af0f4b991508c26b958d16866bf1a1f12bc2
Author: Roy Marples <roy@marples.name>
Date:   Tue Jun 11 07:22:02 2013 +0100

    Fix a crash.

commit f6222d2bf78867d2bad45d90e1a2da064eed958b
Author: Roy Marples <roy@marples.name>
Date:   Mon Jun 10 23:13:44 2013 +0100

    Don't run INFORM6 twice.

commit b9181d1326cb72c2b1ec2c30746fbe7d6c9e4cba
Author: Roy Marples <roy@marples.name>
Date:   Mon Jun 10 22:54:00 2013 +0100

    If we fail to rebind a PD, drop the delegations.

commit d5e2fc75c060953c368892c834739db6930b7e54
Author: Roy Marples <roy@marples.name>
Date:   Mon Jun 10 21:31:52 2013 +0100

    IA_FORCED is explicitly set now

commit 12c03fca3a1873e568dfc865ddd39f748710a067
Author: Roy Marples <roy@marples.name>
Date:   Mon Jun 10 21:31:34 2013 +0100

    Improve logging

commit d2eb1eb1523746b00bdc66798778d9e36f0cbcc0
Author: Roy Marples <roy@marples.name>
Date:   Mon Jun 10 17:08:58 2013 +0100

    Disable flushing ra stuff for the time being.

commit 567433a826a68c9605ad1177de4105688c63eb58
Author: Roy Marples <roy@marples.name>
Date:   Mon Jun 10 09:40:43 2013 +0100

    Fix def

commit 8ac52ce64552a3246640b5d7cb339fd0b6d8f552
Author: Roy Marples <roy@marples.name>
Date:   Mon Jun 10 02:43:28 2013 +0100

    Fix compile on FreeBSD

commit 740104b3d221de8ef3b786dd2ef15f67f08fbc90
Author: Roy Marples <roy@marples.name>
Date:   Mon Jun 10 02:15:59 2013 +0100

    Don't disable kernel RA when in IPv4 only.

commit a167c90033c5bc5301876a74a37b1c0361072fbb
Author: Roy Marples <roy@marples.name>
Date:   Mon Jun 10 01:56:54 2013 +0100

    Purge prefix list and routers at start of IPv6 for BSD.
    Remove link_addr compact function as we now had a LL address list.
    Fix INET and INET6 seperate compiles.

commit 15b9a5a41e1dc2ad7923dbd7538c4f8163f7de90
Author: Roy Marples <roy@marples.name>
Date:   Sun Jun 9 22:50:22 2013 +0100

    RFC 3633 says that IA_PD should send a rebind, but at like a
    confirm, so add a timeout to it to re-enter the discover phase.

commit 9f7d4764b59fa0f1a8d8b23fe1a04614f9d1e2cb
Author: Roy Marples <roy@marples.name>
Date:   Sun Jun 9 11:57:16 2013 +0100

    Don't delete the subnet route if we don't own IPv6RA routes.

commit e83068bbc9aecf4e5b3f9597d4a5bbe2f972ebe1
Author: Roy Marples <roy@marples.name>
Date:   Sun Jun 9 11:04:46 2013 +0100

    Only run LL callbacks from LL addresses

commit d99aa15687e35687e420a2dd0549a32ad760fa5f
Author: Roy Marples <roy@marples.name>
Date:   Sun Jun 9 09:45:24 2013 +0100

    Don't try to delete non existant addresses

commit 5e64c4d928fc286d891ec9aead8f50895a8927dd
Author: Jayce Lee <jaycelq@gmail.com>
Date:   Sun Jun 9 09:37:01 2013 +0100

    Only wait for DAD to complete for RA addresses marked for autoconf.

commit daeb561a07c15d2345f89d838ec4c9d5a3c664ff
Author: Roy Marples <roy@marples.name>
Date:   Sun Jun 9 08:31:08 2013 +0100

    Because not all OS's send RTM_NEWADDR for a refreshed RA we need
    to manage a list of all IPv6 addresses on an interface so that we
    can know if we need to wait for DAD to complete or not.

commit 1e52ea0244e6bab12e95f9aafa6a02ca84ddc198
Author: Roy Marples <roy@marples.name>
Date:   Fri Jun 7 21:51:44 2013 +0100

    If wpa_supplicant is not running when rebinding, start it for
    wireless interfaces.

commit f1e85f71f5b08d62eb25ebb78d744509d5613e5b
Author: Roy Marples <roy@marples.name>
Date:   Fri Jun 7 21:03:28 2013 +0100

    Add a wpa_supplicant hook script.
    
    This script starts wpa_supplicant on a wireless interface if not
    already running and /etc/wpa_supplicant.conf exists, stops it
    when the interface departs and sends wpa_supplicant a reconfigure
    command.
    
    If dhcpcd is running in master mode, you can use `dhcpcd -n eth0'
    it instruct wpa_supplicant to reload its configuration file.

commit fb869d9bf2eaedb3e0909ba5c0a1462679892b89
Author: Roy Marples <roy@marples.name>
Date:   Fri Jun 7 13:44:19 2013 +0100

    Move signal handling into dhcpcd.c
    Log the PID of the signal caller
    Move syslog functions out of the signal handler if we're not
    exiting as it's not safe.
    Close existing IPv4 sockets when restarting an interface.
    Fix control handling keeping current flags and accepting new ones.

commit 38df54aa2f50102657de2ffbb6e2b43d183e0bfd
Author: Roy Marples <roy@marples.name>
Date:   Thu Jun 6 20:08:10 2013 +0100

    Don't log an error if deleting from a departed interface

commit e44d923c22957fec6f8cd077ec3bb7b087970f7c
Author: Roy Marples <roy@marples.name>
Date:   Thu Jun 6 19:39:12 2013 +0100

    Don't log carrier lost if carrier was UNKNOWN.

commit 087e7e521bbec9b495261b678b9d00f78aa53567
Author: Roy Marples <roy@marples.name>
Date:   Thu Jun 6 19:15:33 2013 +0100

    Ensure we have options before calling getopt_long(3).

commit 6954db0a25afb945ab4738e69c14476c79934b07
Author: Roy Marples <roy@marples.name>
Date:   Thu Jun 6 13:37:54 2013 +0100

    Add DEPARTED reason for when an interface is removed.

commit ca0d0458bc4526c83f1eb0fc11ed2ec277c3d5d6
Author: Roy Marples <roy@marples.name>
Date:   Thu Jun 6 13:32:05 2013 +0100

    Don't error if the interface goes away.

commit 0d97c1daff6731e2b07bf895726f83bb49349ea0
Author: Roy Marples <roy@marples.name>
Date:   Thu Jun 6 13:29:18 2013 +0100

    Quote space in RFC to stop unfortunate line splitting.

commit 791c63ac688169ed7d0b4145dfefb2ce0c9cc7d4
Author: Roy Marples <roy@marples.name>
Date:   Thu Jun 6 01:31:00 2013 +0100

    Prefer --prefix over $PREFIX

commit a2694774b0ba0eb5fcc8bf8124883ca8161b0a8f
Author: Roy Marples <roy@marples.name>
Date:   Thu Jun 6 00:57:03 2013 +0100

    Add support for Rapid Commit, RFC3315 and RFC4039.

commit ee4f094262e771c1188e91b277d9ae45c713d63c
Author: Roy Marples <roy@marples.name>
Date:   Wed Jun 5 21:48:09 2013 +0100

    Add support for NTP servers, RFC 4075

commit b5341d0fa2c1132aa83db21529bc502cf82fb5ad
Author: Roy Marples <roy@marples.name>
Date:   Wed Jun 5 21:13:14 2013 +0100

    Map DHCPv4 options to DHCPv6 where applicable.
    This makes for an easier configuration.
    Send the FQDN option by default.

commit 4409b51dc1bc8fcac2e529b7d502bc88c1e11cde
Author: Roy Marples <roy@marples.name>
Date:   Wed Jun 5 18:36:49 2013 +0100

    Fix disabled FQDN and allocation

commit fd9f2374076db89ebae5bd06c50f2e2137e70a04
Author: Roy Marples <roy@marples.name>
Date:   Wed Jun 5 18:19:07 2013 +0100

    Silence bogus gcc messages.

commit ac2113f49ca970f67491ef9edbb11a2655709870
Author: Roy Marples <roy@marples.name>
Date:   Wed Jun 5 17:35:54 2013 +0100

    Ensure our derived hostname is NULL terminated.

commit 27a1e89548b988b35aed7ee8b4423ee27769c110
Author: Roy Marples <roy@marples.name>
Date:   Wed Jun 5 17:23:24 2013 +0100

    Add DHPCv6 FQDN support (RFC4704)
    Improve hostname support in general, so we are aware of hostname changes.
    When setting the hostname, prefer the FQDN name or append a domain.

commit 35597451ae60a934502de20fbff8dbdd1e863687
Author: Roy Marples <roy@marples.name>
Date:   Wed Jun 5 11:37:45 2013 +0100

    Support the DHCPv6 unicast option.

commit 292c2d7bf483bbb2fe1116f0cdd82c7f158339d0
Author: Roy Marples <roy@marples.name>
Date:   Tue Jun 4 16:33:13 2013 +0100

    Handle routers expiring a bit more cleanly and less spammy.

commit d8a59276eb0ac8fa998822ff22d3c96d18ee48c2
Author: Roy Marples <roy@marples.name>
Date:   Tue Jun 4 15:53:03 2013 +0100

    As DHCPv6 can remove addresses with vltime 0 as well as a RA,
    move the check into probeaddresses to save on duplication.

commit 3a76f9971c5d98609a67214ecd70f6245f6519d0
Author: Roy Marples <roy@marples.name>
Date:   Tue Jun 4 14:41:34 2013 +0100

    Fix compile on Linux

commit 8be6e7319219d0476a6d08aac3af399b004629dc
Author: Roy Marples <roy@marples.name>
Date:   Tue Jun 4 14:39:02 2013 +0100

    Keep state of delegated addresses
    Handle RTM_NEWADDR messages a little better
    Delete addresses with pltime of 0

commit fece84ca94641f7eea9ff252039eeccee54046e9
Author: Roy Marples <roy@marples.name>
Date:   Tue Jun 4 11:42:16 2013 +0100

    Allow ia_pd 1 eth2//64

commit 4505ba26e4ee4c5f0490d0891c59f8ffce42548b
Author: Roy Marples <roy@marples.name>
Date:   Tue Jun 4 11:33:25 2013 +0100

    Fix ia_pd example

commit ac474cc719b17579cf65df3367aeff7d47f89b9a
Author: Roy Marples <roy@marples.name>
Date:   Tue Jun 4 11:08:52 2013 +0100

    Release dhcpcd-5.99.7
    Fix a few copyright headers

commit d48e16792ae335465e455cf56db1aac98a8ae7b5
Author: Roy Marples <roy@marples.name>
Date:   Mon Jun 3 23:21:00 2013 +0100

    Improve messages

commit ffa84d0c3ace8b30075b9b7ba1ac287077c734c0
Author: Roy Marples <roy@marples.name>
Date:   Mon Jun 3 23:02:51 2013 +0100

    Allow ia_pd interfaces to be specified without a SLA.

commit 4cb17cc9d87303f4f27bf332dbbe70fd97bcf1d4
Author: Roy Marples <roy@marples.name>
Date:   Mon Jun 3 22:30:43 2013 +0100

    Style

commit 50aba9ff0d0ab1ecb5f1b7403647d3ed660b32df
Author: Sergey Fionov <fionov@gmail.com>
Date:   Mon Jun 3 22:30:25 2013 +0100

    Fix compile

commit f25262555ee676a187218f866e5ea4697240d641
Author: Roy Marples <roy@marples.name>
Date:   Mon Jun 3 07:49:34 2013 +0100

    Don't assume the kernel will remove or mark tentative LL addresses.
    This isn't a problem as we listen to IPv6 address changes.
    Fixes #274

commit 26fee7a3857271cc797194ffbe4869f745a1dfe5
Author: Roy Marples <roy@marples.name>
Date:   Sun Jun 2 16:18:50 2013 +0100

    Try and support more systems without hostname(1)

commit 883a75c2346074207a6df8af77a46c0a134cd2e8
Author: Roy Marples <roy@marples.name>
Date:   Sun Jun 2 11:54:43 2013 +0100

    Fix compile on NetBSD-6

commit 149d57810d67b6e3c400cfbdc945e6b2f38dfbfb
Author: Roy Marples <roy@marples.name>
Date:   Sun Jun 2 11:51:20 2013 +0100

    Fix compile on FreeBSD

commit 03c51f052944a282789430aa09c27c6457e42557
Author: Roy Marples <roy@marples.name>
Date:   Sun Jun 2 10:51:30 2013 +0100

    Automate the assignment of SLA ids if not given for Prefix Delegation.
    This means you can just request an ia_pd and let dhcpcd do the rest :)

commit 9b855b4cd60125f4a8559ce6ce136df2c94a8240
Author: Roy Marples <roy@marples.name>
Date:   Sun Jun 2 08:12:26 2013 +0100

    Fix testing statuses, #273

commit fb2cf9db6b716a817dbc6ea14974cf581706213b
Author: Roy Marples <roy@marples.name>
Date:   Sun Jun 2 06:38:59 2013 +0100

    Fix compiler warning

commit e6fa152d2b18f3913004cd8ea9ccd77933baa2fc
Author: Roy Marples <roy@marples.name>
Date:   Sat Jun 1 22:30:18 2013 +0100

    Refactor Prefix Delegation configuration so we use integers instead
    of hex based arrays.
    The SLA can now be applied to any router given prefix length provided the
    SLA can fit into the prefix and desired prefix length.
    We now wait for a carrier and LL address before adding the addresses from the
    delegated prefix. Before adding this code, I added some code to generate a
    LL address from the hardware address. This is now #ifdef'ed out as I don't
    want to throw it away in-case dhcpcd ever needs to create LL addresses
    itself.
    
    Many thanks to Martin Husemann who developed code for these functions:
    	ipv6_userprefix, in6_to_h64 and h64_to_in6
    which are used to generate a prefix from the delegated prefix and the SLA

commit 1de9852d127f9a2f4ce1e673a4699bd5512030e4
Author: Roy Marples <roy@marples.name>
Date:   Fri May 31 16:18:52 2013 +0100

    Fix an alignment error.

commit 037f80d0892db7d7e49c9794fd8aedea34909371
Author: Roy Marples <roy@marples.name>
Date:   Fri May 31 16:15:28 2013 +0100

    Fix IPv6 DAD test

commit 35167e58f95156b546cd49f44a50a8c98ae8d4b7
Author: Roy Marples <roy@marples.name>
Date:   Fri May 31 16:01:27 2013 +0100

    Build BOUND routes before DELEGATED ones.
    Use const a little more.

commit 5b4a7e8a26bad4548d6c4c9286e7c84ab37e8ff5
Author: Roy Marples <roy@marples.name>
Date:   Fri May 31 15:44:57 2013 +0100

    PD delegates should be on link

commit 7ab9958b9fb0fa5eeb3739a9a1c01cc41e3a84d3
Author: Roy Marples <roy@marples.name>
Date:   Fri May 31 15:24:46 2013 +0100

    Fix compile on Linux.

commit 5e394d4e93df7c55902d65fdc175730311cfad6b
Author: Roy Marples <roy@marples.name>
Date:   Fri May 31 15:14:52 2013 +0100

    Use PRIu32 instead of %d or %u

commit 40109a5258b2c3aad78325dfdf70d7cdf26025b8
Author: Roy Marples <roy@marples.name>
Date:   Fri May 31 14:40:46 2013 +0100

    Use ND6_INFINITE_LIFETIME instead of ~0U
    If we have an infinite lease, don't check expiry time when CONFIRMing

commit 5a1c2889c4d3b001beb67ff08e1e51e18fef038e
Author: Roy Marples <roy@marples.name>
Date:   Fri May 31 14:01:54 2013 +0100

    Remove hardcoded IPv6 address flags and use a bitmask instead.
    Only add delegated addresses once for each delegation.
    When the kernel expires them we will see this via RTM_DELADDR and
    remove the address from our list and thus the route.

commit 7af2605039769e71af1a7a8d562d9d4e490b5696
Author: Roy Marples <roy@marples.name>
Date:   Fri May 31 12:53:10 2013 +0100

    Allow options with zero data, for example Accept Reconf (20).
    Assume if no status option is present it is OK.
    Fixes #271.
    Based on an initial patch by pmarks@google.com

commit dc1e8faccea46b1da9010d621a9b2a7b2c4056d9
Author: Roy Marples <roy@marples.name>
Date:   Thu May 30 23:39:17 2013 +0100

    In the event DHCPv6 is started without IPv6RS, we should wait for
    a LL address to appear.
    Also, use DH6S_INIT or DH6S_INFORM to dhcp6_start instead of 0 or
    1 for clarity.

commit 23eb1888393d4d72a5c49490935b623f651223c7
Author: Roy Marples <roy@marples.name>
Date:   Thu May 30 23:21:42 2013 +0100

    Only release bound states.

commit 2138c2fcab0aa5f439cef323b97f229a5e4147e9
Author: Roy Marples <roy@marples.name>
Date:   Thu May 30 23:15:23 2013 +0100

    Don't assume we always have an IPv4 state.

commit daa1ed90140872e512621351e1e83bf44a77a447
Author: Sergey Fionov <fionov@gmail.com>
Date:   Thu May 30 22:01:48 2013 +0100

    On Linux, PPP interfaces do not have a hardware address, so
    get the ifindex via if_nametoindex(3).
    Also, don't record an error restoring kernel RA settings for
    a removed interface.
    Fixes #272.

commit ab4a1f65a225dbe4f576c0ab357ebe129333e861
Author: Roy Marples <roy@marples.name>
Date:   Thu May 30 13:06:06 2013 +0100

    It's possible to receive an RA for an interface that has not yet
    obtained a local link address to send an RS.
    If this happens, we should process the RA.

commit 54e63d5824f9b533db9953df5c45e5c5acbc6147
Author: Roy Marples <roy@marples.name>
Date:   Thu May 30 09:56:20 2013 +0100

    Silence compiler warnings

commit cb5b9ec004dad3279064a3bc1f87e25f7d779a54
Author: Roy Marples <roy@marples.name>
Date:   Thu May 30 09:42:47 2013 +0100

    When generating a duid, don't use NET/ROM interface.
    If we have no others, just create a LL address.
    Fixes #270

commit 981c80e7f5d00d0f27d2059765f93bcc0a2c070b
Author: Roy Marples <roy@marples.name>
Date:   Thu May 30 09:04:24 2013 +0100

    Use duid_len rather than a fixed size.
    Fixes #270.

commit 9e4919bf44d6c757f8cb8e546a6d205ed3ac239e
Author: Roy Marples <roy@marples.name>
Date:   Thu May 30 08:51:02 2013 +0100

    Use LINK_UP/DOWN instead of magic numbers

commit 6366deedc17df8a9711984671715f7925df4debb
Author: Roy Marples <roy@marples.name>
Date:   Thu May 30 06:38:21 2013 +0100

    Move SIOCGIFAFLAG_IN6 into if-bsd as in6_addr_flags
    Add pfx_flush to flush ND6 entries when changing routes.
    Both these functions only work for BSD, just stubs on Linux.
    
    This tidies the code a little and fixes changing IPv6 routes on BSD,
    although the kernel may complain network is down for a few moments.

commit 72e0815ffceea3ba1c960e7a37ceb46738bb2d6f
Author: Roy Marples <roy@marples.name>
Date:   Wed May 29 13:59:47 2013 +0100

    Fix DAD for delegated addresses.

commit 68ce2073082e6653517cfc1355ee7a3c8674337a
Author: Roy Marples <roy@marples.name>
Date:   Fri May 24 10:08:23 2013 +0100

    Comment on why we don't solicit dhcpv6 without an RA to instruct us.

commit fc14e8153c20c52299e0879f74ed9a8833ffc5da
Author: Roy Marples <roy@marples.name>
Date:   Fri May 24 09:06:57 2013 +0100

    Optimise adding and changing ipv6 routes.

commit 2f570791f6b2a26042401baea282f5706bde3389
Author: Roy Marples <roy@marples.name>
Date:   Thu May 23 22:50:34 2013 +0100

    Only spam syslog if something new or unexpected happens, don't spam
    it if we just maintain the status quo.

commit 27cc709e8ce7262c9d57947c5a5809dd95f57c53
Author: Roy Marples <roy@marples.name>
Date:   Thu May 23 19:58:28 2013 +0100

    Don't directly close stderr

commit 98e0fb83275c396fe892044881d01a78528933ff
Author: Roy Marples <roy@marples.name>
Date:   Thu May 23 17:28:10 2013 +0100

    Rationalise last patch

commit c06045fd67d1268abc0e12602809468cea861e72
Author: Roy Marples <roy@marples.name>
Date:   Thu May 23 17:22:51 2013 +0100

    Control requested ivp4 routes and ignore pre-existing static ones.

commit cd70a5fdf36298deb8fa0fe4f64bf0bbac312e23
Author: Roy Marples <roy@marples.name>
Date:   Thu May 23 10:55:52 2013 +0100

    FreeBSD isn't buggy with adding new addresses and working out
    if they are new and should be tentative - it was my buggy configuraion
    when I upgraded from FreeBSD 8 -> 9.

commit 0b292d24037c7c4996f02c3a2d074940eb16e909
Author: Roy Marples <roy@marples.name>
Date:   Thu May 23 10:48:28 2013 +0100

    Warn about the difference between CSR and MS CSR.
    Fixed #254.

commit a5716763fb4c880fe7a21f44eef8dd9e6254c3f6
Author: Roy Marples <roy@marples.name>
Date:   Thu May 23 09:17:00 2013 +0100

    Fix non FreeBSD compiles

commit a3893882b3e2ffc40aa72f57e46bd50a0c635eeb
Author: Roy Marples <roy@marples.name>
Date:   Wed May 22 23:58:15 2013 +0100

    Remove some const const warnings found by clang.

commit b0ad2941da6541450fe93be2c0e824e636e150fc
Author: Roy Marples <roy@marples.name>
Date:   Wed May 22 23:55:36 2013 +0100

    Handle an interface coming and going better with a tailq list.
    Ensure we check correct options when building ipv6 routes.

commit fdfe720cb5847029fc1f3737443758f826e5fbdf
Author: Roy Marples <roy@marples.name>
Date:   Wed May 22 19:16:32 2013 +0100

    Fix compile on FreeBSD
    Document why we don't set IN6_IFF_TENTATIVE when adding addresses
    and a possible error on FreeBSD.

commit e6b65fbbff73a658b27942f0536229b4ac3d833b
Author: Roy Marples <roy@marples.name>
Date:   Wed May 22 09:11:47 2013 +0100

    Fix removal of addresses

commit 9f496d699edb90fc561a20e6c9946f2841bc85a0
Author: Roy Marples <roy@marples.name>
Date:   Wed May 22 09:11:13 2013 +0100

    Remove unreachable routers on Linux unless all routers are unreachable.
    This is due to route metrics.

commit 38e1c65841a4b645c436a74e0af8af2e6e1775d6
Author: Roy Marples <roy@marples.name>
Date:   Tue May 21 17:05:36 2013 +0100

    Remove more headers

commit 9b11bca4b87ce75532faa4e8c922ef265af2374f
Author: Roy Marples <roy@marples.name>
Date:   Tue May 21 16:38:52 2013 +0100

    Remove includes to try and fix ppc 64 linux compile.

commit e3998e02d4671cea1058d8f22072d4e3eb00b3a8
Author: Roy Marples <roy@marples.name>
Date:   Tue May 21 14:47:38 2013 +0100

    Add timeout desc for 0

commit 12ae0608bc4fd2ba0257ed59421d3c397fe381d1
Author: Roy Marples <roy@marples.name>
Date:   Tue May 21 14:25:37 2013 +0100

    Remove include to try and fix ppc 64 linux compile.

commit 42885656074883b6200e6b985849e0609b1a7600
Author: Roy Marples <roy@marples.name>
Date:   Tue May 21 13:34:06 2013 +0100

    Don't warn about invalid xid if we're already bound.

commit 8951f2bd8c16b5fa284487ecc5d72368382518fc
Author: Roy Marples <roy@marples.name>
Date:   Tue May 21 10:24:49 2013 +0100

    Don't actually remove unreachable routers and prefixes from the routing table.
    Instead we just change the interface if they are reachable via another one.

commit 0a56f467c32ec7ff00e8ac029ff0f23913633e8d
Author: Roy Marples <roy@marples.name>
Date:   Sat May 18 16:37:27 2013 +0100

    Use macros instead of memcmp

commit 7c872f20552c13f4674fd57249289427c44bd194
Author: Roy Marples <roy@marples.name>
Date:   Sat May 18 16:30:55 2013 +0100

    Get local link address flags for supported OS's.
    Just in-case they are tentative.

commit 973cb3080639fa92388586312974c6e39bc35281
Author: Roy Marples <roy@marples.name>
Date:   Sat May 18 00:24:07 2013 +0100

    Fix an alignment error

commit 944941c184098e6313ffad4388a18bedc1ff48f2
Author: Roy Marples <roy@marples.name>
Date:   Sat May 18 00:21:56 2013 +0100

    Fix logic

commit 56071a1c0314c1861f0932e84a9ec953ac943902
Author: Roy Marples <roy@marples.name>
Date:   Sat May 18 00:17:44 2013 +0100

    Don't log an error when deleting IPv6 addresses that doesn't exist.

commit 5f4a495851bdbe4c0098ece90f3a9d945cf9f735
Author: Roy Marples <roy@marples.name>
Date:   Sat May 18 00:09:36 2013 +0100

    Store IPv6 link local addresses per interface.
    Listen to kernel messages to account them.
    If we don't have a local link address, delay IPv6RS as it just
    won#t work until we have a local link address.

commit 922e0998e1198e3ff7e0a9ba38c9b2543e8bff6a
Author: Roy Marples <roy@marples.name>
Date:   Fri May 17 08:50:51 2013 +0100

    Shorten executing message to avoid oerflowing 80 chars

commit 0ab1433e3c004dc86e8548a516587926a6183b98
Author: Roy Marples <roy@marples.name>
Date:   Thu May 16 20:02:14 2013 +0100

    Set scope for DHCPv6

commit 977c6c873be8169f2ddba8702f52a5a36baf1a98
Author: Roy Marples <roy@marples.name>
Date:   Thu May 16 19:52:23 2013 +0100

    Ignore emacs files

commit 9f08617cea80569f4e2a28dc02a2e74927b1779f
Author: Roy Marples <roy@marples.name>
Date:   Thu May 16 17:29:54 2013 +0100

    Set scope_id correctly.

commit 026368c5f1fc7f0b3b10ba3db46d9392e5c8e757
Author: Roy Marples <roy@marples.name>
Date:   Thu May 16 15:42:18 2013 +0100

    ELOOP_QUEUE 0 is now all queues
    This allows DHCPv6 and IPv6RS to remove DAD callbacks from the IPv6NS queue.

commit 7de87fc4b69d4d61bff9aeadd5020d227fd1cba6
Author: Roy Marples <roy@marples.name>
Date:   Thu May 16 15:28:42 2013 +0100

    Test BSD kernels for a specific version so we can listen to either
    RTM_NEWADDR for duplicates, or directly on the wire with a maximum
    timeout.
    
    Warn about this noisily as there is no reason why the kernel cannot be
    easily patched to support this.

commit be6eccfa1e93843144c7094cd84732a035f410d0
Author: Roy Marples <roy@marples.name>
Date:   Thu May 16 14:30:06 2013 +0100

    Fix RA router ordering

commit 9a54fa0d162522b8bdf6e3b9a1a9c30f777916a4
Author: Roy Marples <roy@marples.name>
Date:   Thu May 16 14:09:27 2013 +0100

    When dropping states, delete any timeouts for DAD callbacks.

commit 2352cd58076c9ba7e61162278fb6d1482361c3e4
Author: Roy Marples <roy@marples.name>
Date:   Thu May 16 11:54:20 2013 +0100

    Fix compile on Linux

commit c5ec9cae1c74050c493d59879ea21224a9eb05d4
Author: Roy Marples <roy@marples.name>
Date:   Thu May 16 11:48:03 2013 +0100

    Fix compile on FreeBSD

commit f9cf4aade0bb994a05348df1970a258e7b4cda66
Author: Roy Marples <roy@marples.name>
Date:   Thu May 16 11:36:08 2013 +0100

    Move DAD messages to LOG_INFO.

commit 7e06dbc2ed18cfd7b267fe29607524c940276bfd
Author: Roy Marples <roy@marples.name>
Date:   Thu May 16 11:31:21 2013 +0100

    Check address flags for tentative and duplicates bits for sanity.
    Handle the actual trigger to callout dhcpcd-run-hooks in the DAD callback
    instead of on receipt of RTM_NEWADDR directly. This is more code, but it allows
    us to use our own DAD engine if we need to.

commit 44cebf0203a4b2a6793f42a08c8d65a5bf796501
Author: Roy Marples <roy@marples.name>
Date:   Thu May 16 00:56:24 2013 +0100

    Removed unused vars

commit 62628b38fa2986fc08db6a663438a7a2f4c508c3
Author: Roy Marples <roy@marples.name>
Date:   Wed May 15 12:34:17 2013 +0100

    Fix compile on FreeBSD

commit 6d53512062163ad9203b9506326fccb8dbd73ae0
Author: Roy Marples <roy@marples.name>
Date:   Wed May 15 12:17:36 2013 +0100

    Add netlink code to listen to AF_INET6 RTM_NEWADDR messages for Linux.

commit 0427563c58293668c0b1aac6917be62ad201969c
Author: Roy Marples <roy@marples.name>
Date:   Wed May 15 11:27:36 2013 +0100

    Use the kernel DAD for IPv6 addresses and finish the action once each
    address DAD completes. BSD kernels will require a patch as noted within
    the README. The linux netlink part still needs to be written.

commit b3a09891b4c3bc56081f508573fb7265e851ea04
Author: Roy Marples <roy@marples.name>
Date:   Fri May 3 15:43:51 2013 +0100

    More compile fixes.

commit 12a3a1ba611a0bb67767cf2a8d4b921d15ca271c
Author: Roy Marples <roy@marples.name>
Date:   Fri May 3 15:41:19 2013 +0100

    More PPC __unused compile fixes.

commit 45a953ea6d8e44be38aaa19dbf2f28b8bf8f414a
Author: Roy Marples <roy@marples.name>
Date:   Fri May 3 15:19:17 2013 +0100

    Fix syslogging a little.

commit 933d06cf6b062b7a6c5fd78ff619e43e4f0c416a
Author: Roy Marples <roy@marples.name>
Date:   Fri May 3 15:17:24 2013 +0100

    Init memory cleanly.

commit 78d59b8d6741e56d455de8a0a674cf8e957a9d5e
Author: Roy Marples <roy@marples.name>
Date:   Fri May 3 14:45:21 2013 +0100

    Add new hook script.

commit 83a8af37cfd2c39d2339eaeedf99968faf1fe804
Author: Roy Marples <roy@marples.name>
Date:   Fri May 3 14:38:54 2013 +0100

    Add RFC4833 support for TimeZone options.
    Fixes #269.

commit 07ddbf80af306702c6493d06e959f7c1bf6b58ab
Author: Roy Marples <roy@marples.name>
Date:   Fri May 3 13:08:12 2013 +0100

    Add IPv6 DAD detection.
    
    Sadly, it seems that userland cannot send from the unspecified address.
    This means that for RFC conformancy, we have to rely on the kernel
    performing DAD.

commit 805878326a3bd2175b7049ba99f69cd9c5dc8820
Author: Roy Marples <roy@marples.name>
Date:   Thu Apr 25 07:09:38 2013 +0100

    Work around silly __unused problem some more on Linux.

commit a271cbc164a97857a250507c43b6ce013271e252
Author: Roy Marples <roy@marples.name>
Date:   Wed Apr 24 10:38:18 2013 +0100

    Change from _unused to __unused to match NetBSD cdefs and avoid
    a compiler failure on linux-headers-3.7

commit 5613c7f026476a2c8802285522d0e8e9c622c6a7
Author: Roy Marples <roy@marples.name>
Date:   Fri Apr 5 17:40:31 2013 +0100

    Note that reboot 0 helps for mobile hosts.

commit 2d1c3b803160f5ab35535ed090dc40ff956c9917
Author: Roy Marples <roy@marples.name>
Date:   Fri Apr 5 15:55:50 2013 +0100

    DHCPv6 now respects the reboot 0 option.

commit ecdf80ddc53549df824c005840c19aeb29159375
Author: Roy Marples <roy@marples.name>
Date:   Fri Apr 5 10:47:33 2013 +0100

    Note that we support RFC 5227

commit 564945ec0912511e5d18ff5a8f80445316bea2ae
Author: Roy Marples <roy@marples.name>
Date:   Fri Apr 5 01:09:16 2013 +0100

    We no longer use the RELEASE hook command

commit 9264d2207b7c42e387b28aae0154021996c64c09
Author: Roy Marples <roy@marples.name>
Date:   Fri Apr 5 00:57:12 2013 +0100

    Move dhcp_release into dhcp_drop

commit cf947c07c89f3b3879984225a619e3518a5b68a0
Author: Roy Marples <roy@marples.name>
Date:   Fri Apr 5 00:30:14 2013 +0100

    Send a RELEASE if the link is up

commit d3fe5dfcdca4acfb9ed2b3901a92fea493161430
Author: Roy Marples <roy@marples.name>
Date:   Fri Apr 5 00:29:54 2013 +0100

    Destroy lease file if releasing.

commit 5b57e1a8e26b14c72a3b01fcd60f4caac1e1b79f
Author: Roy Marples <roy@marples.name>
Date:   Fri Apr 5 00:25:31 2013 +0100

    Don't crash when disabling IPv6

commit f71d915abce28144f17d7ec05b2c6c65178865ec
Author: Roy Marples <roy@marples.name>
Date:   Thu Apr 4 23:07:48 2013 +0100

    Fix a memory leak

commit 43c9c223189793e46cd31c898fd8da55339320e6
Author: Roy Marples <roy@marples.name>
Date:   Thu Apr 4 22:59:02 2013 +0100

    Add RELEASE support to DHCPv6

commit 03dc5f0cffa266a7fffde5e9804b50965de57a7b
Author: Roy Marples <roy@marples.name>
Date:   Thu Apr 4 22:58:51 2013 +0100

    Fix RELEASE support.

commit 07503404ee9235ea18895c62c5411e39c9d34341
Author: Roy Marples <roy@marples.name>
Date:   Thu Apr 4 21:30:51 2013 +0100

    Better sanity for working out if our SLA id overflows the PD length + interface id.

commit d522a9103dc91948fc6a14f7d6d7fc242ba3fc1b
Author: Roy Marples <roy@marples.name>
Date:   Thu Apr 4 19:54:13 2013 +0100

    White space police

commit abe76badbaa8bec63cc2b2659d7da32862abc653
Author: Roy Marples <roy@marples.name>
Date:   Thu Apr 4 19:53:55 2013 +0100

    Ensure we check options bounds correctly.

commit a40bf4ebf0912258bc350c5d1d67f709af82dd05
Author: Roy Marples <roy@marples.name>
Date:   Tue Apr 2 20:50:50 2013 +0100

    The interface to delegate to is optional

commit 8a3ce74b60abf5df0857dc65cb265811a129aa41
Author: Roy Marples <roy@marples.name>
Date:   Tue Apr 2 17:49:36 2013 +0100

    Stop ipv6only enabling RS support.

commit 63af84e04c0846534492c5f1747805d30f1feb5f
Author: Roy Marples <roy@marples.name>
Date:   Tue Apr 2 08:30:13 2013 +0100

    Fix linux default subnet route metric on linux again.

commit 4b47c40d5c6b94fdcb8b36b428bc7342bb3c96bd
Author: Roy Marples <roy@marples.name>
Date:   Tue Apr 2 08:01:11 2013 +0100

    White space brigade

commit e95d5fd6caa9c344c3422fa1af40882fb9b78265
Author: Roy Marples <roy@marples.name>
Date:   Tue Apr 2 07:50:33 2013 +0100

    Fix incorrectly expiring routers on multi-homed systems.

commit 59d65c86bc54bb86ea396d62c0fc142b59f8f6d2
Author: Roy Marples <roy@marples.name>
Date:   Mon Apr 1 13:24:39 2013 +0100

    Fix IA

commit 98cc9316dbafcd4f7ad62318d02fd43e003a785a
Author: Roy Marples <roy@marples.name>
Date:   Mon Apr 1 13:19:58 2013 +0100

    Fix default sla_len

commit 2ef4133587f195e129b34f56cae25108cccdecac
Author: Roy Marples <roy@marples.name>
Date:   Mon Apr 1 13:15:47 2013 +0100

    Add DHCPv6 Prefix Delegation support, RFC3633. Fixes #262.
    Add DHCPv6 Temporary Address support, RFC3315.

commit 3d6c8d7567763d41b9ecfb463067eadcf47d1dbe
Author: Roy Marples <roy@marples.name>
Date:   Thu Mar 28 06:38:27 2013 +0000

    Respect xidhwaddr option for DHCPv6

commit a5a2ea6679a5d9e5ef4a30dff84383618d77c121
Author: Roy Marples <roy@marples.name>
Date:   Wed Mar 27 16:36:56 2013 +0000

    Add the noalias directive to so that when adding an IPv4 addresss
    dhcpcd will overwrite a pre-existing address.
    
    NetBSD PR/47699

commit b228fca34ccb1e4809e556fadd7c6c01a775078c
Author: Roy Marples <roy@marples.name>
Date:   Wed Mar 27 15:43:48 2013 +0000

    Acquire another address faster after NAKing ARP failure.

commit 6346d3d3d4a2b0867fd75e0271a1771cb6b6944a
Author: Roy Marples <roy@marples.name>
Date:   Wed Mar 27 15:19:48 2013 +0000

    Create lease files so they are user writeable.

commit d3fa03bf82e17b5bb6394bb2700329ed6a0860f4
Author: Roy Marples <roy@marples.name>
Date:   Tue Mar 26 15:28:41 2013 +0000

    Remove pointless double assignment

commit 7acb02427ae2bf94f01727b3678bb7b82ab4d3d6
Author: Roy Marples <roy@marples.name>
Date:   Tue Mar 26 11:40:44 2013 +0000

    Don't spam warning about CSR all the time.

commit 075dfc807b5d9b7681990a86e83eb0a04c36f63f
Author: Roy Marples <roy@marples.name>
Date:   Tue Mar 26 10:48:28 2013 +0000

    Fix configure --without-pollts

commit 7d8df576cf3c690b9ae73cf909b0234d5ef56df0
Author: Roy Marples <roy@marples.name>
Date:   Tue Mar 26 10:42:30 2013 +0000

    Fix rebooting.

commit 30ba583c814283328caf064799bb718b2f764f9a
Author: Roy Marples <roy@marples.name>
Date:   Tue Mar 26 10:39:46 2013 +0000

    Warn when a route cannot be added because it already exists.

commit 9010b3a8c5aede5adf370fce3cdd574cc1de7541
Author: Roy Marples <roy@marples.name>
Date:   Tue Mar 26 10:39:06 2013 +0000

    Fix compile for systems without pollts/ppoll or pselect.

commit cf6b9893482a7302c79c294c11ea9de91726ac66
Author: Roy Marples <roy@marples.name>
Date:   Tue Mar 26 08:51:34 2013 +0000

    Avoid a potential malloc when handling signals.

commit 28abd8e22c83f07ca280342994b609587651d741
Author: Roy Marples <roy@marples.name>
Date:   Tue Mar 26 06:39:58 2013 +0000

    Default to using a DUID + IAID for DHCPv4 Client ID.
    
    Disable requesting the MTU by default as some interface drivers still
    incorrectly reset themselves when changing the MTU.

commit 61c9482a2864893c7f7920efc1127024e6c5c582
Author: Roy Marples <roy@marples.name>
Date:   Sun Mar 17 13:00:03 2013 +0000

    Ensure routes are initialised correctly, fixes #265.
    If we fail to malloc any part of a route, clear all the routes.

commit 664fb27a02a67b30db0f5dfe7244b60c2cbe0b69
Author: Roy Marples <roy@marples.name>
Date:   Tue Feb 19 16:59:58 2013 +0000

    Change arp errno to match what we use in dhcpcd.

commit 88b310e4ef4d4f2713b896fa075841f00e7b11c6
Author: Roy Marples <roy@marples.name>
Date:   Tue Feb 19 16:32:02 2013 +0000

    Fix last commit.

commit e1cdd9aeb1b5aa4fae22edbd3ddab22f31aec68d
Author: Christos Zoulas <christos@netbsd.org>
Date:   Tue Feb 19 16:22:04 2013 +0000

    Avoid a potential buffer overflow.

commit 5eed642925d6b7e614e2951ce948f092bfbf9040
Author: Roy Marples <roy@marples.name>
Date:   Tue Feb 19 16:05:12 2013 +0000

    Move IPv6 RA checking and disabling kernel RA higher up the chain.

commit db31a4a9edd89f6771ef452cf8157a17d145dae0
Author: Roy Marples <roy@marples.name>
Date:   Tue Feb 19 15:43:29 2013 +0000

    Fix a crash.

commit c53e83b6ad331363445eb9235753a21e04027b78
Author: Roy Marples <roy@marples.name>
Date:   Tue Feb 19 15:28:21 2013 +0000

    Fix compile on BSD

commit c4dce3f65fbb1a192e588d25ac1e7e81223c8684
Author: Roy Marples <roy@marples.name>
Date:   Tue Feb 19 15:23:53 2013 +0000

    Use TAILQ macros for IPv4 routes.

commit 83a96b8a370e597b41208716bb02406206089457
Author: Roy Marples <roy@marples.name>
Date:   Tue Feb 19 13:37:42 2013 +0000

    Use a TAILQ macro for our interface list.

commit 33ff5fdf94f25b0ebf980f4185fef8b0e923efce
Author: Roy Marples <roy@marples.name>
Date:   Tue Feb 19 11:18:04 2013 +0000

    Use TAILQ macros in eloop for better readability and less code.

commit 08a4c2d3f1d84efad8ecd1d88ff9847571f3dd31
Author: Roy Marples <roy@marples.name>
Date:   Tue Feb 19 09:01:15 2013 +0000

    Free the fds structure when finishing.

commit 4e63babd6a50d0259d4d2c8ceb8ddbfb477e7c07
Author: Roy Marples <roy@marples.name>
Date:   Mon Feb 18 21:45:19 2013 +0000

    Fix compile on Linux.

commit ab541f6a7453e46e6ee25d7cb828c42dbb0695e2
Author: Roy Marples <roy@marples.name>
Date:   Mon Feb 18 21:35:24 2013 +0000

    Complete transition to pollts(2)

commit 09c124ebce6e0747ca2349655d8761aac34f616e
Author: Roy Marples <roy@marples.name>
Date:   Mon Feb 18 21:25:07 2013 +0000

    Change from ppoll(2) to pollts(2).
    
    I was going to go with ppoll(2) because I would guess the Open Group
    would prefer the name of it over pollts(2) if they ever standardised it.
    However that causes a problem with _GNU_SOURCE and my code base so I've
    gone to pollts(2) and suck in the compat header for Linux users to avoid
    that sillyness.

commit 044de332f4c0355620796f47bfca77be4a564a86
Author: Roy Marples <roy@marples.name>
Date:   Mon Feb 18 20:56:55 2013 +0000

    Rework our signal setup and event loop around ppoll(2).
    ppoll is mapped to pollts(2) for supporting systems.
    If pselect(2) is available then we provide a compat shim for that, otherwise
    we provide a non race free shim based on poll(2).

commit 97954ae1368a4172ad3d3ed90a5458cf4a434fde
Author: Roy Marples <roy@marples.name>
Date:   Mon Feb 18 15:40:56 2013 +0000

    Restore our signal pipe so that we process signals in our event loop
    as we use a lot of functions which are not safe according to signal(7).

commit 4902d4fa03ae7e31d532a0abcbda8aec41dc3cae
Author: Roy Marples <roy@marples.name>
Date:   Mon Feb 18 10:37:02 2013 +0000

    Don't reboot if we don't have an active state.

commit 9128ad247e7879092e0487060ad9faf657cacf8b
Author: Roy Marples <roy@marples.name>
Date:   Mon Feb 18 10:35:47 2013 +0000

    Move the signal reboot code into it's own function which is fired by
    and eloop timeout of 0 seconds. We do this because we shouldn't modify
    variables in a signal handler.

commit 6e15b19c71a659ed8363114482df0e8ff789b2c3
Author: Roy Marples <roy@marples.name>
Date:   Mon Feb 18 08:13:43 2013 +0000

    If we fail to send an IPv6 RS then DHCP6 won't work either.

commit 7f568ee27d56978f7e7c94f05f286833bce1dc2a
Author: Roy Marples <roy@marples.name>
Date:   Sun Feb 17 18:22:42 2013 +0000

    Remove debug

commit e38f110ef97ac16cd16d19217faae7b88dd3ee79
Author: Roy Marples <roy@marples.name>
Date:   Sun Feb 17 18:17:29 2013 +0000

    Work on FreeBSD9 where we fail on some interfaces

commit 64f3bc2e1d0b63bd3de3ccae6cbae1b462476357
Author: Roy Marples <roy@marples.name>
Date:   Sun Feb 17 16:12:54 2013 +0000

    Fix compile on FreeBSD

commit d71e6ab55f668f358686e0e43f32c12b4ed8623b
Author: Roy Marples <roy@marples.name>
Date:   Sat Feb 16 17:53:13 2013 +0000

    If we don't have a state, send a carrier status

commit ef3a32a770a1522abf9a640569953a451bb639b0
Author: Roy Marples <roy@marples.name>
Date:   Sat Feb 16 13:25:31 2013 +0000

    Fix compile.

commit b2c584a35eee4f2d996d0d5a943d134986841b6d
Author: Roy Marples <roy@marples.name>
Date:   Sat Feb 16 13:21:35 2013 +0000

    Remove the xmalloc function.
    Now we have removed all our xmalloc like functions dhcpcd can still
    try to operate as best it can in low memory conditions.

commit 61b455ab1b119a960cff5e3c6e15b1e39f225dfd
Author: Roy Marples <roy@marples.name>
Date:   Fri Feb 15 22:55:42 2013 +0000

    Avoid printing a silly warning on an unknown option

commit 38868743e18ed029d76bae800ce7c364ec4a64a1
Author: Roy Marples <roy@marples.name>
Date:   Fri Feb 15 22:46:47 2013 +0000

    Remove xstrdup

commit c36de53d1b03721701ebad0822d000588abb49ac
Author: Roy Marples <roy@marples.name>
Date:   Fri Feb 15 22:20:18 2013 +0000

    Remove xrealloc

commit 010cb922de0dabadb81b479700317489beb07eff
Author: Roy Marples <roy@marples.name>
Date:   Fri Feb 15 21:45:08 2013 +0000

    Remove xzalloc function

commit 92cb782bc01fa2f33c89f4966233cfa92626465c
Author: Roy Marples <roy@marples.name>
Date:   Fri Feb 15 20:33:13 2013 +0000

    Instead of opening link, ipv6, ipv6rs and ipv6ns sockets globally,
    only open when the first link wanting this features needs it.
    Hopefully fixes #263 and #264.

commit d856561cb336d078f941def23cc1f309e6324134
Author: Roy Marples <roy@marples.name>
Date:   Fri Feb 15 12:55:38 2013 +0000

    Add -h|--help option to configure

commit a89300e975fb36fd63589d11d554b2fdf23928d4
Author: Roy Marples <roy@marples.name>
Date:   Tue Feb 5 10:15:59 2013 +0000

    If we have one interface enabled for IPv6 RS, we stupidly process
    RAs for all interfaces we control. This patch fixes this and
    updates the man page to reflect this better.

commit 62cad6960831487009cc88f00bd8e2409f240fee
Author: Roy Marples <roy@marples.name>
Date:   Mon Feb 4 14:12:48 2013 +0000

    Fix compile on BSD

commit 0967b59a8e4e67db4987ffb242705f24eb5bf8a9
Author: Roy Marples <roy@marples.name>
Date:   Mon Feb 4 13:30:35 2013 +0000

    It's now possible to compile out IPv4 and IPv6 support by passing
    --disable-ipv4 or --disable-ipv6 to configure.

commit 76dc0a5259fa2889a2d60464dfc1f845a256102a
Author: Roy Marples <roy@marples.name>
Date:   Mon Feb 4 11:03:08 2013 +0000

    Move ipv4 specific code out of net.c and into ipv4.c

commit 2685150576570a5b17b8f2383c0ec2fc4785b5ea
Author: Roy Marples <roy@marples.name>
Date:   Sun Feb 3 22:55:45 2013 +0000

    Move if_state into interface->if_data as dhcp_state.
    This should reduce memory usage for non IPv4 interfaces.

commit 0e8ffd4f9571e29d258b150d01b34a18ea68512a
Author: Roy Marples <roy@marples.name>
Date:   Sun Feb 3 14:52:24 2013 +0000

    Move ipv4 specific infos from interface to if_state.

commit 1d34d7603a929b91f772fe030e834309870aa606
Author: Roy Marples <roy@marples.name>
Date:   Sun Feb 3 10:35:59 2013 +0000

    Move options away from ipv4 state to the interface.

commit dab9b1cb3b27f06299512d559100ee5575ed3863
Author: Roy Marples <roy@marples.name>
Date:   Sat Feb 2 14:05:55 2013 +0000

    Remove IPv4 and DHCP4 specific setup from dhcpcd.c and move into ipv4.c
    and dhcp.c
    Split configure.c into script.c and move the rest into dhcp.c
    
    This starts the goal of making the base of dhcpcd protocol agnostic and
    working towards building IPv4 and/or IPv6 code only to reduce size and
    allow growing any future new protocol easier.

commit 6c7c34f4a7e983e740617f8cd017e8bd74b34725
Author: Roy Marples <roy@marples.name>
Date:   Mon Jan 28 09:54:03 2013 +0000

    Fix potential issue if we don't want routes and we fail a decode.

commit 60d9397a23b0a3b40fa70d02186e78710f16631b
Author: Roy Marples <roy@marples.name>
Date:   Mon Jan 28 09:45:05 2013 +0000

    Ensure that nooption correctly woks for routes.
    Fixes #254.

commit abd1a0d1a1c116e196dd971043d5c172742f1754
Author: Taylor R Campbell <campbell+netbsd@mumble.net>
Date:   Fri Jan 18 18:04:31 2013 +0000

    Check the correct interface the RAP came from before overwriting it.

commit 7bb80e5a161553a59e28b2e497e7db20c684f11e
Author: br@waldteufel.eu <br@waldteufel.eu>
Date:   Thu Dec 20 19:34:30 2012 +0000

    Preserve the space in static routes on the command line.
    Fixes #260.

commit 961297af2ddfe32ebe965c7a6665a91e3f4d72a8
Author: Roy Marples <roy@marples.name>
Date:   Wed Dec 19 10:11:50 2012 +0000

    Release dhcpcd-5.99.3

commit 6d965b93e24967ec0b254cf33b348f68397626c3
Author: Roy Marples <roy@marples.name>
Date:   Tue Dec 11 09:51:48 2012 +0000

    Fix default onlink value.

commit eff5fd2feded379ae207c75908072225b687fc21
Author: Roy Marples <roy@marples.name>
Date:   Tue Dec 11 09:00:49 2012 +0000

    Respect the ONLINK flag the prefix option of the RA

commit ba587e7fd4b63440cbc1df63d96794d9000a8f5c
Author: Roy Marples <roy@marples.name>
Date:   Fri Dec 7 10:49:36 2012 +0000

    Fix compile on BSD.

commit 0eb4121f172328b14f66140ca5e65b20921f99a1
Author: Roy Marples <roy@marples.name>
Date:   Fri Dec 7 09:46:49 2012 +0000

    Log error whe starting DHCPv6 without RA.

commit abfadc85c99ca41a7fb0dfda52f1aa79a22dab8c
Author: Roy Marples <roy@marples.name>
Date:   Fri Dec 7 09:43:56 2012 +0000

    If no IPv6 proc or sysctl entries exist for RA or forward, assume it's OK.

commit 321a77b8c00e32952d34ce0d567785ff4adbbf0d
Author: Roy Marples <roy@marples.name>
Date:   Sat Nov 24 20:35:53 2012 +0000

    Avoid sillyness if not a valid IPv6 address

commit fb1de486f086817408aba8353daf98705b30d199
Author: Roy Marples <roy@marples.name>
Date:   Sat Nov 24 20:11:49 2012 +0000

    Set %interface for exported IPv6 link local addresses.

commit 33dcda022ae35b3ea9bd02ce5d01badf886e37ef
Author: Roy Marples <roy@marples.name>
Date:   Tue Nov 13 20:40:04 2012 +0000

    Normalise timing

commit b4c22315a921e3cffd78c73d5d24281819de8e87
Author: Roy Marples <roy@marples.name>
Date:   Tue Nov 13 17:30:19 2012 +0000

    Move free to exit function.

commit af8bf078f56bb26a06ee6fb905f0547424277a29
Author: Roy Marples <roy@marples.name>
Date:   Tue Nov 13 17:28:47 2012 +0000

    Discard addresses if expired on reboot

commit 5e9a8eddb9e9a095606e7b5f789532bb1372a26c
Author: Roy Marples <roy@marples.name>
Date:   Tue Nov 13 15:40:00 2012 +0000

    Stop probing when dropped

commit dd42ad05829a36b5329b52337477e055dfe174fd
Author: Roy Marples <roy@marples.name>
Date:   Tue Nov 13 15:16:27 2012 +0000

    Send to all dhcp agents instead of all routers.

commit 4eb12c9cacc20ff98a8b649480e911b6a01c38e6
Author: Roy Marples <roy@marples.name>
Date:   Tue Nov 13 11:44:20 2012 +0000

    Use a proper namespace for IPv4LL

commit 8698b655c9fc1ac421353ea90107fa81ecfbe4b1
Author: Roy Marples <roy@marples.name>
Date:   Tue Nov 13 11:25:51 2012 +0000

    Use a proper namespace for eloop

commit e706686a746b7df658b3fe76231ca0de66a217fb
Author: Roy Marples <roy@marples.name>
Date:   Tue Nov 13 10:17:19 2012 +0000

    Use a proper namespace for control

commit ad13fe27446ba9d8e37d31de91aec1b3b6804466
Author: Roy Marples <roy@marples.name>
Date:   Tue Nov 13 09:39:20 2012 +0000

    Fix some memory issues

commit 6eac7165940d9661a89372238c8dde071f7393b8
Author: Roy Marples <roy@marples.name>
Date:   Sun Nov 11 19:56:01 2012 +0000

    Expire the DHCPv6 lease when carrier drops.

commit 25be166e310cc108c0dd95612b0ad867c8cf2bdd
Author: Roy Marples <roy@marples.name>
Date:   Sun Nov 11 19:55:25 2012 +0000

    Always close this fd

commit 23aedc077d0731444dfbfcb19d3b2b27340a092e
Author: Roy Marples <roy@marples.name>
Date:   Sun Nov 11 12:19:06 2012 +0000

    Improve logging of script exiting.

commit 8756226107ef6f5f0bef7a8c6332016333b87ed5
Author: Roy Marples <roy@marples.name>
Date:   Sun Nov 11 00:25:58 2012 +0000

    Log posix_spawn(2) errors better.
    
    In our compat shim, use fork(2) if we have it, otherwise vfork(2).
    This makes us a lot better in terms of reliability, but sucks for
    reporting errors.

commit f5130e14c41c7911662bc267df2be4e190e034eb
Author: Roy Marples <roy@marples.name>
Date:   Sun Nov 11 00:04:02 2012 +0000

    Because posix_spawn(2) implementations can use fork(2) we have no
    way of knowing any error actually executing the new image,
    such as it doesn't exist or no permission.
    
    For the time being, simply log a generic error.

commit e3ef4a496205eaf95102bd3917a6bd2fc9dff1ef
Author: Roy Marples <roy@marples.name>
Date:   Sun Nov 11 00:03:28 2012 +0000

    eloop doesn't check errors atm

commit 63495f6b258de2bd2251c1bdee366e34e91b66fb
Author: Roy Marples <roy@marples.name>
Date:   Sat Nov 10 18:06:14 2012 +0000

    Break after processing a callback

commit f17304cda0c7233c42a3b1504a4805637bcb19c5
Author: Roy Marples <roy@marples.name>
Date:   Sat Nov 10 17:55:37 2012 +0000

    Fix memory errors

commit e9e3c9d461ce269d4fefef2777d861b7b00cac5e
Author: Roy Marples <roy@marples.name>
Date:   Sat Nov 10 17:29:34 2012 +0000

    _NSIG seems to be the norm. Use _SIG_MAXSIG if available otherwise guess.

commit 730188f82a3f81e85d2e8c7d4421881a108b86ca
Author: Roy Marples <roy@marples.name>
Date:   Sat Nov 10 16:53:00 2012 +0000

    Fix compile of the new compat shims on NetBSD.

commit 35ac6e8d66a73440cc9817e8eca0d2797644dd6d
Author: Roy Marples <roy@marples.name>
Date:   Sat Nov 10 16:37:12 2012 +0000

    Add a pselect(2) shim for systems that lack support for it.
    When building, warn that it's not entirely race condition safe.

commit 20bccc708e8b288b901b20b68bf39102d43131a4
Author: Roy Marples <roy@marples.name>
Date:   Sat Nov 10 16:11:01 2012 +0000

    Replace poll(2) with pselect(2) and vfork(2)+execve(2) with
    posix_spawn(3).
    Now we block all our signals at startup and allow pselect to
    unblock them for the duration of the call. This allows us to
    manage interrupts in a fashion to guarantee a consistent
    internal state.
    
    I have added a posix_spawn compat shim for systems that lack
    that call. pselect(2) has been supported on target for some time
    so there is no need for a compat shim there.

commit 75cfb497b4cb79523403c2da940a86e691144a7b
Author: Roy Marples <roy@marples.name>
Date:   Sat Nov 10 08:44:48 2012 +0000

    Add a message to indicate dhcpcd exited cleanly.

commit d82f5d9a232150660f1b2871aac3ca57cfb041d2
Author: Roy Marples <roy@marples.name>
Date:   Fri Nov 9 09:50:34 2012 +0000

    Silence a gcc signed vs unsigned warning by comparing to 0.

commit 4076642c81ca17eec966424fb4b4e3f24e9da2a5
Author: Roy Marples <roy@marples.name>
Date:   Thu Nov 8 00:08:36 2012 +0000

    We should check start len >0 as len will be zero at this point.

commit c444b0eb68e2cea0562adbcae8c31155fc26f93a
Author: Roy Marples <roy@marples.name>
Date:   Wed Nov 7 23:51:04 2012 +0000

    When decoding RCC3397 domains we should ensure that we have
    decoded something before changing the last '.' to ' ' and
    NULL terminating the string.

commit 231fa00c91a52cf72f206ebc0934d358033a977b
Author: Roy Marples <roy@marples.name>
Date:   Wed Nov 7 14:19:45 2012 +0000

    Ensure we have a big enough buffer for an escaped DNSSL option.

commit 485c9f0d10b9fd26b9f31e9107c04da003f7f885
Author: Roy Marples <roy@marples.name>
Date:   Wed Nov 7 00:49:33 2012 +0000

    When an RA is forced to expire, don't run the script twice.

commit 8de8596598c8a993a1c93b3996f6dd575360ace4
Author: Roy Marples <roy@marples.name>
Date:   Tue Nov 6 23:40:15 2012 +0000

    Implement the core DHCPv6 client for SOLICIT, REQUEST, RENEW, CONFIRM.

commit 994b65aff5c3e95aaa77691b905aac53c5609094
Author: root <root@uberpc.marples.name>
Date:   Thu Nov 1 17:02:01 2012 +0000

    Fix some more potential leaks and allow full build with dmalloc.

commit 35e5612fe921ad38652abfb7074ec28365f15d26
Author: Roy Marples <roy@marples.name>
Date:   Thu Nov 1 14:46:05 2012 +0000

    Plug some memory leaks.

commit 052c135d50e4ac269eaa2b5c24ead717636c6cff
Author: Roy Marples <roy@marples.name>
Date:   Thu Nov 1 02:12:15 2012 +0000

    If we receive >1 MTU option, last one takes precendence.

commit dfe05741ecabf563db4547794879a10d32db0bec
Author: Roy Marples <roy@marples.name>
Date:   Wed Oct 31 23:07:06 2012 +0000

    Save a few bytes

commit c913cb28565e01e7333ead5f16d3054609ba9e2c
Author: Roy Marples <roy@marples.name>
Date:   Wed Oct 31 22:56:41 2012 +0000

    Expire RDNSS and DNSSL options if the RA expires.

commit 648507f98782e464054e0141fafe4e984502716e
Author: Roy Marples <roy@marples.name>
Date:   Wed Oct 31 22:29:28 2012 +0000

    Merge multiple options together as per RFC4861 section 6.3.4

commit 89303b189833ba5de1dfe0ca573fba20b62fb51c
Author: Roy Marples <roy@marples.name>
Date:   Wed Oct 31 20:17:59 2012 +0000

    whitespace

commit a0963a40881d8213c002e6c813b0d2692ca81984
Author: Roy Marples <roy@marples.name>
Date:   Wed Oct 31 20:14:08 2012 +0000

    Provide TAILQ_FOREACH_REVERSE_SAFE if not defined.
    When removing routes, do it in reverse order.

commit ade6464c20746c53fb624d86164ebd47e4346595
Author: Roy Marples <roy@marples.name>
Date:   Wed Oct 31 17:21:42 2012 +0000

    No need to check if we have a prefix, as this could be a localised LAN.

commit 3795c17e700afed8702051c0c19546e5854d9124
Author: Roy Marples <roy@marples.name>
Date:   Wed Oct 31 17:10:22 2012 +0000

    When we receive a RA with a lifetime of 0, we should just remove
    the default router and let any options expire as set in accordance
    with RFC4861 section 4.2

commit edf5f07dcf4d8c5d479ad548a17a4ceb209efbc4
Author: Roy Marples <roy@marples.name>
Date:   Wed Oct 31 13:58:36 2012 +0000

    Only remove IPv6 addresses when no RA's have them configured.

commit 7225bfef26ad7f0631d314c6a948117104886efd
Author: Roy Marples <roy@marples.name>
Date:   Wed Oct 31 12:34:27 2012 +0000

    If we receive a RA with a lifetime of 0, just expire it right away
    and continue.

commit 42065f9caaa2258d60e5c7441bc08a1b3544b913
Author: Roy Marples <roy@marples.name>
Date:   Wed Oct 31 10:42:44 2012 +0000

    IANA PEN should be in network order.

commit a327084c52c62616f09421b6ccdea0e9b9e5f384
Author: Roy Marples <roy@marples.name>
Date:   Wed Oct 31 10:37:13 2012 +0000

    DHCPCD Project has been assigned a PEN of 40712

commit afdb1040e581f604d0d7268aea36b71d39245121
Author: Roy Marples <roy@marples.name>
Date:   Sat Oct 27 13:11:04 2012 +0100

    Improve reported timings.

commit 55c8a88b67c36fc63d967d102fdb85df709b465a
Author: Roy Marples <roy@marples.name>
Date:   Sat Oct 27 12:38:17 2012 +0100

    Show renew and rebind times when debugging is enabled.
    Trying to help #259.

commit 80c341fe34e12ddd557a1ede12ae5872e348d67c
Author: Roy Marples <roy@marples.name>
Date:   Wed Oct 24 20:38:09 2012 +0100

    Fix stupid length validation check.
    Fixes #258 again.

commit 4d6bbabd08d1a1696f5db67af60c9883c4c367f4
Author: Roy Marples <roy@marples.name>
Date:   Wed Oct 24 13:59:20 2012 +0100

    Fix compile fr systems without RTF_CLONING such as FreeBSD-8
    Fixes #257

commit 55d6f055033acc87c87d3f6676404d813a1af842
Author: Roy Marples <roy@marples.name>
Date:   Wed Oct 24 13:13:55 2012 +0100

    More fixes to validation lengths.

commit 63fb9433dbc4b1c637be265b4cb8294a50f6237e
Author: Roy Marples <roy@marples.name>
Date:   Wed Oct 24 13:01:03 2012 +0100

    Fix variable length encodings

commit bc56b8d732c57dc721194f3d34bff478f8953b0a
Author: Roy Marples <roy@marples.name>
Date:   Wed Oct 24 12:47:28 2012 +0100

    If we receive a packet with two options the same which is not
    supposed to be an array then we now trim to the correct size
    rather than just discarding the option.
    This also means that if any garbage at the end of the singule
    occurance of an option is also discarded.
    
    Fixes #258 where a modem mistakenly sends two server id's
    within the DHCP offer.

commit c34532dfbe9f98d9e1de070079bbf8105ea0ec34
Author: Roy Marples <roy@marples.name>
Date:   Fri Oct 12 20:10:04 2012 +0100

    Drop DHCPv6 on carrier down.
    Send DHCPv6 interface information.

commit 464d121582a86af66a248d4ff4d9c73b05bf1bc4
Author: Roy Marples <roy@marples.name>
Date:   Fri Oct 12 13:30:22 2012 +0100

    Remove needless malloc.

commit b60a37e0f343276f96046062ba745cc7aaf05ceb
Author: Roy Marples <roy@marples.name>
Date:   Fri Oct 12 13:13:16 2012 +0100

    If there is not IPv6 subnet route to delete, don't moan.

commit fcc2c044ce5a45ce9a0cee678b30aa4dad5d363b
Author: Roy Marples <roy@marples.name>
Date:   Fri Oct 12 12:26:20 2012 +0100

    Fix code for -Wstrict-overflow

commit 57cd5affbff05d41497b8295986e46360f6464db
Author: Roy Marples <roy@marples.name>
Date:   Fri Oct 12 11:31:51 2012 +0100

    Add DHCPv6 INFORM support.
    This is automatically started when RA flags O is set.
    If no DHCPv6 request options are configured in dhcpcd.conf then we
    request domain servers and search lists.

commit 67398433e2eeefcd59ed11c426c14194c6d1cc7a
Author: Roy Marples <roy@marples.name>
Date:   Tue Oct 9 14:20:50 2012 +0100

    Move the default vendor string to a global variable.
    When an interface starts, it assigns this by default instead of
    generating it each time.

commit 3c07dbb90c8e5d0c68a6ec733475681addcb47fe
Author: Roy Marples <roy@marples.name>
Date:   Tue Oct 9 14:14:56 2012 +0100

    Fix DUID support.
    In the case where we cannot write a DUID file, then create a LL ID
    instead of a LLT ID.

commit 2d430b5b9cdbd11a8cac4ed324199cf4dfce78c7
Author: Roy Marples <roy@marples.name>
Date:   Mon Oct 8 17:25:36 2012 +0100

    Make this file actually work

commit 6cf34692c53afce89c2b7840105d5227acb59d81
Author: Roy Marples <roy@marples.name>
Date:   Mon Oct 8 17:18:30 2012 +0100

    Don't need this header

commit 3b467121d4fd413014ae6fa468408ed53d44123b
Author: Roy Marples <roy@marples.name>
Date:   Mon Oct 8 17:13:47 2012 +0100

    xid should be treated in network byte order

commit 87f639d3081c796cb1e7fabc173688d9b9dc1082
Author: Roy Marples <roy@marples.name>
Date:   Sat Sep 22 19:25:17 2012 +0100

    Move the RS state into a struct in a generic data array.
    We should move the DHCP code there, but more importantly allows
    DHCP6 to slot in later.

commit d5bc0939ffaa3f8ba1e93126d86b673e45f6f768
Author: Roy Marples <roy@marples.name>
Date:   Sat Sep 22 14:28:34 2012 +0100

    Restart the interface immediately after a NAK instead of
    waiting one second.

commit 5c6e2a30b1ec8b1532601fe1dd7f75865bed1740
Author: Roy Marples <roy@marples.name>
Date:   Mon Sep 3 09:49:14 2012 +0100

    Release dhcpcd-5.6.2

commit 7446a5d7542aad8f7757dbee6584a30a78351fd4
Author: Roy Marples <roy@marples.name>
Date:   Thu Aug 30 17:25:29 2012 +0100

    Ensure we have correct memory allocation for number of prefixes.

commit 9761eed963f2ca2c01444393016756ee601df7f1
Author: Mikhail Efremov <sem@altlinux.org>
Date:   Fri Aug 24 20:05:26 2012 +0100

    Only accept netlink messages from the kernel

commit be67997f6f2a01911ac86dff414c902e9ac38081
Author: Roy Marples <roy@marples.name>
Date:   Thu Aug 23 09:39:16 2012 +0100

    Only add our own host or destination routes to the build table when
    we are adding gateways.
    Fixes #253 thanks to Nazarov Yuriy Pavlovich.

commit fca63b24bbcfb400a02bdcb27557fb3d1acef69b
Author: Roy Marples <roy@marples.name>
Date:   Sat Aug 18 14:58:53 2012 +0100

    Remove -v from --version in usage.
    Fixes #252.

commit ca6f0d4c13eeca43e2b390cfe1d5db7285c6ac1f
Author: Roy Marples <roy@marples.name>
Date:   Tue Aug 7 08:03:13 2012 +0100

    For some reason, Linux likes to re-add the IPv6 network route even if
    it exists on a different metric than the default.

commit 2e0d06ac8f765a77738dfefc501e4972f6d73403
Author: Roy Marples <roy@marples.name>
Date:   Mon Aug 6 21:31:33 2012 +0100

    Seems we need braces here.

commit 3b4a005b81f7f1dc0985846ba8c23581ee18c66a
Author: Roy Marples <roy@marples.name>
Date:   Mon Aug 6 21:13:47 2012 +0100

    Add pltime and vltime to our IPv6 addresses.

commit 75414b5b1959b60edadae65a9d0362c1fa46d8f9
Author: Roy Marples <roy@marples.name>
Date:   Mon Aug 6 20:32:15 2012 +0100

    Change the NS times so that we assume reachable until the reachable
    time expires, then send probes at retrans intervals until
    DELAY_FIRST_PROBE_TIME is reached at which point we expire the router.

commit be87315510002f12f8978d2271a236d437d109a4
Author: Roy Marples <roy@marples.name>
Date:   Mon Aug 6 13:31:42 2012 +0100

    We should send our NS solicitation directly to the router.

commit 4cc6826cdafd60e8f50733aa045f0719182cd798
Author: Roy Marples <roy@marples.name>
Date:   Mon Aug 6 11:52:48 2012 +0100

    Add MTU to IPv6 routes on Linux.

commit 6a4361c22716bb37c0f27a72ac6ef17aa993a638
Author: Roy Marples <roy@marples.name>
Date:   Mon Aug 6 11:24:13 2012 +0100

    If we fail to open sockets, don't bother sending the request.

commit 15d2836265de19d013cdcb26b2104468ceef3b97
Author: Roy Marples <roy@marples.name>
Date:   Wed Jul 18 09:35:17 2012 +0100

    ra%d_prefix is now a space separated array of the finished address/len

commit 0bc1308ccb2a7c86ceb2ad2d48e83a138f82c278
Author: Roy Marples <roy@marples.name>
Date:   Wed Jul 18 09:35:07 2012 +0100

    Don't set if_up or if_down as true when testing.

commit 824c4a7bd6ed12e27ab5c6378dfa03d824578441
Author: Roy Marples <roy@marples.name>
Date:   Fri Jul 13 09:22:04 2012 +0100

    Disable kernel interface RA as early as possible on Linux.
    Don't add duplicate interfaces to the restore kernel RA on Linux.

commit 23328a92ed8a57f7e5fd6dea1aadee8054c5f5e5
Author: Roy Marples <roy@marples.name>
Date:   Thu Jul 12 17:34:33 2012 +0100

    Release dhcpcd-5.6.1

commit ec1d6b2ba44e6812ac737379a2d25c83eb8dde2d
Author: Roy Marples <roy@marples.name>
Date:   Thu Jul 12 10:36:51 2012 +0100

    Fix BSD restoring kernel RA.

commit 376d5956564d12d3eb137b5376a6e57d95b821c3
Author: Roy Marples <roy@marples.name>
Date:   Thu Jul 12 10:19:14 2012 +0100

    Don't restore kernel RA defaults or drop RA's when forking.
    Add some more memory cleanups when testing forking.

commit 84ad87e1287453ca05a7cbd5775322374e07a7ee
Author: Roy Marples <roy@marples.name>
Date:   Thu Jul 5 17:37:41 2012 +0100

    Improve IPv6 RA support by allowing dhcpcd to manage the address and routes
    instead of the kernel. dhcpcd will only do this if RA is disabled in the kernel
    or dhcpcd has been instructed to do this via dhcpcd.conf(5) ipv6ra_own and
    ipv6ra_own_default directives.
    
    Send and process IPv6 Neighbor Solicitions and Adverts to prove router
    reachability. If a router cannot be reached in this way then it is expired.
    
    When debugging, all ND messages are displayed which will create a lot of log
    spam.
    
    To ease packaging, ./configure now accepts LDFLAGS and --enable-static.

commit 10dc9a8b8e4ad88373db21d196071117734ef35e
Author: Roy Marples <roy@marples.name>
Date:   Thu May 17 08:38:55 2012 +0100

    Report RA information when testing.

commit 5a0f38f95ecfb113e7774eced1b63b2791c07041
Author: Roy Marples <roy@marples.name>
Date:   Tue May 1 22:17:44 2012 +0100

    Ensure that if_up and if_down are always set

commit 154a4eb7a78d608d89446e0771afdb76fc04c754
Author: Gilles Espinasse <g.esp@free.fr>
Date:   Sat Apr 21 18:54:00 2012 +0200

    Change system services warning to match as autoconf
    
    I checked every package configure warning and miss this one due to the unusual ! after WARNING
    
    Signed-off-by: Gilles Espinasse <g.esp@free.fr>
    Signed-off-by: Roy Marples <roy@marples.name>

commit c5e1260e4c2e175902f1fcd1f55a5fa9e6c0f2d1
Author: Roy Marples <roy@marples.name>
Date:   Sat Apr 21 12:44:07 2012 +0100

    Fix valid length checks for single ipv4 addresses

commit 9678cbde61ee354405998bf50332c3c7f59759a7
Author: Roy Marples <roy@marples.name>
Date:   Fri Apr 6 10:15:03 2012 +0100

    Fix some alignment problems.

commit 2c3c18a9859f7dc0cda63437fba64fab2ad6e34d
Author: Roy Marples <roy@marples.name>
Date:   Thu Apr 5 00:09:48 2012 +0100

    Remove a needless set and fix length check of an array of IPv4 addresss.

commit 0eeaf4482057f46cf541b6c64d0f8a25df40b6a3
Author: Roy Marples <roy@marples.name>
Date:   Sun Apr 1 08:38:52 2012 +0100

    Remove unused variables

commit f6a3d650db7657c1dc52c3ffc27f9aa8f8a7b878
Author: Roy Marples <roy@marples.name>
Date:   Fri Mar 30 10:42:01 2012 +0100

    Fix compile on Linux

commit 33deb3aa6272e225f7d097d8415f0965ca67ffad
Author: Roy Marples <roy@marples.name>
Date:   Fri Mar 30 10:37:21 2012 +0100

    Interface index should persist and be unique for the interface lifetime.
    As such, store it at discover and stop using if_nametoindex(3).

commit 96a1e566585091c3ec7fa981d11741d66e1ab413
Author: Roy Marples <roy@marples.name>
Date:   Thu Mar 29 10:11:48 2012 +0100

    Remove FreeBSD memory debug as I submitted a fix for their libc: PR bin/166483.

commit 2d1db7df64c1ee36fdbca16c57fdf939dc5049ca
Author: Roy Marples <roy@marples.name>
Date:   Wed Mar 28 11:26:20 2012 +0100

    Fix Linux compile.

commit 3f72d87b6d3b84489c130b4f97e5a58b585a37fa
Author: Roy Marples <roy@marples.name>
Date:   Wed Mar 28 11:07:48 2012 +0100

    Release dhcpcd-5.5.6

commit f5f6a34b9836840e78fb200817fe2a6dad0af32d
Author: Roy Marples <roy@marples.name>
Date:   Tue Mar 27 22:15:25 2012 +0100

    Fix adding resolvconf

commit 42d0b9fda37537d4c7baed47fd79d23b6bf8d7db
Author: Roy Marples <roy@marples.name>
Date:   Tue Mar 27 20:01:49 2012 +0100

    Simplify API a little.

commit 08e0a962d655fa05ef59a1b34dacbaaefc126567
Author: Roy Marples <roy@marples.name>
Date:   Tue Mar 27 18:59:41 2012 +0100

    Don't corrupt our route table when we fail to add a route for any reason.

commit e55da5083a9bd81ff9ece3ccec771b25c9c28248
Author: Roy Marples <roy@uberlaptop.marples.name>
Date:   Tue Mar 27 17:47:43 2012 +0100

    When sending signals, respect the interface it was started on.

commit 111d4291e94a84bc3d16a0b816ea66a0dca73693
Author: Roy Marples <roy@uberlaptop.marples.name>
Date:   Tue Mar 27 17:30:33 2012 +0100

    Fix some valgrind errors on FreeBSD

commit 4d4aa553d841fd641a2d95553c7c707b3e163992
Author: Roy Marples <roy@marples.name>
Date:   Mon Mar 26 18:32:18 2012 +0100

    Add a suffix to our per interface config files for non IPv4 states.
    This stops RA from stamping on NTP and YP configs.

commit 632be4fe6eaf9513d519015c69511d0ab6fa8e32
Author: Roy Marples <roy@marples.name>
Date:   Sat Mar 24 12:58:12 2012 +0000

    Fix a double free, #243.
    Stop leaking memory on interface restart with prior RA.

commit 0a957e9f08722686d63f7723fa1556586fd85f3b
Author: Thomas Klausner <wiz@netbsd.org>
Date:   Sat Mar 24 10:41:40 2012 +0000

    Fix Dd and Dt arguments.
    New sentence, new line.
    Sort options and option descriptions.
    Sort SEE ALSO.
    Use Fl Fl for long options.
    Sync the usage output by the program with the one from the man page.

commit 6e19acd5b77fe01b1eef0a35500cce375e88ac22
Author: Roy Marples <roy@marples.name>
Date:   Fri Mar 23 09:07:59 2012 +0000

    Release dhcpcd-5.5.5

commit e15ea01de8dbce30c274a47bd57294df38c4c266
Author: Sidney Amani <seed95@gmail.com>
Date:   Thu Mar 22 19:40:41 2012 +1100

    Remove buffer overrun that leads to a segfault on ipv6 network.
    
    strcpy copies the \0 of its src argument, therefore the following line
    is unneeded. Ironically, it can lead to a nasty segfault on a network
    that supports ipv6. In fact, it prevented me from access such a
    network using DHCP.
    
    Signed-off-by: Sidney Amani <seed95@gmail.com>

commit 1f1112a34afac14a22f622525f7be543a7292628
Author: Roy Marples <roy@uberlaptop.marples.name>
Date:   Wed Mar 21 19:11:07 2012 +0000

    FreeBSD 7 does not support IFT_INFINIBAND

commit 88e165b4efb3b7b62daa78065c5779d11e890162
Author: Roy Marples <roy@marples.name>
Date:   Tue Mar 20 14:11:41 2012 +0000

    If the CSR decode fails to return any routes, then use the older DHCP
    routing options if available.

commit a5134b073441bec0850b22fe79156cead32ca3cf
Author: Roy Marples <roy@marples.name>
Date:   Tue Mar 20 13:59:41 2012 +0000

    Fix an issue where we would only use a CSR if we had not warned about using it.

commit a6b8c6b39ce648d01382ed058b40d820fb847f7a
Author: Roy Marples <roy@marples.name>
Date:   Tue Mar 20 13:46:35 2012 +0000

    Use correct event loop timeout deletion to stop occasional segfaults.
    Fix a memory leak and free our global buffers if debugging memory.

commit 9e918d9d7ae105cbe4b7c784cd5feccd3fc616f3
Author: Roy Marples <roy@marples.name>
Date:   Tue Mar 20 09:19:01 2012 +0000

    Support bridge and VLAN interfaces on BSD.
    Fall back to ethernet if unknown and specified.

commit 0eabcef5ec39df794353122b113e3c5aeac9d9d0
Author: Roy Marples <roy@marples.name>
Date:   Tue Mar 20 09:18:20 2012 +0000

    If no ClientID or hardware address, don't report a blank hardware address.

commit f3860068cf8ced3541637069af13bb9a1ecca6e5
Author: Nicolas Joly <njoly@pasteur.fr>
Date:   Mon Mar 19 11:07:56 2012 +0000

    Add .Lk macro to URLs

commit 8316b244cd9ea57008e1385dbd8d40732d380465
Author: Roy Marples <roy@marples.name>
Date:   Wed Mar 7 10:06:45 2012 +0000

    Add an option to control dhcpcd forking or not if the RA does not contain
    a RDNSS option.
    This involves changing our options to an unsigned long long so we can use
    more than 32 bits.

commit c738ef9a5af544c3aabaf4febf3a0b4f46a6fd6d
Author: Roy Marples <roy@marples.name>
Date:   Mon Mar 5 16:45:10 2012 +0000

    Don't fork on IPv6 RA unless we have an RDNSS option.
    Fixes #242.

commit 592d33b5e9ca3038e527eb6ce24dd01efb27ce64
Author: Dave Reisner <d@falconindy.com>
Date:   Mon Mar 5 11:13:06 2012 +0000

    Use sysfs if we don't have ifconfig(8) on Linux.
    Fixes #227.

commit e35732a84b762bc7f65d7afefeab040c736da043
Author: Roy Marples <roy@marples.name>
Date:   Mon Mar 5 11:11:49 2012 +0000

    Try to emulate hostname(1) if it doens't exist.

commit 5a6d47976fb1ba41eada83169dfdced32cfe4fa3
Author: Dan McGee <dan@archlinux.org>
Date:   Sun Jun 19 16:04:25 2011 -0500

    Set hostname via /proc if file is available
    
    On Linux, the hostname can be set via this file if available, precluding
    the need for a `hostname` binary.
    
    Signed-off-by: Dan McGee <dan@archlinux.org>
    Signed-off-by: Roy Marples <roy@marples.name>

commit 8bba3ef8b90bc88e51f709d4757b8d8d9e8bf277
Author: Roy Marples <roy@marples.name>
Date:   Mon Mar 5 10:04:26 2012 +0000

    Respect an accept_ra setting of 2, fixes #240.
    Detect IPv6 settings per interface if the platform allows, fixed #241.

commit 46479e6020eaa31618dd338b486ba2a056c0a1cf
Author: Roy Marples <roy@marples.name>
Date:   Mon Feb 13 08:37:54 2012 +0000

    Store the RA data for the interface so we can do a comparison.
    Only log the fact we received an RA if the new RA is different or any
    part of the old one has expired.

commit 14ee590354e6bc969a9df5edffb4f155b83cf934
Author: Roy Marples <roy@marples.name>
Date:   Sun Feb 5 20:18:04 2012 +0000

    Release dhcpcd-5.5.4

commit 186060e515135b8d28da2a2b0cbd64d5ec42dc07
Author: Roy Marples <roy@marples.name>
Date:   Sun Feb 5 19:32:17 2012 +0000

    Stop checking for IFF_RUNNING in handle_carrier as it is invalid for BSD
    and should already have been checked for Linux.

commit 53cbeebfdf3deba1fa6f21e0735465c609fed0e3
Author: Roy Marples <roy@marples.name>
Date:   Sat Feb 4 15:45:38 2012 +0000

    Better tests.

commit 66f4c17cc5bf7047e7b95a3e2f9e52e95a8659fc
Author: Roy Marples <roy@marples.name>
Date:   Sat Feb 4 15:37:42 2012 +0000

    Add kernel IPv6 RA and forwarding detection on Linux.

commit 0e3ea3cdfc82f06c6a6720d0463a431927f7fc4a
Author: Roy Marples <roy@uberlaptop.marples.name>
Date:   Sat Feb 4 15:15:25 2012 +0000

    If the kernel is not configured to accept IPv6 or RA's then don't
    needless attempt to solicit an IPv6 RA.

commit b584f461124cb81bd6e1ec20370457732f0b4e15
Author: Roy Marples <roy@marples.name>
Date:   Sat Feb 4 14:25:11 2012 +0000

    Fix configure test for arc4random on FreeBSD 7

commit 2e9e5140cb32664aa3b3301240a8c5cbf58fd9a5
Author: Roy Marples <roy@marples.name>
Date:   Fri Feb 3 00:02:03 2012 +0000

    Fix a compile issue and releae dhcpcd-5.5.3

commit f2330342a1dc3aa20a07cd8fd0f08e5b81772277
Author: Roy Marples <roy@marples.name>
Date:   Thu Feb 2 23:30:41 2012 +0000

    Release dhcpcd-5.5.2

commit 49b642404eaa6ee92340841cf8af22f5acda38f1
Author: Roy Marples <roy@marples.name>
Date:   Thu Feb 2 23:30:13 2012 +0000

    Default back to gcc as it seems clang isn't good for powerpc.

commit e7aee63f6181538ca426b4d723488603c0ebb66d
Author: Roy Marples <roy@marples.name>
Date:   Thu Feb 2 18:23:06 2012 +0000

    Set if_up if_down correctly per RA or DHCP

commit d85fb15d0c5ec309faea1125d76d2960e09a3ffe
Author: Roy Marples <roy@marples.name>
Date:   Thu Feb 2 16:22:40 2012 +0000

    Fix some more copyrights
    RA expiry timers now trigger off options as well
    Stop prefixing new_ for RA options
    if_up and if_down are now set by dhcpcd itself
    Correctly prefer a DHCP lease over an IPv4LL entry

commit dc6e128be8c8e653e482041806812247853af2eb
Author: Roy Marples <roy@marples.name>
Date:   Tue Jan 31 16:32:10 2012 +0000

    Fix carrier handling on BSD for interfaces that don't support link status

commit 013a8c6ab3289d22554295e1618ea85568d092e5
Author: Roy Marples <roy@marples.name>
Date:   Tue Jan 31 09:51:12 2012 +0000

    Fix more copyright

commit 70f1084fbd867e9b8ef5747e0efb228f4465e0fb
Author: Roy Marples <roy@marples.name>
Date:   Tue Jan 31 09:33:26 2012 +0000

    Release dhcpcd-5.5.1

commit bb930ece13b36178ff798368d0db46824087fe01
Author: Roy Marples <roy@marples.name>
Date:   Mon Jan 30 20:11:47 2012 +0000

    Stop trunctating netmask sockaddr

commit d9d66e70965c73184853a0115ed1f56e066272a7
Author: Roy Marples <roy@marples.name>
Date:   Mon Jan 30 16:59:48 2012 +0000

    Don't attempt to run the script if it's an NULL, an empty string or /dev/null

commit 7b185ab090ad830f85897ca68e14984eccc1ced1
Author: Roy Marples <roy@marples.name>
Date:   Sun Jan 29 17:28:05 2012 +0000

    Allow dhcpcd to run on a read-only filesystem.
    You'll get a lot of errors, but you will get a working address and routing.

commit 2b4b239175edd12dded816de8c0bb389237adda1
Author: Roy Marples <roy@marples.name>
Date:   Sun Jan 29 16:49:04 2012 +0000

    Remove the RA's before reporting no carrier.

commit 794f165505a82d109c80a7e1500729348c9ee2ba
Author: Roy Marples <roy@marples.name>
Date:   Sun Jan 29 16:45:14 2012 +0000

    Only set if_up for a ROUTERADVERT if we have any RAs
    Conversely, we need to pretend it's up without any RAs to successfully
    remove it.

commit a81934fa13a9eda373327e6e64c614cee528ba88
Author: Roy Marples <roy@marples.name>
Date:   Sun Jan 29 16:32:06 2012 +0000

    Don't start IPv6 if it's disabled globally.

commit 8e36146ec865f68875d2dc55e24db9a6a70828ec
Author: Roy Marples <roy@marples.name>
Date:   Wed Jan 25 17:30:41 2012 +0000

    Fix RA state detection

commit 207853013638b4417d40bbb6f6f26f4fde4aefe8
Author: Roy Marples <roy@marples.name>
Date:   Tue Jan 24 11:27:55 2012 +0000

    Release dhcpcd-5.5.0

commit ae976528707486e53b0f5e2376bbf6ab79e1db5f
Author: Roy Marples <roy@marples.name>
Date:   Tue Jan 24 11:26:20 2012 +0000

    Add and prefer clang to the compiler list.
    The compiler version is now shown during configure.

commit 70936bac397d612a80f91eababbda1affdaec68f
Author: Roy Marples <roy@marples.name>
Date:   Sun Dec 18 12:12:08 2011 +0000

    Just log the fact that the leased IP address was removed instead of
    expiring the lease. This allows --reconfigure, -g to fully work as
    intended.

commit c82be1a894d3f8480a011641db5d9ecb929bed3a
Author: Mike Crowe <mcrowe@brightsign.biz>
Date:   Sun Dec 18 12:11:08 2011 +0000

    Stop the --reconfigure, -g option from spinning needlessly.
    Fixes #237.

commit 29024ba80d7e84166732e97d7d746560d555f628
Author: Roy Marples <roy@marples.name>
Date:   Fri Dec 16 12:20:04 2011 +0000

    Fix hook for non RA's.
    Remove RA's before the DHCP lease.
    Correctly send 3 RA solicitations.

commit 6cb370e5aba269dfe9ff769133a0850b60dc5ef6
Author: Roy Marples <roy@marples.name>
Date:   Thu Dec 15 03:37:27 2011 +0000

    Disable IPv6RS on p2p, lo and mcast interfaces.

commit b3f9ed8ad93cb10afe4764b2fe5b903c9f504921
Author: Roy Marples <roy@marples.name>
Date:   Thu Dec 15 03:22:47 2011 +0000

    Fix warnings on Linux

commit e4a6d6d924e81fcc7033d24b9ecd3644789e329e
Author: Roy Marples <roy@marples.name>
Date:   Thu Dec 15 03:13:15 2011 +0000

    Add ROUTERADVERT to dhcpcd-run-hooks(8)

commit 20e38f32b1bbcd860043816a2db4a7365e90e672
Author: Roy Marples <roy@marples.name>
Date:   Thu Dec 15 03:02:46 2011 +0000

    Hook the new RA options into resolv.conf

commit a32d4408fc5a319ac52acf33d405d3012c265fd5
Author: Roy Marples <roy@marples.name>
Date:   Thu Dec 15 02:41:10 2011 +0000

    Fix copyright dates

commit 17f851e8344b1eb60954dd439b97917ec19734fa
Author: Roy Marples <roy@marples.name>
Date:   Thu Dec 15 02:35:47 2011 +0000

    Add an implementation of an IPv6 Router Solicitor as specified in
    RFC6016 with regards to RDNSS and DNSSL.

commit 121bbd55fd2d652708cd9abadbc2025371ccec9b
Author: Roy Marples <roy@marples.name>
Date:   Wed Dec 14 09:57:56 2011 +0000

    Fix a potential error if we need to alter the sip server string.

commit 4b1430fc7934532ea4708e6c461c80196a1b0b14
Author: Roy Marples <roy@marples.name>
Date:   Wed Dec 14 07:59:54 2011 +0000

    Only regen resolv.conf if we need to as some processes could monitor it
    for changes and restart themselves needlessly.

commit a1ef54fa5e34c9d3e63b82956fdc4031cdcc0b68
Author: Roy Marples <roy@marples.name>
Date:   Sun Dec 11 22:03:52 2011 +0000

    If we a 3rd party removes our assigned address, drop our lease.

commit ddbe2fe5554cac345fb6fc58fde9b932e6ebe1f0
Author: Roy Marples <roy@marples.name>
Date:   Sun Dec 11 21:14:49 2011 +0000

    If an address is whipped out after adding it by something else,
    don't crash.

commit 3c44554477835c15450f89e685d2e0cb9d35624d
Author: Egil Hjelmeland <privat@egil-hjelmeland.no>
Date:   Fri Dec 9 19:40:05 2011 +0000

    Fix SIP server support, RFC 3361 which has been broken
    since dhcpcd-3.3

commit ed2a06d800329df3e10574667bfb1cd76a93f215
Author: Jeroen Vreeken <jeroen@vreeken.net>
Date:   Fri Dec 9 19:09:55 2011 +0000

    Add SixRD support, RFC5969

commit 0e0ad7fde32cb23a6acf1a90892a3903904e9d9d
Author: Roy Marples <roy@marples.name>
Date:   Wed Nov 23 20:30:24 2011 +0000

    Store the assigned metric against the route.
    This allows us to change the route metric via dhcpcd -n --metric $val $if

commit 3e4516112e41dc88f08eacfdf7b47190fbb5cfa5
Author: Roy Marples <roy@marples.name>
Date:   Wed Nov 23 20:29:25 2011 +0000

    Don't removed interfaces anymore when sending commands to an interface.
    To remove an interface, it now has to be done explicty.

commit fd74c87c5c6d33529f1f043266e1fc4594d18c7f
Author: Roy Marples <roy@marples.name>
Date:   Wed Nov 23 13:49:44 2011 +0000

    Bridge interfaces set IFF_LOWER_UP when they have a valid
    hardware address. To trigger a valid hardware address pickup
    we need to pretend that that don't exist until they have
    IFF_LOWER_UP set.
    
    Fixes #212

commit 4b9f12ed1cc5c98128a916d88c9fd2fce024e135
Author: Roy Marples <roy@marples.name>
Date:   Wed Nov 23 11:59:53 2011 +0000

    Optimize bitwise useage a little.

commit 0bf23d4865157dcc620cb2d3484e9d05cf725390
Author: Roy Marples <roy@marples.name>
Date:   Wed Nov 23 10:53:53 2011 +0000

    Fix bitwise logic

commit ca22c60c7b80c6a1b69549de72eea36d96785ea8
Author: Roy Marples <roy@marples.name>
Date:   Wed Nov 23 09:57:34 2011 +0000

    Fix carrier handling on BSD

commit 09d7bf92da58e6ba3aeadbfbaec73b6b81c01a41
Author: Roy Marples <roy@marples.name>
Date:   Wed Nov 23 09:03:24 2011 +0000

    Respect each kernel message on carrier change instead of checking carrier
    after receiving the message as it's possible for the kernel to react faster
    than dhcpcd.
    Fixes #233

commit 2a05e565aa3793ebd4dd35ffe75a174c1c0e8285
Author: Roy Marples <roy@marples.name>
Date:   Tue Nov 22 23:44:32 2011 +0000

    Change default reboot timeout to 5 seconds.
    When rebooting and we haven't daemonised, reduce the discover timeout
    to allow for fallback or IPv4LL addresses.
    Fixes #236.

commit 06a768e918894e56e116e4c2e12d88f0438ed776
Author: Roy Marples <roy@marples.name>
Date:   Tue Jun 14 09:37:06 2011 +0100

    Correctly restart ntp on Debian.

commit 793514d335bab6a91fcd800eb0f97f32837ab217
Author: Roy Marples <roy@marples.name>
Date:   Tue Jun 14 07:17:40 2011 +0100

    Detect ntp.conf exists before copying.
    Fixes Debian #630420

commit 1b05c90ceb1122bac13ee4e4d769149711041647
Author: Roy Marples <roy@marples.name>
Date:   Fri Jun 3 21:11:53 2011 +0100

    Remove unknown variable

commit b8d89494c292bbfc16b4738194156996033aaf15
Author: Roy Marples <roy@marples.name>
Date:   Fri Jun 3 21:08:28 2011 +0100

    Use printf correctly

commit 7fbffe962f137867a2ded5d5e026c006a9d94697
Author: Roy Marples <roy@marples.name>
Date:   Wed Jun 1 07:28:41 2011 +0100

    Shell portability fixes

commit 575afa702438eabbe6291a5e74fd299ad06497e1
Author: Roy Marples <roy@marples.name>
Date:   Fri May 27 17:30:04 2011 +0100

    Fix compile on some sytems, fixes #223.

commit 5cf4297d85e9a556301032cab7a466e0e8abfb1f
Author: clemens fischer <ino-news@spotteswoode.dnsalias.org>
Date:   Sun May 22 07:19:33 2011 +0100

    Fix Arch Linux SERVICESTATUS override.
    Fixes #222.

commit 937ef4186b50eb9d7fc0f59f07debe6e7e27092d
Author: Alex <alupu@verizon.net>
Date:   Sat Apr 9 19:45:55 2011 +0100

    Typo

commit 9ff5e28b6feb6b3fc4b0b45859eb3cc9ccd46e12
Author: Roy Marples <roy@marples.name>
Date:   Wed Apr 6 09:25:51 2011 +0100

    Release dhcpcd-5.2.12

commit c317b39786ac6c3a939dc711db7c78cf099859fd
Author: Roy Marples <roy@marples.name>
Date:   Wed Apr 6 09:16:32 2011 +0100

    Escape | and & characters when passing to the shell.
    Add functions for hooks to check validity of domain names and paths.
    Ensure we set a valid hostname, DNS domain and NIS domain.
    Document the need for input validation in dhcpcd-run-hooks(8).
    
    Fixes CVE-2011-996.
    Based on patches to dhcpcd-3 by Marius Tomaschewski <mt@suse.de>.

commit 142fb0b299acdc7011347e8309c0333e43907ee4
Author: Roy Marples <roy@marples.name>
Date:   Tue Mar 29 11:36:17 2011 +0100

    When operating on one interface only, respect the configured timeout.

commit 67373b909a6e6174bc50255b0c190f77f63b2e0e
Author: Roy Marples <roy@marples.name>
Date:   Fri Mar 25 20:19:03 2011 +0000

    When requesting an address, note this in the broadcasting message.

commit abfd74a2f12479f68a871967f7f0d1f18cdcf472
Author: Roy Marples <roy@marples.name>
Date:   Thu Mar 24 18:08:16 2011 +0000

    Update some copyrights.

commit 38746a3150e63da0aa7c67ddb15ec4104f47b579
Author: Roy Marples <roy@marples.name>
Date:   Thu Mar 24 18:04:06 2011 +0000

    Not needed

commit 8999fcfd026a50ffa5822733489078f6130e0f40
Author: Marius Tomaschewski <mt@suse.de>
Date:   Thu Mar 24 17:59:20 2011 +0000

    When the dhcp server is running in dom0 and the client in domU,
    packets (that are not explicitely checksumed in the userspace)
    sent to the another domain have partial UDP checksums (offload)
    only, but are marked as such. This patch reads and checks the
    mark to decide whether to verify the UDP checksum or not.
    Based on the ISC dhcp patch by David Cantrell.

commit aeef3aeb3e3994d5e5cbcc4a104f58a1d92b9e99
Author: Roy Marples <roy@marples.name>
Date:   Thu Mar 24 17:06:00 2011 +0000

    When the leased address changes on the interface but existing routes
    remain the same, we need to change the routes so that the source address
    changes as well.
    Fixes #208

commit 4d0527546e63ccb8b1894817ead6297844e74afd
Author: Roy Marples <roy@marples.name>
Date:   Thu Mar 24 01:55:06 2011 +0000

    Validate the IP address offered, as some faulty DHCP servers like to
    give is an invalid one.

commit f9d674b861b16beaaca4cb8a704ab42fc3495eb0
Author: Roy Marples <roy@marples.name>
Date:   Mon Mar 21 13:27:30 2011 +0000

    Make logger calls resemble dhcpcd calls to syslog(3).

commit 93f28c8b1aae7d164b126255b20d91009a9bd678
Author: Roy Marples <roy@marples.name>
Date:   Tue Mar 22 12:18:47 2011 +0000

    Parse subnet_mask= static option instead of deriving from ip_address=

commit 6e4615a1bb9e04bbd30bf4595c5a307fbd3da8fc
Author: Roy Marples <roy@marples.name>
Date:   Fri Mar 11 12:25:01 2011 +0000

    Exclude interface specific values when dumping the lease.

commit d3539f9543164ead1369b43b05b5026f80039a6e
Author: Roy Marples <roy@marples.name>
Date:   Tue Mar 8 20:38:26 2011 +0000

    Fix compile issue on RedHat 9

commit 1cd1e6903cd09eecc5021a0585399d57290ef150
Author: Roy Marples <roy@marples.name>
Date:   Mon Feb 7 17:40:15 2011 +0000

    Use $ifmetric instead of $metric.

commit f7d1c9dc2cfaf1f5139d3bcf18c6ec4be183c9b0
Author: Roy Marples <roy@marples.name>
Date:   Fri Feb 4 15:31:50 2011 +0000

    actual -> actually

commit 197c09f13462e90deb16e67c93746ff1a3caf599
Author: Roy Marples <roy@marples.name>
Date:   Fri Feb 4 14:56:03 2011 +0000

    2011 and new version.

commit 61e28cb808de42f35c0820c6b172a1d57559c098
Author: Roy Marples <roy@marples.name>
Date:   Fri Feb 4 14:43:51 2011 +0000

    Use RT_ROUNDUP and friends so that we work with NetBSD 64-bit routing.

commit b0873380fdbf2577bae999d480c0eb09dae65312
Author: Roy Marples <roy@marples.name>
Date:   Mon Jan 3 11:42:43 2011 +0000

    Welcome to 2011!

commit c799675f7fe5e43341dfd501c1a4e84e7d30f8cb
Author: Roy Marples <roy@marples.name>
Date:   Mon Jan 3 11:41:40 2011 +0000

    Update documentation about --request.

commit 5b6601a123ea7906e4c60cbff25091652a90815a
Author: Roy Marples <roy@marples.name>
Date:   Mon Jan 3 10:54:58 2011 +0000

    Release dhcpcd-5.2.10

commit 6f8d98c001600ba9258a1209b62ffdb03f4570de
Author: Roy Marples <roy@marples.name>
Date:   Thu Dec 23 22:18:56 2010 +0000

    Fix -r, --request address option

commit 3a6795ca09001d619f23b98a6005e8de720d7c98
Author: David Brownlee <abs@absd.org>
Date:   Mon Dec 6 11:54:36 2010 +0000

    Compile on Mac OSX 10.4

commit b4d4351ebe19fa1129d1ed3e7c33a174a9a585c3
Author: Roy Marples <roy@marples.name>
Date:   Fri Nov 19 10:17:14 2010 +0000

    No need to restart twice.

commit 1c4c531d5413f6ea5f8530a518dfdbf815df28e0
Author: Roy Marples <roy@marples.name>
Date:   Thu Nov 18 19:12:55 2010 +0000

    Release dhcpcd-5.2.9

commit 414626c0fe66facc7abd30b7ca8563446ae88b8b
Author: Roy Marples <roy@marples.name>
Date:   Thu Nov 18 19:12:22 2010 +0000

    Improve comments.

commit 3c18d8ca0bdfed74fb24bf9c61febbc0dd1b68f1
Author: Roy Marples <roy@marples.name>
Date:   Thu Sep 9 19:41:41 2010 +0100

    Fix ypbind and remove un-needed quoting.

commit f6633ba0d559b09613785253283f2b39676b594d
Author: Roy Marples <roy@marples.name>
Date:   Thu Nov 18 09:40:50 2010 +0000

    Document RELEASE reason, fixes #205.

commit 3ea8ad09a4e22d5be805e93a9340526a1828c48c
Author: Roy Marples <roy@marples.name>
Date:   Fri Nov 12 20:39:29 2010 +0000

    No point in building handle_hwaddr if we don't have RTM_CHGADDR

commit f1bbdeaf4ec22b5305d6471429e12773f16b1188
Author: Roy Marples <roy@marples.name>
Date:   Fri Nov 12 16:33:45 2010 +0000

    Support RTM_CHGADDR in NetBSD-6 for detecting link layer address changes.

commit 39826474886064f0ca3b46a8688f6d1efb35e513
Author: Roy Marples <roy@marples.name>
Date:   Thu Nov 11 21:07:50 2010 +0000

    Fix working out the inform address if none given.

commit cddf4a98eeaae6c378915ec23aaa961a58ed18b6
Author: Roy Marples <roy@marples.name>
Date:   Tue Nov 9 00:35:40 2010 +0000

    Add the hwaddr to be used to debugging.

commit 25828ab3e641a4dc5635cc8a7ef362742e5f8e69
Author: Roy Marples <roy@marples.name>
Date:   Tue Nov 9 00:34:38 2010 +0000

    Don't configure the interface twice.

commit 8f80d6ba1c789e280adffe30877befd3a2ba5978
Author: Roy Marples <roy@marples.name>
Date:   Fri Nov 5 08:13:07 2010 +0000

    Don't redefine _GNU_SOURCE.

commit 1a2f9c3b1dcf789dea64fc59e617288a1a0e5a6e
Author: Roy Marples <roy@marples.name>
Date:   Thu Nov 4 09:12:14 2010 +0000

    Respect $SED

commit 2067f761f9b6ea63bf5cfea94de67474ffca4546
Author: Roy Marples <roy@marples.name>
Date:   Wed Oct 27 15:17:21 2010 +0100

    Another kFreeBSD fix.

commit 59a36291643358e4728fe6e54b463059383c4b58
Author: Roy Marples <roy@marples.name>
Date:   Sat Oct 23 01:15:42 2010 +0100

    Fix invoke-rc.d detection, #202.

commit a772983d27ac501b23534610f6044f21bf6afd5a
Author: Roy Marples <roy@marples.name>
Date:   Fri Oct 22 18:55:44 2010 +0100

    whitespace.

commit 82ee210fb7a4a95223c4f4ac4e018ed62506df30
Author: Roy Marples <roy@marples.name>
Date:   Wed Oct 20 12:27:32 2010 +0100

    Add link_addr from NetBSD so that we compile on kFreeBSD as nothing
    there seems to provide that function.

commit b40ed7b35df02ceedf485dd6847ada5c95e2efc9
Author: Nicolas Joly <njoly@pasteur.fr>
Date:   Sun Oct 17 11:44:54 2010 +0100

    Man page corrections.
    Fixes #201.

commit 8c259337b9222e1624055e9a107c142b12c1322a
Author: Roy Marples <roy@marples.name>
Date:   Mon Oct 11 17:34:39 2010 +0100

    Fix syntax.

commit a73e0aff55cbca382ef21058a69f582efe5721b6
Author: Roy Marples <roy@marples.name>
Date:   Mon Oct 11 15:53:06 2010 +0100

    Change delete_timeouts into a macro.

commit e9393ac016109499cfac01efa3a44791b3903ef1
Author: Roy Marples <roy@marples.name>
Date:   Mon Oct 11 09:52:43 2010 +0100

    Allow queues to be defined at the start.

commit 4748a9c29cc72ec41db797acbc489635b4aff222
Author: Roy Marples <roy@marples.name>
Date:   Thu Oct 7 15:43:12 2010 +0100

    Punt empty line

commit b9d60fa1955babc573bedf4c2569af12a174cc26
Author: Roy Marples <roy@marples.name>
Date:   Wed Oct 6 09:53:28 2010 +0100

    Release dhcpcd-5.2.8

commit 5e67ada81cf6df5b91ef7e6699eab636a5eb4261
Author: Roy Marples <roy@marples.name>
Date:   Mon Sep 27 20:24:10 2010 +0100

    Some DHCP servers assign a host route via static routes by setting the
    gateway address to the leased address. This differs from the normal
    approach of making the gateway address match the destination address,
    so we change it when building our routing table.
    
    Fixes #200.

commit 23fc9fa0d57e2a8b5cf91ca330c2090a92727d57
Author: Roy Marples <roy@marples.name>
Date:   Mon Sep 27 20:08:17 2010 +0100

    Install the dump hook by default.

commit 3b4bbd2c1d765367a7bd259296cc78d181ec55eb
Author: Roy Marples <roy@marples.name>
Date:   Thu Sep 9 19:27:00 2010 +0100

    If we get a NAK during a test, we should not read the old lease as
    it's not dropped during the NAK handling.
    Fixes #199.

commit c6cc5d11fb055843d2ccf3b66f1a3fe88d702de7
Author: Roy Marples <roy@marples.name>
Date:   Thu Sep 9 15:40:27 2010 +0100

    Move service detection and interaction logic from the hooks to the
    configure script. This makes the hooks a lot less messy.

commit d40131311de7f64e8e522267615ebab73eb01ddc
Author: Michael Pagano <mpagano@gentoo.org>
Date:   Tue Aug 31 09:43:13 2010 +0100

    Document --version.

commit 4882924aa0e3916bc805dec9081bbfb62d56363e
Author: Roy Marples <roy@marples.name>
Date:   Tue Aug 24 14:35:15 2010 +0100

    Don't need this.

commit e7f260c33f2940b47b10a514d54e0861e56d6d8d
Author: Roy Marples <roy@marples.name>
Date:   Tue Aug 24 11:52:24 2010 +0100

    Move dump into it's own file and remove new_ from the variable names.

commit aff858bbdf2a2e4debf3c209a9529e8a270fcc05
Author: Roy Marples <roy@marples.name>
Date:   Tue Aug 24 11:36:20 2010 +0100

    Allow interface to also be a path to a DHCP wire formatted file.

commit 1f207530de6c1dc1d914d44305b1b909ec30b21b
Author: Roy Marples <roy@marples.name>
Date:   Tue Aug 24 11:25:32 2010 +0100

    Exit correctly on error.

commit 78133d4d2b56440be15a44984cd74d8b297f8f2d
Author: Roy Marples <roy@marples.name>
Date:   Tue Aug 24 11:18:31 2010 +0100

    Improve scripts for DUMP

commit 826e87182f2da710047979daeb362e3c7b3f612f
Author: Roy Marples <roy@marples.name>
Date:   Tue Aug 24 11:04:10 2010 +0100

    Just dump the lease, not any runtime options.

commit db5f15816797d8084a7b33a4cf696f40faa5c29f
Author: Roy Marples <roy@marples.name>
Date:   Tue Aug 24 10:48:57 2010 +0100

    Wups, remove silly commit.

commit d127ba9c029327c017d4f0a6e18752865c439533
Author: Roy Marples <roy@marples.name>
Date:   Tue Aug 24 10:34:21 2010 +0100

    Improve memory debug for dumping leases.

commit d0ad5a61ad16b8d05cfaf189bc2bf38101ff0400
Author: Roy Marples <roy@marples.name>
Date:   Tue Aug 24 10:16:07 2010 +0100

    -U, --dumplease now dumps the lease for the specified interface
    dhcpcd does not have to be running for this to work

commit 42756abdeeceea5aad565b5f989d3b7b57993441
Author: Roy Marples <roy@marples.name>
Date:   Sat Aug 7 20:44:21 2010 +0100

    if_up and if_down variables allow more flexability.

commit 4dc3ade399bf83b1a04166127350ad0f952a046f
Author: Roy Marples <roy@marples.name>
Date:   Wed Aug 4 07:59:15 2010 +0100

    Release dhcpcd-5.2.7

commit b29e23da7e1ae487a85b2c67ea64fc7610a7f9ff
Author: Roy Marples <roy@marples.name>
Date:   Wed Aug 4 07:44:56 2010 +0100

    Use the active link layer address if supported.
    Fixes #194.

commit 97f75d8691752fee5ec649a80f94d1760e5caa1c
Author: William Hubbs <w.d.hubbs@gmail.com>
Date:   Tue Aug 3 15:46:59 2010 -0500

    fix syslog function
    
    This fixes gentoo bug #328227.  The syslog function in
    dhcpcd-run-hooks was not working if more than two arguments were
    passed to it.

commit 4e05243ff9f8fc06c86c53335ead242d3dfe3e97
Author: Roy Marples <roy@marples.name>
Date:   Fri Jul 23 17:18:03 2010 +0100

    eloop functions can now specify a queue.
    This allows us to build future IPv6 queues that do not affect the
    main IPv4 queue.

commit 055c3ba366650305d0be480bbfbb903f2ee4bb9b
Author: Roy Marples <roy@marples.name>
Date:   Wed Jul 21 21:45:41 2010 +0100

    Use a dynamic buffer for managing link messages.

commit 7eeba667a9d6bdcd6dd4bd08dcc0b9c1d99e7703
Author: Roy Marples <roy@marples.name>
Date:   Wed Jul 21 09:51:47 2010 +0100

    Work out the size of the buffer we need to read netlink messages as recent
    64-bit Linux kernels have increased their header size and overflowed
    the fixed buffer we used.
    
    Could also fix #192.

commit dff3e788274f481f8b5ffcd131783c56e2104f6f
Author: Roy Marples <roy@marples.name>
Date:   Sun Jul 11 14:33:25 2010 +0100

    Fix build for slackware.

commit f5f797351bb3bb0e2d208f25e739e3edbf1347cb
Author: Roy Marples <roy@marples.name>
Date:   Wed Jul 7 22:09:20 2010 +0100

    Release dhcpcd-5.2.6

commit 6c4a0cd85c3e360a2d32365ecdf754b664d297ac
Author: Roy Marples <roy@marples.name>
Date:   Sat Jun 26 11:36:20 2010 +0100

    Rever prior patch that added an extra second per interface now we
    always daemonise in master mode.

commit 301ceb648d226e084615c1044bef901a88b685ed
Author: Roy Marples <roy@marples.name>
Date:   Sat Jun 26 10:17:54 2010 +0100

    Always daemonise on timeout if running in master mode.

commit 824113a8fb7998647d18f179d933affcc0f89346
Author: Roy Marples <roy@marples.name>
Date:   Sat Jun 26 10:09:59 2010 +0100

    Improve config file handling some more on Debian systems.

commit 3da47d3d175e8325840614aba15cc1d5d3ba2b26
Author: Roy Marples <roy@marples.name>
Date:   Sat Jun 26 10:08:47 2010 +0100

    Wait an extra second per interface for IPv4LL timeout.

commit 2af453116b52804a0e92af961f163535f02507ff
Author: Roy Marples <roy@marples.name>
Date:   Thu Jun 10 11:38:37 2010 +0100

    Fix compile on NetBSD

commit a129be34d8e256df025afc734852eb88cafdbf8a
Author: Roy Marples <roy@marples.name>
Date:   Thu Jun 10 10:24:55 2010 +0100

    Support Debian NTP init script

commit 3bd85a0118411de32629b0e336e6c270a8d2a666
Author: Roy Marples <roy@marples.name>
Date:   Wed Jun 9 22:16:04 2010 +0100

    Add distclean target

commit 5b2ca58e772718dbf59e69d661c28203ecfc7e30
Author: Roy Marples <roy@marples.name>
Date:   Wed Jun 9 17:51:40 2010 +0100

    Fix crash with last patch for rebinding interfaces

commit 11534acae3b6e55cdd3e40bd97fbccaa78d87483
Author: Roy Marples <roy@marples.name>
Date:   Wed Jun 9 16:32:03 2010 +0100

    Build correctly for Debian packages

commit 24d13bbc8af0699d333a86204ee89b4e8715dd1e
Author: Roy Marples <roy@marples.name>
Date:   Wed Jun 9 16:26:55 2010 +0100

    -n, --rebind now re-reads the configuration file, removes stale
    interfaces and rebinds existing ones.

commit 0d4b91ee50b9b83798d554af18692b5241046511
Author: Roy Marples <roy@marples.name>
Date:   Fri Jun 4 09:34:28 2010 +0100

    Release dhcpcd-5.2.4

commit a1436c2c9bb2c1cd0e2cd6d2b7ebdce08b6d6ed1
Author: Roy Marples <roy@marples.name>
Date:   Fri Jun 4 09:33:16 2010 +0100

    These files were updated in 2010, so fix copyrights.

commit 6624d6bbc1a379bb8338390938a387e22283397b
Author: Roy Marples <roy@marples.name>
Date:   Fri Jun 4 00:28:13 2010 +0100

    Fix a crash when using clientid's.

commit 61b8c883fcb1a5f4a4c2a7a3e4607190d3d5546c
Author: Roy Marples <roy@marples.name>
Date:   Wed May 26 08:16:38 2010 +0100

    Release dhcpcd-5.2.3

commit a8ca7fa65e5023e885195bb953c95210bc7fc0cb
Author: Roy Marples <roy@marples.name>
Date:   Wed May 26 08:13:23 2010 +0100

    Clear timeouts on IPv4LL failure.

commit bec7d3fc66893377abb396cf7158a9f91fc5768b
Author: Roy Marples <roy@marples.name>
Date:   Wed May 12 17:20:55 2010 +0100

    Fix IPv4LL defending and add a bit more logging.

commit 0a0807275f9dc051ebd2f3ffe19f055972410187
Author: Roy Marples <roy@marples.name>
Date:   Fri Apr 30 19:39:24 2010 +0100

    Always respect the timeout.

commit 3a832bd822c650dba1542229373cd14600d0c260
Author: Roy Marples <roy@marples.name>
Date:   Fri Apr 30 19:22:48 2010 +0100

    Indicate if we have a server id or not by using from/via.

commit 828873159f042f7b4cf41f335e1d633b81a2a63b
Author: Roy Marples <roy@marples.name>
Date:   Fri Apr 30 16:29:00 2010 +0100

    Move -N to a config file only option so it does not conflict with
    the option from dhcpcd-4

commit 4acaf5be247e9d8cca1cf9718bcf63afe2ec7931
Author: Roy Marples <roy@marples.name>
Date:   Fri Apr 30 09:20:01 2010 +0100

    Use shorter messages now we show pid so that we don't overflow 80 chars.

commit a804d99eb53e64081138581949ed8fd692cfa676
Author: Roy Marples <roy@marples.name>
Date:   Fri Apr 30 04:24:06 2010 +0100

    Use timeout in test mode as well.

commit 68292e54492899e5a4a69b6519ae383de8bad4ee
Author: Roy Marples <roy@marples.name>
Date:   Fri Apr 30 04:16:39 2010 +0100

    Style and improve last patch slightly.

commit e3b7c244c5e82cbc7605364b46a8186f12bb07a8
Author: Gerd von Egidy <gerd.von.egidy@intra2net.com>
Date:   Wed Apr 28 12:02:17 2010 +0200

    improve log_dhcp to always tell from which server a message came
    
    currently this information is derived from the DHO_SERVERID option.
    But when the server doesn't set it, no source info is logged. Print
    the src ip of the udp packet as "from" in this case. This is not perfect
    as there could be a dhcp forwarder involved, but this is better than nothing.

commit 103da9e02ae00e60c6a8a5e34965f9035a5150e5
Author: Gerd von Egidy <gerd.von.egidy@intra2net.com>
Date:   Wed Apr 28 11:53:30 2010 +0200

    log the pid when forking to background.
    
    mark the log entry before forking as LOG_DEBUG as we usually don't have problems
    here and don't want to log twice with LOG_INFO

commit 5f917798db53fef18ab6fe2afa1aa5835ef7ccea
Author: Gerd von Egidy <gerd.von.egidy@intra2net.com>
Date:   Wed Apr 28 11:51:26 2010 +0200

    add the pid of the current process to all messages sent to syslog.
    
    useful when debugging forking-problems, multiple daemons running in parallel etc.

commit 6765fe77210f00d4a7e83df19f601608a322f98e
Author: Roy Marples <roy@marples.name>
Date:   Tue Apr 27 11:46:44 2010 +0100

    Quiet should always be quiet on the console regardless of debug.

commit e957b51d2650226bcde95e96d06df1b459a01fa9
Author: Roy Marples <roy@marples.name>
Date:   Mon Apr 19 13:36:28 2010 +0100

    Reorganise the opening and closing of sockets a bit.
    Attempt at addressing #190.

commit a670a3120a118135dd8986ba9191cd50810ce52b
Author: Roy Marples <roy@marples.name>
Date:   Mon Apr 19 12:16:43 2010 +0100

    Force gatetway to zero instead of adding a host route when the interface
    does not support ARP. This improves performance slighty.
    Addresses #188.

commit dcbae25bb04a3c4c2337e41ee998926e54e512e5
Author: Roy Marples <roy@marples.name>
Date:   Thu Apr 15 14:22:41 2010 +0100

    Check to see if any routers require a host route if they are on a
    different subnet.
    This fixes issues with badly configured DHCP servers.
    We may need to extent this check to any route with a host destination
    in the future.
    Fixes #188.

commit 8b5e971093a6fd97762af1a96d655b80054b1531
Author: Naohiro Aota <naota@elisp.net>
Date:   Tue Apr 13 13:10:16 2010 +0100

    closefrom(3) on FreeBSD is a void return.

commit a2bc3830d2244bd04b5968a49ad0afaac61c93d7
Author: Roy Marples <roy@marples.name>
Date:   Thu Apr 1 20:13:07 2010 +0100

    We don't use arpble anymore.

commit 28c788b815ce2a827704f92a24b60d97db8f82b8
Author: Roy Marples <roy@marples.name>
Date:   Wed Mar 31 09:48:44 2010 +0100

    Release dhcpcd-5.2.2

commit 277475918b9ca4d3860b7c2a04789331f7e3ed9c
Author: Roy Marples <roy@marples.name>
Date:   Wed Mar 31 09:46:46 2010 +0100

    Update copyright

commit e3034f465772105b6acec63d2dc90594c4b9c0d8
Author: Roy Marples <roy@marples.name>
Date:   Tue Mar 30 20:46:03 2010 +0100

    Ensure SSID is terminated.

commit 571b8298bf67f96b91e26a15b708ffb26808531d
Author: Roy Marples <roy@marples.name>
Date:   Fri Mar 12 20:33:15 2010 +0000

    Randomize ip_id and remove IPTOS_LOWDELAY and IP_DF flags.
    This makes us a better net citizen.

commit 28dc74d7608121a09c224c0812974bf882b1b688
Author: Roy Marples <roy@marples.name>
Date:   Thu Mar 11 10:02:03 2010 +0000

    Fix compile on old systems with broken headers.

commit 7916f8d3428670e6a5f6e88e14cb043ad7156d18
Author: Roy Marples <roy@marples.name>
Date:   Sat Mar 6 17:46:01 2010 +0000

    We should not set a maximum message size bigger than what we can
    actually handle.

commit dbe2019db484d4dc9b4b5211c47c024b5af250df
Author: Roy Marples <roy@marples.name>
Date:   Sat Mar 6 17:16:20 2010 +0000

    Close the fp.

commit 45101cbb2ccfdc8f3db7938b1054c3975e0e4c9f
Author: Roy Marples <roy@marples.name>
Date:   Fri Mar 5 15:51:31 2010 +0000

    Don't display NULL platforms.

commit 3bc21a1a09852407df89a363c67d7575efa081c8
Author: Roy Marples <roy@marples.name>
Date:   Fri Mar 5 15:47:46 2010 +0000

    Set the broadcast flag for interfaces that say they need it.

commit 9d1e81bb111c80972045839247d90b57974804e0
Author: Roy Marples <roy@marples.name>
Date:   Sat Feb 27 16:00:28 2010 +0000

    Release dhcpcd-5.2.1

commit ea7a81b96dc07830c83d3d7447dad828a480d24c
Author: Roy Marples <roy@marples.name>
Date:   Sat Feb 27 15:57:44 2010 +0000

    Include platform.h

commit 7d81bac59927d8268eb542e565bd5ccc8b01bb82
Author: Roy Marples <roy@marples.name>
Date:   Sat Feb 27 15:33:18 2010 +0000

    Fix import target.

commit 59291cf719667d15b306e7434329231b6b7f3f80
Author: Roy Marples <roy@marples.name>
Date:   Sat Feb 27 08:58:55 2010 +0000

    Release dhcpcd-5.2.0

commit 951bad6711a8c0c9f5b7527ec218d219787a9b4f
Author: Roy Marples <roy@marples.name>
Date:   Sat Feb 27 08:37:00 2010 +0000

    Only UDP based on current state, not the offer.

commit 2a8dfc7dbbdac0815b655f16d0088db55b3364cd
Author: Roy Marples <roy@marples.name>
Date:   Fri Feb 26 20:37:30 2010 +0000

    Enable net.ipv4.conf.$iface.promote_secondaries on Linux so that
    we keep the subnet when changing addresses on the same subnet.

commit 88655bf9d3ca56108e6bc3d928b6c9ae21239302
Author: Roy Marples <roy@marples.name>
Date:   Fri Feb 26 15:06:51 2010 +0000

    When trying IPv4LL from a DHCP lease with an IPv4LL address, just
    use the address and nothing else.

commit 2a7bd1760f67335f25208dcdd11f8902eea4aa83
Author: Roy Marples <roy@marples.name>
Date:   Fri Feb 26 15:06:23 2010 +0000

    Open and close sockets better.

commit 2e616045827abbbf42a63f8c0b1d0cf0daad32b3
Author: Roy Marples <roy@marples.name>
Date:   Fri Feb 26 13:46:07 2010 +0000

    Deleting all timeouts for the interface is better.

commit 115b36f759eac495ef9e5611d3ba21405f9156d1
Author: Roy Marples <roy@marples.name>
Date:   Fri Feb 26 13:41:38 2010 +0000

    Clear timeouts when starting ipv4ll.

commit 67cc535c16cd2c0560cda850d12d6eb8dad200d1
Author: Xia Weizhong <xwz7611@gmail.com>
Date:   Thu Feb 25 09:22:30 2010 +0000

    Fix a crash when server sends more than one of the same option.

commit 818efd91937a20f03ab78142cb541ce4ea88cab8
Author: Roy Marples <roy@marples.name>
Date:   Wed Feb 17 22:23:17 2010 +0000

    Allow IPv4LL address range to be configured by DHCP.
    We now check the message for a DHCP cookie instead of the address
    assigned to test for local link.
    Fixes #187.

commit 7e0d9a4a38dcca34f9e54eafe2120b6d4719e554
Author: Roy Marples <roy@marples.name>
Date:   Wed Feb 17 13:26:45 2010 +0000

    Use a more descriptive vendorid, to include OS arch and platform.

commit 9e456b5d10da8f9cb382bafd5cc785b95931fb56
Author: Roy Marples <roy@marples.name>
Date:   Sun Jan 31 20:17:35 2010 +0000

    Release dhcpcd-5.1.5

commit 5aec6bbd13b0de0c8cc8111d82f827ef7d3eed35
Author: Roy Marples <roy@marples.name>
Date:   Thu Jan 28 20:12:54 2010 +0000

    -J, --broadcast now sets the broadcast flag in DHCP messages.
    Fixes #186 partially - we should detect a Hipersocket network and enable this by
    default.

commit beffe25d106d2b2452bd0d87b1b249ddb2e22528
Author: Roy Marples <roy@marples.name>
Date:   Wed Jan 27 11:51:30 2010 +0000

    Clear leased address when discarding.
    Another fix for #185.

commit 9eee804aed30995b1dd8f075cae5e6c343289242
Author: Roy Marples <roy@marples.name>
Date:   Tue Jan 26 08:07:21 2010 +0000

    If we reboot an old valid lease but fail to ACK it, we need to
    clear the address when discovering. Fixes #185.

commit cbd9497b6c1cb3e6e87bfe8d4c729ffc7377fe30
Author: Roy Marples <roy@marples.name>
Date:   Mon Jan 25 20:06:15 2010 +0000

    Ensure that we don't inherit OS and others from env.

commit 1198d97a678ef8804a7bdd2546e06d20a38a76df
Author: Soren Jacobsen <snj@pobox.com>
Date:   Sun Jan 24 21:01:59 2010 +0000

    Spelling corrections.

commit 437e01e01db4f963f8b15d7ee55b00a72d87e292
Author: Roy Marples <roy@marples.name>
Date:   Thu Jan 14 02:23:19 2010 +0000

    Infinite lease times are always valid when reading leases.

commit fce0ef8639b442c219a6f2d59a8115be91f79651
Author: Roy Marples <roy@marples.name>
Date:   Thu Jan 14 02:04:41 2010 +0000

    -H, --xidhwaddr will use the last four bytes of the hardware address
    as the xid instead of generating a random number.
    Fixes #183, thanks to Aurelien.

commit d63571a35d145eae950a15da7749d5aab651085c
Author: Roy Marples <roy@marples.name>
Date:   Thu Jan 14 01:44:49 2010 +0000

    Update copyright

commit a890b66b92579d8e0610dc99ae85fb1cd8506a68
Author: Roy Marples <roy@marples.name>
Date:   Wed Jan 13 23:54:45 2010 +0000

    Don't warn about unsupported family for infiniband.
    Fixes #184 thanks to Aurelien.

commit c140606bfb03da65fa5dab73b52b5c264748ddbd
Author: Roy Marples <roy@marples.name>
Date:   Wed Jan 13 23:44:14 2010 +0000

    Import cut down arc4ramdom.c from OpenBSD for better randomness.
    Partially addresses #183.

commit 1b831d1e436edaf2dbfa84257c085aee9c8797f5
Author: Roy Marples <roy@marples.name>
Date:   Wed Dec 23 08:22:32 2009 +0000

    Release dhcpcd-5.1.4

commit c4dbe418f7f19adf28007022efeb5814e69d161c
Author: Roy Marples <roy@marples.name>
Date:   Wed Dec 23 08:05:57 2009 +0000

    Fix compile.

commit 95f190ba40d9d8493f192f8403a54793f73951d1
Author: Roy Marples <roy@marples.name>
Date:   Wed Dec 23 07:18:22 2009 +0000

    Only warn about CSR when binding.

commit 91a2335e4b9c0fad8221fd57e80f80905ff34f72
Author: Roy Marples <roy@marples.name>
Date:   Mon Dec 14 14:47:16 2009 +0000

    Fix finding deleted routes on Linux.

commit 1ec0fd694c5688b1e79f02974ac65db81b40c4f6
Author: Roy Marples <roy@marples.name>
Date:   Mon Dec 14 14:46:54 2009 +0000

    Style

commit 608e63f111b5bf458f6c5bda919f5e85e760c21d
Author: Roy Marples <roy@marples.name>
Date:   Thu Dec 3 13:30:09 2009 +0000

    Wait 1/100th of a second before release as testing shows the
    release is sent correctly even in a heavy load.

commit 64d6d9b2e00ba8420a00eb56d5d62a6dcbca8b4f
Author: Roy Marples <roy@marples.name>
Date:   Tue Dec 1 00:57:45 2009 +0000

    Fix the -S option, #181.

commit f9c75906c464af6f41c4a73d792ddcb0b4c6d647
Author: Roy Marples <roy@marples.name>
Date:   Tue Nov 24 01:15:08 2009 +0000

    Give the RELEASE packet a chance to leave the kernel
    before dropping the ip.

commit d829da8dd46870f3fd69d2a60cef253eb61b1cdf
Author: Roy Marples <roy@marples.name>
Date:   Fri Nov 20 15:14:27 2009 +0000

    If we have to bring an interface up, and we don't have any carriers
    then we need to wait for a second to allow an interface to settle.

commit e976e432578624f3f3b723e5a8b270b7e2ad43d9
Author: Roy Marples <roy@marples.name>
Date:   Fri Nov 20 14:35:36 2009 +0000

    Small code optimisation.

commit f8c68faf25bfe6ad7f95dcdd56bf44b14d866e98
Author: Roy Marples <roy@marples.name>
Date:   Fri Nov 20 12:40:59 2009 +0000

    Fix the import target a little.

commit 8709fec393a299f4c7501ed6f2279553d79d92dd
Author: Roy Marples <roy@marples.name>
Date:   Fri Nov 20 12:20:10 2009 +0000

    Allow --without-getline to skip the getline test.
    This makes NetBSD importing a little easier.

commit 9e4f702a262818cc8421a9f80ddaca65a0edf222
Author: Roy Marples <roy@marples.name>
Date:   Thu Nov 19 21:53:25 2009 +0000

    Re-apply lease info if different - fixes occasional release being broadcast.
    Ensure we use a new xid when releasing.

commit 3d0a728e3ef713ac62f09d57c7abad5443ee279d
Author: Roy Marples <roy@marples.name>
Date:   Thu Nov 19 21:31:41 2009 +0000

    dhcpcd should log to syslog even with quiet.

commit c8c280b24d6f4d8b167c73fb21e6389b5b6e76e9
Author: Roy Marples <roy@marples.name>
Date:   Sun Oct 25 23:21:21 2009 +0000

    Style.

commit fa7f3fdf70848a0f67bcafce1c0ee00d7fa75ce3
Author: Roy Marples <roy@marples.name>
Date:   Sun Oct 25 23:08:14 2009 +0000

    Release dhpcd-5.1.3

commit 4b675f6bb06a15c99687aeea81f69ab84caf85cf
Author: Roy Marples <roy@marples.name>
Date:   Sun Oct 25 14:44:28 2009 +0000

    Document default behaviour better for running on a single interface.

commit 030959e5832a0544da88b00dbcfda751254699d6
Author: Roy Marples <roy@marples.name>
Date:   Sun Oct 25 10:56:54 2009 +0000

    We need to enable waitip when running on a single interface to retain
    compat with older dhcpcd versions.

commit 32f93b6839df1a63cd8b0ecf669e971ef2b6b7d1
Author: Christoph Egger <Christoph_Egger@gmx.de>
Date:   Sat Oct 24 23:36:56 2009 +0100

    Typo

commit e83ef53401adb74728f4abb3051aa6a81e4b7602
Author: Roy Marples <roy@marples.name>
Date:   Sat Oct 17 16:31:39 2009 +0100

    Don't always request classless_static_routes, instead add it to dhcpcd.conf
    as a default option. Add a debug message when adding classless_static_routes.
    This is because some DHCP servers have this option badly setup and it could
    not be otherwise disabled.

commit cd04f4ccb61ad1c80c0cf648e2128c53a7ffeeb2
Author: Roy Marples <roy@marples.name>
Date:   Sat Oct 17 07:58:42 2009 +0100

    Don't allow the same hook to be added more than once.

commit b545366ad462d810efd073572ae3acec16f50f66
Author: Roy Marples <roy@marples.name>
Date:   Fri Oct 16 22:36:51 2009 +0100

    If using --with-hooks, don't detect any other hooks.

commit 2ca07acd6f43ba93d0812525297861bf3412d864
Author: Roy Marples <roy@marples.name>
Date:   Fri Oct 16 22:13:41 2009 +0100

    Release dhcpcd-5.1.2

commit 1ad3d0c85b6b681ea59b05686c13e89a4c227f63
Author: Roy Marples <roy@marples.name>
Date:   Fri Oct 16 20:59:30 2009 +0100

    Add back -w, --waitip so that user has total control over behaviour.

commit 3c1a954af4a6ec36ff7ac55a4d32fb004d67978e
Author: Roy Marples <roy@marples.name>
Date:   Thu Oct 15 08:33:24 2009 +0100

    The hwaddr could have changed for existing interfaces.

commit 9a07d90f95d3fc4f6503d17583b8114c9e92277f
Author: Roy Marples <roy@marples.name>
Date:   Thu Oct 15 08:32:49 2009 +0100

    Only work with ethernet by default so firewire does not slow down the boot.

commit 050549d24e8817d512c99be2aa02b003b3c21485
Author: Roy Marples <roy@marples.name>
Date:   Thu Oct 15 01:33:23 2009 +0100

    Multiple debug no longer stops backgrounding.

commit 11102d00aae4b7d0694614000ed36e17c0647e16
Author: Roy Marples <roy@marples.name>
Date:   Thu Oct 15 01:30:54 2009 +0100

    Just have one open socket for AF_NET.

commit 9a2b28d4f02353a574566c7118c38fa77e880a38
Author: Roy Marples <roy@marples.name>
Date:   Wed Oct 14 16:16:07 2009 +0100

    Remove the -w option and make it the default action if at least one
    interface reports a carrier.

commit 1b6b6b76b2e6e050b0b4f702a431ea23d69bda0f
Author: Roy Marples <roy@marples.name>
Date:   Tue Oct 13 07:02:30 2009 +0100

    wait -> waitip
    It's more descriptive and allows future wait$entity commands.

commit 11384236bd66552163cae26a07894d8d6336a5cf
Author: Roy Marples <roy@marples.name>
Date:   Sat Oct 10 17:25:06 2009 +0100

    wait should work in dhcpcd.conf

commit 6002d7ee3cd796e842de185e44901d07eb3cf602
Author: Roy Marples <roy@marples.name>
Date:   Fri Oct 9 20:24:22 2009 +0100

    Abort when we have an invalid interface list.

commit 0625284e78460204e8a500d04b10648af117a1b8
Author: Roy Marples <roy@marples.name>
Date:   Fri Oct 9 20:23:50 2009 +0100

    Always unlink the lease file on ARP failure so we never rebind the failed address.

commit adc92f576cdca802e6845aeec2a38e165077a720
Author: Roy Marples <roy@marples.name>
Date:   Fri Oct 9 20:00:34 2009 +0100

    We need to ensure sockets are open for sending a DECLINE.

commit e9ce750f51dbd5ac2b7c756c84866aa9b3e87905
Author: Roy Marples <roy@marples.name>
Date:   Fri Oct 9 17:26:23 2009 +0100

    Remeber preferred domain list order so we fall back correctly.
    Stop ypbind when we don't have any domains so we don't stall.

commit 755e80b4aa6032dc4048ba7d6dcba04e4efe17f7
Author: Roy Marples <roy@marples.name>
Date:   Fri Oct 9 14:12:20 2009 +0100

    Add new hook, 50-ypbind for BSD ypbind versions.
    configure now detects ntpd and ypbind for automatic hook install.

commit 6944786bbafa6107b20bf5ff93226a91d2a9bdb8
Author: Roy Marples <roy@marples.name>
Date:   Thu Oct 8 21:21:23 2009 +0100

    Improve import so it's more generic.

commit 2511fdb625c55824c6df7b5a40af87bff05b2136
Author: Roy Marples <roy@marples.name>
Date:   Thu Oct 8 20:56:52 2009 +0100

    Add an extra timeout for IPv4LL when in use.

commit a45812013fd7a23472914d783c3ff6c01502c1ba
Author: Roy Marples <roy@marples.name>
Date:   Thu Oct 8 08:07:25 2009 +0100

    Timeout should not automagically increase when using IPv4LL.
    If we need extra we should handle that at handle_exit_timeout() and log.

commit 27de049c46695afea4e84172343d9b14d7b2c616
Author: Roy Marples <roy@marples.name>
Date:   Wed Oct 7 22:11:14 2009 +0100

    -w, --wait forces dhcpcd to wait for an ip address or timeout when
    running on more than one interface.

commit 46db480562cf4ff65c5b2c1da32712eea69cd7f4
Author: Roy Marples <roy@marples.name>
Date:   Fri Oct 2 21:57:44 2009 +0100

    Don't export git .gitignore file

commit 246709f2fdc21a84f1278fd51aba714ffdefff20
Author: Roy Marples <roy@marples.name>
Date:   Fri Oct 2 20:08:59 2009 +0100

    Improve config generation style more

commit 74439dccdb682268cb803200099dca526e7e9e33
Author: Roy Marples <roy@marples.name>
Date:   Fri Oct 2 19:39:03 2009 +0100

    Style config.h a little better.

commit 07b6b45304daa7d4475abd2c0119baf11112453f
Author: Roy Marples <roy@marples.name>
Date:   Sat Sep 26 09:00:25 2009 +0100

    Report ClientID being used in debug.

commit 5a08a32d3002a4b19c561bc3e3198867ce2bf0b5
Author: Roy Marples <roy@marples.name>
Date:   Thu Sep 24 22:29:18 2009 +0100

    Add -fno-common to debugging CFLAGS.
    Declare udp_dhcp_len as extern.
    Include common.h in dhcp.h to get _packed definition.
    Thanks to David Wu for pointing this out.

commit 3bd50fe42235697be3181a971610858cf1f58af3
Author: Roy Marples <roy@marples.name>
Date:   Tue Sep 22 07:26:04 2009 +0100

    Release dhcpcd-5.1.1

commit 9bd1487435f30f720f7303e224bf046333c681ec
Author: Roy Marples <roy@marples.name>
Date:   Sun Sep 20 17:20:31 2009 +0100

    Add a comment about enabling a ClientID.

commit 1d03ea87f7790682ec917bb2b7c96a070ef169a4
Author: Stephen Borrill <sborrill@NetBSD.org>
Date:   Sat Sep 19 15:25:48 2009 +0100

    Fix various typos and grammatical errors.

commit f0205b4bf924389154310153d20805695cad5fa5
Author: Roy Marples <roy@marples.name>
Date:   Wed Sep 9 11:32:48 2009 +0100

    Simplify config.

commit 80fcf29ec154ac575081aa0e1fc49f10ce65b02c
Author: Roy Marples <roy@marples.name>
Date:   Mon Sep 7 22:05:46 2009 +0100

    Don't null terminate gratuitously when handling quotes.

commit adc83b46a5ad9d88286019f79ba2dcf4a6ffd359
Author: Roy Marples <roy@marples.name>
Date:   Sat Sep 5 00:27:53 2009 +0100

    Really fix no debug by default.

commit 2131e894bf388f83d9ed9e75dfb6faa3c226f961
Author: Roy Marples <roy@marples.name>
Date:   Sat Sep 5 00:15:18 2009 +0100

    Disable debugging by default if not built from git.

commit 39da195a2390e190babed25fff1c51073583a12a
Author: Roy Marples <roy@marples.name>
Date:   Thu Sep 3 13:18:03 2009 +0100

    Accept --bindir and --sbindir to modify SBINDIR - we don't use BINDIR.
    --help now prints a simple message.

commit 0378c23275c1e74299e1bf28d787ffb8cc401b8c
Author: Roy Marples <roy@marples.name>
Date:   Thu Sep 3 11:10:51 2009 +0100

    Use our defined CPPFLAGS and CFLAGS for compile tests.
    Fixes #178.

commit d076e0da9c41857a79428922d4bffe66e00b88bc
Author: Roy Marples <roy@marples.name>
Date:   Wed Sep 2 21:21:11 2009 +0100

    Release dhcpcd-5.1.0

commit 46de74773d52aec4952e05371354a78ee567bbf1
Author: Roy Marples <roy@marples.name>
Date:   Wed Sep 2 19:32:28 2009 +0100

    Remove escapes in man pages for vendor ,"hello world"
    Fixes #177 again.

commit 1e0ea3f44b6d3f421e880899b5b38a6b895431a3
Author: Roy Marples <roy@marples.name>
Date:   Tue Sep 1 21:38:01 2009 +0100

    Allow an un-encapsulated vendor option.
    Fixes #177.

commit d6fe6dd0c7fc2b59dcc57bcdd80cd611efd650ca
Author: Roy Marples <roy@marples.name>
Date:   Tue Sep 1 21:37:34 2009 +0100

    Fix parsing of escape codes.

commit 809e41cfabb16d9b777f16a422eed755a0306518
Author: Roy Marples <roy@marples.name>
Date:   Tue Sep 1 08:45:11 2009 +0100

    We should not affect other interfaces when handling new interface
    notifications.

commit 022f1836a364389c4a60358e73118c69d3718f49
Author: Roy Marples <roy@marples.name>
Date:   Mon Aug 31 22:51:17 2009 +0100

    Don't pass "dhcpcd $iface" to discover_interfaces so our
    denyinterfaces config option works for hotplugged interfaces.

commit e39dcf26d5d2c55afb7c52bce63d6ba380cd86bb
Author: Roy Marples <roy@marples.name>
Date:   Wed Aug 12 09:38:41 2009 +0100

    Whitespace.

commit df5d214d9d8c59f925c4947b5022de12738c235b
Author: Roy Marples <roy@marples.name>
Date:   Tue Aug 11 21:12:46 2009 +0100

    Fix timeout of 0 disabling the timeout.

commit e2223be45538521599ab70a4e1722c4ca1821c37
Author: Roy Marples <roy@marples.name>
Date:   Tue Aug 11 21:08:02 2009 +0100

    Fix persistent option.

commit 11794fc05ce66a2ad9255a5cb6fb839354e186eb
Author: Roy Marples <roy@marples.name>
Date:   Wed Aug 5 22:39:42 2009 +0100

    Don't check family on point to point interfaces as we monitor them.

commit a085707e500ce2c17eaaa41853d33c3a4a9cf096
Author: Roy Marples <roy@marples.name>
Date:   Wed Aug 5 22:16:09 2009 +0100

    Some drivers report ENODEV when bring the interface up if their kill switch is on.
    This stops dhcpcd from using the interface, so we now just blunder on and await
    a carrier up event.
    IMO, ENODEV is the wrong error code as the device IS present, it's just disabled.
    But the patch here still makes sense.

commit 94f7069047c0552b0fb90494141c29aed8a2db90
Author: Roy Marples <roy@marples.name>
Date:   Wed Aug 5 22:15:50 2009 +0100

    Enable debugging for git by default.

commit 225ec4e9b2aadaa65e575d2245c5ada12436a1fe
Author: Roy Marples <roy@marples.name>
Date:   Wed Aug 5 22:08:44 2009 +0100

    Only allow hardware families we know we can work with by default.
    If an interface with a different hardware family is requested by the user then
    emit a warning.

commit fdedb326d556ad79db195fffadcc24c4e8e3f0d7
Author: Roy Marples <roy@marples.name>
Date:   Wed Aug 5 21:35:51 2009 +0100

    Move icc to the back of the queue

commit e7f5a2183fc2a57e0dbd9b77d7d6f6c784c2f75d
Author: Roy Marples <roy@marples.name>
Date:   Wed Jul 29 09:51:33 2009 +0100

    Include sys/types.h to compile on NetBSD-4

commit add53d2239b81d4775e793d806dd54fce69b820d
Author: Roy Marples <roy@marples.name>
Date:   Sun Jul 26 22:56:43 2009 +0100

    Remove superfluous support words.

commit 116a92e711566599eb84defff78ef636eddc5a3b
Author: Roy Marples <roy@marples.name>
Date:   Sun Jul 26 20:37:46 2009 +0100

    Pretty hooks output and abort if no cc found.

commit 6342a8d38820d254dad98b703b563592846e0d14
Author: Roy Marples <roy@marples.name>
Date:   Sun Jul 26 20:29:37 2009 +0100

    Support more autotools options

commit e6a21c0af1213791366fd5e4759ab657a68ecc2f
Author: Roy Marples <roy@marples.name>
Date:   Sun Jul 26 18:26:18 2009 +0100

    Ignore some autotool options.

commit ebd2fd10295c947ad7bcc60efe4f131d0b9ad338
Author: Roy Marples <roy@marples.name>
Date:   Sun Jul 26 18:18:10 2009 +0100

    Allow multiple hooks

commit 3236a246e6e2f3835dd3b7b5303a351106762277
Author: Roy Marples <roy@marples.name>
Date:   Sun Jul 26 17:40:47 2009 +0100

    Warn for unknown options

commit d364146ee32f42ef9579ac8def62065df5a8c62f
Author: Roy Marples <roy@marples.name>
Date:   Sun Jul 26 16:27:00 2009 +0100

    Fix -f /path/to/config, #176.
    Also, warn if we cannot open the file.

commit 727f9b9ab2ea7ee3833cfe4b11c30c851b376d29
Author: Roy Marples <roy@marples.name>
Date:   Sun Jul 26 00:37:20 2009 +0100

    Fix usage.

commit 50b688a74f5031134c961951f290a0418bf427d7
Author: Roy Marples <roy@marples.name>
Date:   Sun Jul 26 00:22:10 2009 +0100

    -e, --env var=value
    now pushes var=value to the environment when dhcpcd-run-hooks is run.
    This allows the possibility to set env vars that hook scripts can work off.
    A good example of this is 30-hostname so that force_hostname=YES can set
    the hostname regardless of the current hostname.
    Fixes #175.
    
    --reconfigure now takes the short option -g.

commit fa166411d58cbc17ab51681ff03af4ca70dd5388
Author: Roy Marples <roy@marples.name>
Date:   Sun Jul 26 00:11:07 2009 +0100

    Fix section.

commit 84a95f7ffda2b047c7792ca33213d7910f2305f3
Author: Roy Marples <roy@marples.name>
Date:   Sat Jul 25 18:57:49 2009 +0100

    Documentation updates.
    A few minor corrections, but mainly updates the expected behaviour for the hostname being sent.

commit 819ff119fba4de41717d114518ad0128c6f803e1
Author: Roy Marples <roy@marples.name>
Date:   Tue Jul 21 21:51:00 2009 +0100

    cd .. vs cd -, so we don't echo the directory

commit 5cf55a50976a1a075359e3bfedf6a33d0d3ade86
Author: Roy Marples <roy@marples.name>
Date:   Tue Jul 21 21:09:46 2009 +0100

    Bump version to indicate a new branch.

commit f3f76498c56c9da8a0be3ea300746a91ca438de3
Author: Roy Marples <roy@marples.name>
Date:   Tue Jul 21 21:07:13 2009 +0100

    Don't leave configure test files around when aborting.

commit 5982a781a1f50ba617c1beec5ee2e8b1c42be62e
Author: Roy Marples <roy@marples.name>
Date:   Mon Jul 20 16:49:05 2009 +0100

    Test for fqdn name.

commit ad9946414e2fad2169313dee5939dbbc80177370
Author: Roy Marples <roy@marples.name>
Date:   Sun Jul 19 21:03:58 2009 +0100

    Don't FAIL the script when testing

commit f7c15d58be83479253a7c78a231a4a4f1312cc50
Author: Roy Marples <roy@marples.name>
Date:   Sat Jul 18 12:31:56 2009 +0100

    Test for getifaddrs support.

commit 26b878760787280e918f26b78c1667ed6b2c2829
Author: Roy Marples <roy@marples.name>
Date:   Thu Jul 16 12:03:09 2009 +0100

    Fix import.

commit 349ad840d6ca3c4cf0b071f161203db495bb5a74
Author: Roy Marples <roy@marples.name>
Date:   Wed Jul 15 10:36:43 2009 +0100

    Add import target for easy import into NetBSD

commit be1c191e5dcfc60280159c34409817f4aece79c8
Author: Roy Marples <roy@marples.name>
Date:   Tue Jul 14 23:01:42 2009 +0100

    Documentation update

commit 5f977d69ff5ddb4a3078db6dd39f1ee92c76032b
Author: Roy Marples <roy@marples.name>
Date:   Tue Jul 14 22:52:43 2009 +0100

    Add comment about GNUMakefile

commit 6037879f4f5815abf886590725584ee979f34055
Author: Roy Marples <roy@marples.name>
Date:   Tue Jul 14 22:01:59 2009 +0100

    Fix compile without memory debug
    Add configure option for --with-hook=ntp
    Add debug CFLAGS for git clones
    Fix manpage installation

commit edf1bfbe8cf6a5a498b5af91c7601090c828a29f
Author: Roy Marples <roy@marples.name>
Date:   Tue Jul 14 16:10:09 2009 +0100

    Fix tests and compile for NetBSD.

commit 1cb554929b5c5671721adfb0b3c6fc8b43c3c5e5
Author: Roy Marples <roy@marples.name>
Date:   Tue Jul 14 14:59:30 2009 +0100

    Replace the mk stubs with a autotools like configure script.
    Split compat libc functions out into subdir.

commit 3e8fb9dcea9e0eb089fca7cc1405358c462dc4f9
Author: Roy Marples <roy@marples.name>
Date:   Sun Jul 12 16:10:16 2009 +0100

    Add some logging for errors reading/writing the leasefile.

commit 2749a7cdc08d614471699054ee1516432ea14356
Author: Roy Marples <roy@marples.name>
Date:   Sat Jul 11 22:19:42 2009 +0100

    We should remove the leasefile for IPv4LL addresses also on release.

commit 4662e338ce637a2133997f0d62bce53f09ca95d9
Author: Roy Marples <roy@marples.name>
Date:   Sat Jul 11 22:02:41 2009 +0100

    Remove the leasefile on release.

commit 54f25455e6aa4acf12a1222312269c7352e7a125
Author: Roy Marples <roy@marples.name>
Date:   Sat Jul 11 21:00:03 2009 +0100

    Don't run the script with NAK when testing.

commit 5585c246e54802b976943b244e10b9920f487275
Author: Roy Marples <roy@marples.name>
Date:   Sat Jul 11 19:54:43 2009 +0100

    Allow testing of INFORM and REQUEST messages.

commit 25a723b347bfba566ad1084d37096294599706bc
Author: Roy Marples <roy@marples.name>
Date:   Sat Jul 11 16:14:54 2009 +0100

    Don't alter the MTU when testing.

commit fd0e7e3c8e2535089179af01c0e6e830165b171c
Author: Roy Marples <roy@marples.name>
Date:   Sat Jul 11 16:14:31 2009 +0100

    Don't print (null) when there is no NAK message.

commit 3324ecb9286faa519e2ecd5db4082a8bda3c8bd5
Author: Roy Marples <roy@marples.name>
Date:   Sat Jul 11 16:04:13 2009 +0100

    Promote bytes to size_t for sizeof comparison.

commit baa166b1ff46b3e69f883a1d8475bbe2f4b19e3f
Author: David Wu <davidwu@arcturusnetworks.com>
Date:   Sat Jul 11 08:03:23 2009 +0100

    Use ssize_t which is a signed int and test if read() returns -1.

commit c429dab22899b6ea10c700086315debd3ed0d44c
Author: Roy Marples <roy@marples.name>
Date:   Wed Jul 8 23:18:39 2009 +0100

    Release dhcpcd-5.0.6

commit 65578adf82122d03b1cde85e1e96e787a00880ae
Author: Roy Marples <roy@marples.name>
Date:   Wed Jul 8 20:22:31 2009 +0100

    Ensure that DBDIR and RUNDIR exist if defined as /var/db/dhcpcd and/or /var/run/dhcpcd.

commit dc2c160f2d374a0f9d4b24d377026815c83c113b
Author: Roy Marples <roy@marples.name>
Date:   Wed Jul 8 18:05:29 2009 +0100

    Ensure that ntp.conf exists before removing markers.

commit 03b55a6e9371ecfdaf2ffd11bbd87087c936c84b
Author: Tim McIntosh <tmcintos@eskimo.com>
Date:   Wed Jul 8 18:01:38 2009 +0100

    Change get_option_addr to accept struct in_addr * instead of uint32_t *
    to fix an alignment issue on SGI MIPS.

commit 64aa37ca92021264fb234bbe6db17de3d1ba8748
Author: Roy Marples <roy@marples.name>
Date:   Sun Jul 5 12:33:46 2009 +0100

    Add -W, --whitelist addr/cidr
    This only allows packets from the addresses listed and overrides
    blacklist if set.

commit 4de944f4e845711141d75a25ed0ddc666e39cc14
Author: Roy Marples <roy@marples.name>
Date:   Sat Jul 4 01:58:03 2009 +0100

    Silence more GCC warnings about unused return values.

commit 93312e79707fe5023a0440b8bfc7a99e44e56231
Author: Roy Marples <roy@marples.name>
Date:   Sat Jul 4 01:38:55 2009 +0100

    Document nooption

commit f95ed95172e3648a214b74a01cc32ef32b270431
Author: Roy Marples <roy@marples.name>
Date:   Sat Jul 4 01:06:25 2009 +0100

    When we get an ACK we should close DHCP sockets so we don't handle any NAKs
    during ARP testing.
    
    This is important as some broken DHCP servers NAK immediately after an ACK
    in some situations.

commit 88cb44cb15feb447f36a894b65a8e212f795d5d2
Author: Roy Marples <roy@marples.name>
Date:   Sat Jul 4 01:03:01 2009 +0100

    Log the MTU changes.

commit 33b107abc9e6da855a5f15ac13a572d600caf460
Author: Roy Marples <roy@marples.name>
Date:   Sat Jul 4 00:32:30 2009 +0100

    Save the MTU when changing it.
    If we enter a state without a new MTU then restore the old one.

commit 0f4c4e07b36c413e46c1e0663219a8d6ca19d7ce
Author: Roy Marples <roy@marples.name>
Date:   Fri Jul 3 20:13:26 2009 +0100

    Release dhcpcd-5.0.5

commit 29331ecdaa373b25a1284b525cb24da5704d5d3a
Author: Roy Marples <roy@marples.name>
Date:   Fri Jul 3 10:55:16 2009 +0100

    Respect the MTU by default.
    If people have broken DHCP servers, or use an ISP with one they can
    always change the setting.

commit 062c3084da99ff68ee99f940040130be8f301f96
Author: Roy Marples <roy@marples.name>
Date:   Fri Jul 3 10:52:37 2009 +0100

    Fix detecting the dstaddr at startup.

commit eea5d0a527ddf237b740d6d64810ae889c726924
Author: Roy Marples <roy@marples.name>
Date:   Tue Jun 9 20:11:22 2009 +0100

    Style.

commit 001925046fad06b7ceb12e6f5648cbf4c8ebce59
Author: Roy Marples <roy@marples.name>
Date:   Thu May 14 17:19:24 2009 +0100

    Release dhcpcd-5.0.4

commit 01a30aed6552525353796df3cf519cc9c7992022
Author: Roy Marples <roy@marples.name>
Date:   Wed May 13 20:17:21 2009 +0100

    Although RFC2131 requires a ServerID we can actually work without one.
    Some broken servers don't send a ServerID, so make the requirement optional.
    We default to requiring ServerID in dhcpcd.conf though as some other broken
    servers NAK incorrectly without a ServerID.

commit 52b8d9d6ac5cd6227115464fdc68b44e61d95526
Author: Roy Marples <roy@marples.name>
Date:   Wed May 13 19:49:49 2009 +0100

    The smallest MTU we can work with is 576, so don't set less.

commit dbb8572ae222f3fcb5a4cef4e434707fdb8bc59a
Author: Roy Marples <roy@marples.name>
Date:   Wed May 13 19:14:50 2009 +0100

    Enforce a minimum lease of 20 seconds so we can do things
    like ARP check and restart services.

commit 32f0f739d11f25a060efbf8cb6ef62528118debb
Author: Roy Marples <roy@marples.name>
Date:   Mon May 11 08:18:10 2009 +0100

    Release dhcpcd-5.0.3

commit 8b80c97c199f8f95e04c5a601f22a5b54d7452a5
Author: Roy Marples <roy@marples.name>
Date:   Mon May 11 08:16:24 2009 +0100

    ifas without an ifa_addr seem to indicate a link without a hwaddr, so
    treat them as such. This allows static and 3rdparty configuration.

commit 6d26064af43d1c951c9b98fd6a182a35b196c6da
Author: Roy Marples <roy@marples.name>
Date:   Mon May 11 00:31:55 2009 +0100

    I stand corrected - ifa_addr can be NULL from getifaddrs(3)

commit f6c275e9610384bb326db341a221b142d26fc5f6
Author: Roy Marples <roy@marples.name>
Date:   Sun May 10 21:20:18 2009 +0100

    Some glibc versions have a NULL ifa_addr for the ifa from getifaddrs(3).
    Fixes #169.

commit 285bf1ee69d8422c3913a5be3879ab899326e323
Author: Roy Marples <roy@marples.name>
Date:   Sun May 10 17:21:30 2009 +0100

    Release dhcpcd-5.0.2

commit b5975958bfd86d8df2a69786aabb6fa5c885591d
Author: Roy Marples <roy@marples.name>
Date:   Sun May 10 17:20:45 2009 +0100

    Don't forget to remove .gitignore

commit 6f18efb186bbd0181f572676c6869b1b988e7eb7
Author: Roy Marples <roy@marples.name>
Date:   Sun May 10 17:19:46 2009 +0100

    Add a build target to prepare dhcpcd for importing into NetBSD.
    This should make my life a little easier :)

commit a5343fd58826384741cf6d6671ca30786e4bbf70
Author: Roy Marples <roy@marples.name>
Date:   Sun May 10 01:40:13 2009 +0100

    Document new behaviour re lookup-hostname

commit 100d120e377f5f887fb915ba39c1182df375131b
Author: Roy Marples <roy@marples.name>
Date:   Sat May 9 21:55:36 2009 +0100

    Install the lookup-hostname script by default but don't run it by default.

commit c8fb964dfcc26e56257344ffaa1e27e3c4293e30
Author: Roy Marples <roy@marples.name>
Date:   Sat May 9 15:15:31 2009 +0100

    Fix dhcpcd -n $int starting a new instance of dhcpcd if not running.

commit 34623e81a7aea72d6e34a9bc5d7f1542a85625c8
Author: Roy Marples <roy@marples.name>
Date:   Sun May 3 21:05:37 2009 +0100

    Ensure that our dirs exist in the PREINIT stage.
    Recent rc.d init scripts echo to stderr if not set to start, so remove
    warnings.

commit 0c53bd8d091e879fc8d5019e5be1162458542675
Author: Roy Marples <roy@marples.name>
Date:   Sun May 3 13:33:24 2009 +0100

    Some distros need additional headers to compile linux/wireless.h
    Fixes #167

commit 2e7bcc35336eaeac847d6f37efd0d16bc255a55e
Author: Roy Marples <roy@marples.name>
Date:   Sun May 3 07:17:07 2009 +0100

    Release dhcpcd-5.0.1

commit 5767a4ce6f827eb8a356e3906e47be77db93620f
Author: roy <roy@ubersparc.marples.name>
Date:   Sat May 2 17:21:52 2009 +0100

    We need to cast to void * to remove warnings on Sparc64

commit 9a55b4faafd865e491200640133177269c4d91fd
Author: Roy Marples <roy@marples.name>
Date:   Fri May 1 14:57:45 2009 +0100

    Add (c) to Copyright

commit caa009ec23ac9fedcfca21953997ea77e7c4c53d
Author: Roy Marples <roy@marples.name>
Date:   Thu Apr 30 16:30:29 2009 +0100

    Go back to using git

commit adc501157764880175d256df246407039876bf7a
Author: Roy Marples <roy@marples.name>
Date:   Tue Apr 28 20:57:12 2009 +0000

    Release dhcpcd-5.0.0

commit 0b7657a5a539037f91b2830fe7009e1d89b26a48
Author: Roy Marples <roy@marples.name>
Date:   Mon Apr 27 14:00:39 2009 +0000

    Fix existing address detection.

commit 46861dcaa75768858927821d51a0b328a18cab01
Author: Roy Marples <roy@marples.name>
Date:   Fri Apr 24 16:51:00 2009 +0000

    Typo

commit 4e4a5622bdb59db3b1b7a93de60408dba1ddf395
Author: Roy Marples <roy@marples.name>
Date:   Fri Apr 24 16:48:35 2009 +0000

    dhcpcd -V now shows all variables we set, even without an option.

commit 5962f6f9a02e38c619dc714b913c1bce176232cd
Author: Roy Marples <roy@marples.name>
Date:   Fri Apr 24 08:33:48 2009 +0000

    Remove .depend before creating it.

commit bbd73ed4f87c28311c3de896b58e68daece5f893
Author: Roy Marples <roy@marples.name>
Date:   Mon Apr 20 19:40:09 2009 +0000

    Only allow lo0 through allow

commit 174e8113953ea538fa9b2b0bf7e79fda5c8a5bd6
Author: Roy Marples <roy@marples.name>
Date:   Mon Apr 20 13:47:27 2009 +0000

    No need for this.

commit e5f6c5b2e6019cdb5b9f0d9cd909148e0a0dfbce
Author: Roy Marples <roy@marples.name>
Date:   Mon Apr 20 12:34:08 2009 +0000

    Fix quoting

commit 8557be98662d03498ed08df72996d011ed075c5c
Author: Roy Marples <roy@marples.name>
Date:   Mon Apr 20 10:08:12 2009 +0000

    No need to quote here.

commit d9b24476c364d9f3960f095b57b9b3d9ddc3f929
Author: Roy Marples <roy@marples.name>
Date:   Mon Apr 20 10:02:17 2009 +0000

    Revert iforder -> interface_order

commit 404de529e3865da91db6c14a0a1819146380118f
Author: Roy Marples <roy@marples.name>
Date:   Mon Apr 20 09:38:08 2009 +0000

    Remove old NetworkManager script - it's useless these days.
    Remove gratuitous usage of {} in variables.

commit e326f5bec82106c6d0a222202c5cb7ab650b4085
Author: Roy Marples <roy@marples.name>
Date:   Mon Apr 20 09:37:11 2009 +0000

    Prefix interface vars with if so we don't stamp on generic names like 'flags'.

commit 4059e87403fece26190ccee8739f1bb1e8f9d003
Author: Roy Marples <roy@marples.name>
Date:   Sun Apr 19 19:43:10 2009 +0000

    Release .18

commit 6218ec4b39abc03268df69a8da1545706394677e
Author: Roy Marples <roy@marples.name>
Date:   Sun Apr 19 19:40:13 2009 +0000

    Blank memory correctly so we pickup address and route addition/deletion better.

commit 4a3b7b88674ef8c26eccd75c860bab1b5eed1427
Author: Roy Marples <roy@marples.name>
Date:   Sun Apr 19 18:23:47 2009 +0000

    Release dhcpcd-4.99.17

commit 64a9e11a59b85c7ee1fb4908b90163443738c039
Author: Roy Marples <roy@marples.name>
Date:   Sat Apr 18 21:43:23 2009 +0000

    Add an option to fallback to a profile when DHCP fails.

commit 0c86c8d8411890c7293cc8893ce3d7fb169fad22
Author: Roy Marples <roy@marples.name>
Date:   Fri Apr 17 19:15:42 2009 +0000

    NetBSD-5.0RC4 has a kernel error causing an AF_LINK to be reported twice. A patch has been submitted, hopefully included in NetBSD-5.0

commit 125e8e01876b7f80b2d5f1531a476074b0cc30f8
Author: Roy Marples <roy@marples.name>
Date:   Fri Apr 17 13:42:44 2009 +0000

    Fix compile on FreeBSD.

commit 8cd35a823f53a27fdb02f55bec1b8738ad7d3f73
Author: Roy Marples <roy@marples.name>
Date:   Fri Apr 17 13:31:41 2009 +0000

    Fix compile on NetBSD

commit fa9229c5708273d5f82e9b1e005fc34776987de6
Author: Roy Marples <roy@marples.name>
Date:   Fri Apr 17 13:31:08 2009 +0000

    We need to move allow/deny back to options

commit 9c892710c629ad7158ad0ea3dab9f41f02e2bbd6
Author: Roy Marples <roy@marples.name>
Date:   Fri Apr 17 12:49:25 2009 +0000

    discover_interfaces now uses getifaddrs instead of OS specific implementation.
    do_interface then becomes do_address and also uses getifaddrs.
    
    Binary size is a little smaller, code size is now a lot smaller.

commit 5579cf8d175760b202e87356a7713b515b1e075b
Author: Roy Marples <roy@marples.name>
Date:   Wed Apr 15 09:15:53 2009 +0000

    Some option only make sense in the configuration file, so remove short
    options for them for future reuse.

commit 58db4d56e547b627dd71fddd1b64a3cb69675fc2
Author: Roy Marples <roy@marples.name>
Date:   Wed Apr 15 09:01:02 2009 +0000

    Fix crash at end of arping list

commit 86f01f891b28b201e988779c6b64538ea5e93379
Author: Roy Marples <roy@marples.name>
Date:   Sun Apr 12 19:16:57 2009 +0000

    We should ignore DHCP messages without a ServerID, #166.

commit 1a38a4eed111e1b7f49f1a2f9a4b63e94b06e579
Author: Roy Marples <roy@marples.name>
Date:   Thu Apr 2 09:32:54 2009 +0000

    Release dhcpcd-4.99.16

commit 9bfee7e3091ffeab3c8a4a3ea8c741988cff1b3c
Author: Roy Marples <roy@marples.name>
Date:   Tue Mar 31 11:01:25 2009 +0000

    We need a bit more space for the profile name.

commit f94a5efc1c7366dad258414cf0d795755e1c74a6
Author: Roy Marples <roy@marples.name>
Date:   Tue Mar 31 08:35:38 2009 +0000

    Add the ability to arping an address and select a profile based on the
    hardware address replied with or the ip address.

commit cacfe1a108b72187fa41f8c8ef99d30f909f2315
Author: Roy Marples <roy@marples.name>
Date:   Mon Mar 23 22:02:37 2009 +0000

    Improve PTP INFORM support some more.

commit ae9732409b656447858ea9727a783f9e198fc47f
Author: Roy Marples <roy@marples.name>
Date:   Mon Mar 23 20:10:02 2009 +0000

    Default point to point interfaces to static if not inform.
    Only accept inform replies from our destination address.

commit dd7ce7560b200d53fbb23955532b1426948da4f3
Author: Roy Marples <roy@marples.name>
Date:   Mon Mar 23 14:05:51 2009 +0000

    If we define a static address, we are not informing and vice versa.

commit 3eecb5853c8994832dcf230f8a578390b4d8cebd
Author: Roy Marples <roy@marples.name>
Date:   Mon Mar 23 12:56:33 2009 +0000

    Export interface flags.

commit 6191a2f47d497b78065500f05fc3f31232110f1f
Author: Roy Marples <roy@marples.name>
Date:   Mon Mar 23 11:15:35 2009 +0000

    Fail the interface when we need a clientid.

commit e604a9fd3f38dc0ad1dac6041a6e7e9fc1cd0f01
Author: Roy Marples <roy@marples.name>
Date:   Mon Mar 23 10:09:10 2009 +0000

    dhcpcd CAN work on IEEE FireWire interfaces.
    However, BPF does not appear to operate on these, so we report the error
    and continue.
    When BPF supports FireWire for DHCP, dhcpcd will magically start to work.

commit 3c86123ae780e295612af14542a8a833fc045c67
Author: Roy Marples <roy@marples.name>
Date:   Mon Mar 23 07:43:31 2009 +0000

    We should not work with lo by default.

commit bc913ac08805ac1ee35208956e47963ce7cfc861
Author: Roy Marples <roy@marples.name>
Date:   Fri Mar 20 15:37:19 2009 +0000

    Release dhcpcd-4.99.15

commit 4ef5e230b7e9b740aa86157b93e27d611af851d1
Author: Roy Marples <roy@marples.name>
Date:   Fri Mar 20 15:33:31 2009 +0000

    Clarify reconfigure regarding the configuration file.

commit a3e5882beb2a8ac3454b603c39b631a2bb118af2
Author: Roy Marples <roy@marples.name>
Date:   Fri Mar 20 15:26:46 2009 +0000

    Allow dhcpcd to run on loopback interfaces if specified.

commit ff62dac26841bb687a0d5411fbab8af7d9b61740
Author: Roy Marples <roy@marples.name>
Date:   Fri Mar 20 10:33:09 2009 +0000

    We should handle SIGUSR1 correctly.

commit f50261488ff48b1cf13d2b48c250648613ec8049
Author: Roy Marples <roy@marples.name>
Date:   Fri Mar 20 10:21:12 2009 +0000

    Add an option to reconfigure dhcpcd without rebinding.
    This is primarily for interaction with 3rd party link management, such as PPP.
    More work on #159.

commit 20205a4762d9be43e69a69bfe788fdbc4f979e7b
Author: Roy Marples <roy@marples.name>
Date:   Thu Mar 19 22:45:57 2009 +0000

    Move dhcpf.h into dhcp.h were it belongs

commit 30aeeb9184293aedbcd0e1e0e4ce9e7aeed32100
Author: Roy Marples <roy@marples.name>
Date:   Thu Mar 19 22:27:13 2009 +0000

    Linux can now detect address addition and removal too.

commit ddaf0258a343cf9d7be0b78231b9bd4195e17d22
Author: Roy Marples <roy@marples.name>
Date:   Thu Mar 19 19:17:34 2009 +0000

    Fix compile on Linux.

commit cd114b96daf2b363a27c366a8eb143022c0945ec
Author: Roy Marples <roy@marples.name>
Date:   Thu Mar 19 17:52:12 2009 +0000

    We can now detected primary addresses added or changed in BSD.
    As such, we can wait for a 3RDPARTY to configure the interface, such as PPP.
    We can then take the destination addess and automatically give it a default
    route or any other DHCP option such as DNS servers.
    This addresses #159.

commit 3831768ff87e6756ec1ad718ef5f54795a6cdeb5
Author: Roy Marples <roy@marples.name>
Date:   Wed Mar 18 21:16:33 2009 +0000

    Fix compile on DragonFly.
    Thanks to Hasso Tepper.

commit e905c89897f52d583fc54a49f2ba8f0c80a2d2e6
Author: Roy Marples <roy@marples.name>
Date:   Wed Mar 11 17:57:10 2009 +0000

    mandoc mandates the presence of .Os

commit 3737d9f84934303732bdc77afce207b5d0d233b3
Author: Roy Marples <roy@marples.name>
Date:   Wed Mar 11 11:53:11 2009 +0000

    We shouldn't need to flush arp entires ourself on BSD platforms.

commit 42ddd743c1484f40ae8276239d519966ff989058
Author: Roy Marples <roy@marples.name>
Date:   Tue Mar 10 17:28:18 2009 +0000

    We need to blacklist IP addresses at the packet level
    so we can ignore NAKs from rogue servers who don't
    supply a ServerID, or supply a fake one.
    Fixes #165.
    
    --This lin, and those below, will be ignored--
    
    M    trunk/dhcpcd.conf.5.in
    M    trunk/arp.c
    M    trunk/dhcpcd.8.in
    M    trunk/dhcpcd.c
    M    trunk/net.c
    M    trunk/if-options.c
    M    trunk/net.h

commit 80155c36a79959241409bfe62d669d05ce7b858e
Author: Roy Marples <roy@marples.name>
Date:   Thu Mar 5 23:13:01 2009 +0000

    Release dhcpcd-4.99.14

commit 5b514e2119a011a70416eb9ba951ec205e59f2c6
Author: Roy Marples <roy@marples.name>
Date:   Thu Mar 5 16:35:03 2009 +0000

    Improve INFORM and STATIC support.
    It's now possible to flip between DHCP, INFORM and STATIC on already
    running instances.

commit 6fc228ea79d38c22920e47fc2f0ae0075443bc0d
Author: Roy Marples <roy@marples.name>
Date:   Thu Mar 5 16:31:44 2009 +0000

    0 is not a valid CIDR

commit 26519b8c17c0ea8007eb323efa1eee23c070d986
Author: Roy Marples <roy@marples.name>
Date:   Thu Mar 5 16:31:05 2009 +0000

    Don't add subnet routes to INADDR_ANY or those without a gateway.

commit 381c755a5ccb16df75748836313c1ce488316038
Author: Roy Marples <roy@marples.name>
Date:   Tue Mar 3 23:41:53 2009 +0000

    If we reboot an IPv4LL address, start DHCP negotiation right away.

commit 1569b225bd54f31abf085445f1c0fac83922db88
Author: Roy Marples <roy@marples.name>
Date:   Mon Mar 2 23:24:34 2009 +0000

    Set the interval to 0 when carrier comes up.

commit cdcf23b212ce1b71ae0c0806b0440b27dc9ec325
Author: Roy Marples <roy@marples.name>
Date:   Sat Feb 28 08:59:48 2009 +0000

    Validate UDP better by ensuring data len is not bigger than our struct
    and that the claimed length by the header is not greater than our length.
    Thanks to Michael Olney.

commit efc0e252ad92506f9601f80e88b32cd8dc55b4bb
Author: Roy Marples <roy@marples.name>
Date:   Fri Feb 27 21:18:01 2009 +0000

    Blacklist now accepts networks as well as addresses.
    It also matches on the address offered as well as the server address.
    Fixes #164.

commit e0dd8b7e4a3011200972a9103d84081aca91843f
Author: Roy Marples <roy@marples.name>
Date:   Thu Feb 26 19:31:41 2009 +0000

    Use state dir for tmp files and try to preserve orig file more.

commit f68268b72b6372fd3c0ba2be78cbecbe8ceab98c
Author: Roy Marples <roy@marples.name>
Date:   Thu Feb 26 16:16:57 2009 +0000

    Typo

commit 81174c4b969cea7e4a869f8fcb0f658fe481a09a
Author: Roy Marples <roy@marples.name>
Date:   Thu Feb 26 11:12:23 2009 +0000

    Remove compile warnings on Sparc64

commit fd77df4b7063b3498890bdf4ed84e8b364b2dec4
Author: Roy Marples <roy@marples.name>
Date:   Wed Feb 25 14:59:27 2009 +0000

    Stop enforcing a umask in dhcpcd.
    Instead we will ensure that /etc/resolv.conf is 644.
    Other config files will retain their existing umask or inherit the current one.

commit 7dcb2e0b722483db09552c6951b695efd87c058e
Author: Roy Marples <roy@marples.name>
Date:   Wed Feb 25 07:52:47 2009 +0000

    Gah, remove some debug

commit e59105abf07540504b49d54ffbb547b907cc0e44
Author: Roy Marples <roy@marples.name>
Date:   Wed Feb 25 07:52:07 2009 +0000

    Don't timeout if we're daemonised.

commit cd93080d6c02ea3cdb01cf72a4e660d515beb701
Author: Roy Marples <roy@marples.name>
Date:   Wed Feb 25 07:51:25 2009 +0000

    Optimize allocation a little.

commit 07911de972826057fe4f29756be81b985bfe17e8
Author: Roy Marples <roy@marples.name>
Date:   Tue Feb 24 19:17:19 2009 +0000

    Why bother with a one off array when we can use our eloop?

commit 379a2b4ba6524bfd3a572bd66e3641ad67f95d8f
Author: Roy Marples <roy@marples.name>
Date:   Tue Feb 24 15:41:15 2009 +0000

    Close sockets better and just run the script when we're not touching the interface.

commit ced943949dce5ce1434821484f0638d7edf8e731
Author: Roy Marples <roy@marples.name>
Date:   Tue Feb 24 15:39:02 2009 +0000

    Remove debug.

commit 3ec40a384b1c27d9aa008de0ebedb36b33b4442e
Author: Roy Marples <roy@marples.name>
Date:   Tue Feb 24 13:26:28 2009 +0000

    Fix starting all ifaces.

commit 82ba93a1de061e9eb577907cf102628a45de51e8
Author: Roy Marples <roy@marples.name>
Date:   Tue Feb 24 12:38:02 2009 +0000

    Finally fix compile on vanilla kernel headers.
    This is done by moving the wireless calls to a separate file that
    just includes linux/wireless.h.
    This is needed because linux/wireless.h includes linux/if.h which may
    or may not have been fixed to co-exist with net/if.h.
    Maybe one day this won't be needed ....

commit acb1cf88cf6a35c5156908349c31de634f107141
Author: Roy Marples <roy@marples.name>
Date:   Mon Feb 23 23:52:21 2009 +0000

    Fix debug working in dhcpcd.conf

commit ab40c070d66713655a4d3e8839819ebab89e8529
Author: Roy Marples <roy@marples.name>
Date:   Mon Feb 23 19:20:14 2009 +0000

    We need to include linux/wireless.h as wireless.h belongs to wireless-tools

commit d1dde3c8b44469a6d4370a41d30ea1de014d678f
Author: Roy Marples <roy@marples.name>
Date:   Mon Feb 23 13:40:24 2009 +0000

    Try a new tactic to compile with old broken linux kernel headers.

commit cf6757c4d5365c4271b5332ee496e3d0a29719cb
Author: Roy Marples <roy@marples.name>
Date:   Fri Feb 20 08:33:03 2009 +0000

    If we fail to send a packet we should still continue our code path.
    Existing failure timers should change it if needed.

commit 62b44b40217d4e6b7e8b2b555b1e284713de2dd0
Author: Roy Marples <roy@marples.name>
Date:   Fri Feb 20 07:29:13 2009 +0000

    We should expire instead of stop as we will start again.

commit 8e96267bac58a9d37c5a7cb0ebbf7ad0e120db34
Author: Roy Marples <roy@marples.name>
Date:   Thu Feb 19 21:15:25 2009 +0000

    If we fail to send a packet start over.
    We should have our own array of interfaces to start, as
    interface order could change or be removed during start_interface.

commit 2d775a6758c247e2ab22e8c7f9252e818217736e
Author: Roy Marples <roy@marples.name>
Date:   Wed Feb 18 08:07:10 2009 +0000

    Only auto background with no interfaces.

commit c9fc4ec4b90fb8a029a16ccc934368b68c2a51c3
Author: Roy Marples <roy@marples.name>
Date:   Tue Feb 17 23:02:09 2009 +0000

    If running as a controlling daemon with link management, background earlier.

commit 3c3f38c09021f2b82a3823f35edd2d4cb2d1fb7e
Author: Roy Marples <roy@marples.name>
Date:   Fri Feb 13 15:39:34 2009 +0000

    Allow socket to report location of the configuration file.

commit 35456091989ef70c3b5285d2c27867bc578639f3
Author: Roy Marples <roy@marples.name>
Date:   Thu Feb 12 10:07:30 2009 +0000

    Fix up some more formatting.

commit 40dbcc878593552d31ecc4a1fcdf2f4672fd736b
Author: Roy Marples <roy@marples.name>
Date:   Thu Feb 12 01:09:37 2009 +0000

    More style updates.

commit eab2229cfa459ccbf8178ad4cdba68fbb7ebaf46
Author: Roy Marples <roy@marples.name>
Date:   Wed Feb 11 17:56:22 2009 +0000

    Enforce NetBSD KNF style more

commit 63170def69524476fd43495ab1767b8690c0e9b5
Author: Roy Marples <roy@marples.name>
Date:   Thu Feb 5 21:06:57 2009 +0000

    Log our control commands.

commit 73454ab163177c8684631ea234b24ee2782a6fb9
Author: Roy Marples <roy@marples.name>
Date:   Thu Feb 5 21:06:43 2009 +0000

    Ensure the buffer is NULL terminated.

commit 760f7628bceabdeb77e0485c111a6fb330864179
Author: Roy Marples <roy@marples.name>
Date:   Thu Feb 5 01:58:17 2009 +0000

    Use Aq properly.

commit f30ca7cacc465a491aebafad3337cdffc87bd3ef
Author: Roy Marples <roy@marples.name>
Date:   Wed Feb 4 20:54:55 2009 +0000

    Release dhcpcd-4.99.13

commit f0b019342fd8129274f8cd9c882cfd1572d81da4
Author: Roy Marples <roy@marples.name>
Date:   Sun Feb 1 20:22:08 2009 +0000

    IPV4LL addresses are not BOOTP.

commit c2189713b5853ae9b4f51d774cb8f8c5ef790efd
Author: Roy Marples <roy@marples.name>
Date:   Sun Feb 1 17:13:19 2009 +0000

    RFC2131 implies that we should only ARP check after an offer.

commit de82635c0435bf5b36f3e45f72138f543cd2e908
Author: Roy Marples <roy@marples.name>
Date:   Fri Jan 30 20:18:35 2009 +0000

    We should zero the entire message struct so any options don't overflow into unallocated memory when evaluating them.

commit 41f9654ae9882838c96ba86cb567c3892fa7702a
Author: Roy Marples <roy@marples.name>
Date:   Thu Jan 29 13:56:43 2009 +0000

    Copyright

commit 4ac6a5d2f9b7955e9316cd85a9717132354f4423
Author: Roy Marples <roy@marples.name>
Date:   Thu Jan 29 13:56:23 2009 +0000

    Just terminate the DHCP message if not terminated. DHO_PAD could be valid data.

commit 141c80922499959330d53f41f5f5a54e39bdb40c
Author: Roy Marples <roy@marples.name>
Date:   Thu Jan 29 13:18:57 2009 +0000

    Shorten error msg.

commit f22fb9b1c1232dd0385a00d7eb8ad0dbc172dc07
Author: Roy Marples <roy@marples.name>
Date:   Thu Jan 29 13:01:29 2009 +0000

    Clean up compiler warnings from overly pedantic checking.

commit ed913a59775402a9ce66067858d7280fe4506176
Author: Roy Marples <roy@marples.name>
Date:   Thu Jan 29 11:21:16 2009 +0000

    dhcpcd should not send hostname by default.
    However, the default config file we ship enables the sending of the hostname
    by default.
    This makes things more explicit I think, and also allows the FQDN to be sent
    but not the hostname if someone ever needs this.

commit f2151f9eafc673071c14667f0f334c3288f74a65
Author: Roy Marples <roy@marples.name>
Date:   Wed Jan 28 10:29:00 2009 +0000

    We updated these files this year.

commit 2c8b08062726e5bc09c61923118c8b111b82a2f0
Author: Roy Marples <roy@marples.name>
Date:   Tue Jan 27 20:57:27 2009 +0000

    We should state which interface we're removing the route from correctly.

commit 146d8134bdcbb0d21b51f0da2d1b5a7ce30dbf07
Author: Roy Marples <roy@marples.name>
Date:   Tue Jan 27 19:40:05 2009 +0000

    Fix compile on BSD.

commit fa344ba2b1dcf002f348b7fa69ef422585b4b438
Author: Roy Marples <roy@marples.name>
Date:   Tue Jan 27 18:09:02 2009 +0000

    Add route removal detection to Linux.
    This involved a rejig of the socket code so we can detect
    if we removed the route or not.

commit 16687a3be1f8c1e6d55cdd691e947e5760eef30c
Author: Roy Marples <roy@marples.name>
Date:   Mon Jan 26 22:32:42 2009 +0000

    We need to ensure that manual route deletions are deleted from our internal routing table also. Partial fix for #159.

commit 495c0a77ac4caba2360004b64a1f563d682ac7ee
Author: Roy Marples <roy@marples.name>
Date:   Mon Jan 26 15:15:28 2009 +0000

    We should include sys/uio.h for writev

commit 41c1ef2d73088c6dbec312d65122672c4a27484f
Author: Roy Marples <roy@marples.name>
Date:   Mon Jan 26 13:14:31 2009 +0000

    Release 4.99.12

commit 39f5c665ce0054f2cb7dc93c2f62fbbec7f286bf
Author: Roy Marples <roy@marples.name>
Date:   Mon Jan 26 12:56:38 2009 +0000

    while -> for

commit cb69faa64089c86fa4d3bb8872d5d319b20ccc69
Author: Roy Marples <roy@marples.name>
Date:   Mon Jan 26 12:49:12 2009 +0000

    Optimize code around NULL terminated hostname.

commit ee07bdd8336cdd2e23b18ff865e481f03964ec0b
Author: Roy Marples <roy@marples.name>
Date:   Mon Jan 26 12:47:38 2009 +0000

    Terminate hostname

commit 7cce80be02b7ea61ff639c2a31cf07609a7fd3a4
Author: Roy Marples <roy@marples.name>
Date:   Mon Jan 26 12:23:57 2009 +0000

    Stop storing length in hostname.

commit 9d9af32de8a952e1dd93f38206acea8fb18f48c8
Author: Roy Marples <roy@marples.name>
Date:   Mon Jan 26 12:00:01 2009 +0000

    We should only send short hostnames as qualfied ones confuse ISC DHCP server. If a FQDN is required, then use that option instead of the hostname.

commit 4fb0c27c39d95db8fd8d4da3a3fb552d79f20613
Author: Roy Marples <roy@marples.name>
Date:   Mon Jan 26 09:11:38 2009 +0000

    Ensure that we have enough buffer for gethostname and terminate it correctly.

commit c735a7323a86d426d529573598ccce3859484cbf
Author: Roy Marples <roy@marples.name>
Date:   Fri Jan 23 23:36:18 2009 +0000

    Fix compile with crappy linux headers.

commit 1bd34f2a9e6a9e6ca91a1e5b616e8760540ed517
Author: Roy Marples <roy@marples.name>
Date:   Fri Jan 23 01:31:00 2009 +0000

    Release 4.99.11

commit 8d471ac1252ff412c6d1be368c41023b141c3ff0
Author: Roy Marples <roy@marples.name>
Date:   Fri Jan 23 01:20:02 2009 +0000

    Fix a valgrid issue and don't call getifssid unless we are wireless.

commit 9a9fb7886736407015f66c9d70334a72538786c2
Author: Roy Marples <roy@marples.name>
Date:   Fri Jan 23 01:19:25 2009 +0000

    Report ssid for carrier events correctly.

commit 0ec8bcb3b9803ecac050ac5e2a29f283531d8774
Author: Roy Marples <roy@marples.name>
Date:   Thu Jan 22 23:53:15 2009 +0000

    nohook 20-resolv.conf should work now.

commit 88a69342c855c381e9167fbda973b0b6cbf7e996
Author: Roy Marples <roy@marples.name>
Date:   Thu Jan 22 23:52:20 2009 +0000

    ssid should be old_ and new_.

commit bf91047e8fabb1fd4d9a756b1d95ab0cb96773a5
Author: Roy Marples <roy@marples.name>
Date:   Thu Jan 22 22:52:41 2009 +0000

    Report the fact we're wireless and our ssid

commit 596f836904f3d971768aa4fb0b468282bc276c24
Author: Roy Marples <roy@marples.name>
Date:   Thu Jan 22 14:21:55 2009 +0000

    Release 4.99.10

commit 40bc2d7f23e235b30dc00524eebfc033fce2fc0b
Author: Roy Marples <roy@marples.name>
Date:   Thu Jan 22 14:16:29 2009 +0000

    The lack of a rebind time should not force a default renewal time, #156.

commit 8b4278839695499ca1cd2b761ae65feed8b5b9de
Author: Roy Marples <roy@marples.name>
Date:   Tue Jan 20 16:33:11 2009 +0000

    Handle stopping and releasing a little better.

commit b2fad69f5e9371d4e1811e194092e1c239e1c8ba
Author: Roy Marples <roy@marples.name>
Date:   Tue Jan 20 16:32:42 2009 +0000

    We need to handle SIGPIPE so we don't abort.

commit d600f7076c1acdb0e9c7df6525590bc9921b109b
Author: Roy Marples <roy@marples.name>
Date:   Tue Jan 20 16:02:46 2009 +0000

    Ensure we have a state when comparing

commit 882d97c856abe553fdc752457006ee85798adae1
Author: Roy Marples <roy@marples.name>
Date:   Mon Jan 19 16:17:18 2009 +0000

    When dropping config, we should punt the old config so we don't drop it twice.

commit a96641760ba48f58f11e58a12b43e4b3c8562159
Author: Roy Marples <roy@marples.name>
Date:   Sat Jan 17 02:47:26 2009 +0000

    Release 4.99.8

commit c008cfb190b89a7b2064ec6e81063744eb22693f
Author: Roy Marples <roy@marples.name>
Date:   Sat Jan 17 00:43:08 2009 +0000

    Test length, not null.

commit 97d81cf599ffbb8747377f8b3f15986171ad4f87
Author: Roy Marples <roy@marples.name>
Date:   Thu Jan 15 15:11:30 2009 +0000

    Style.

commit 94484b56247d288ae528f3640ff0d7bf69ba3e6b
Author: Roy Marples <roy@marples.name>
Date:   Thu Jan 15 15:11:13 2009 +0000

    We should use close here.

commit ad22dab30ac6653b27b9971100ace375bb067d84
Author: Roy Marples <roy@marples.name>
Date:   Thu Jan 15 14:50:19 2009 +0000

    We should shutdown instead of close our sockets to inform clients they have gone.

commit 5313b78124f566b486748ca071189aba2717d3d4
Author: Roy Marples <roy@marples.name>
Date:   Thu Jan 15 14:22:40 2009 +0000

    --getinterfaces should be more than sufficient for the control socket.

commit 3d775d8c76dc953b23371865b65e0d9fce20c906
Author: Roy Marples <roy@marples.name>
Date:   Thu Jan 15 13:31:46 2009 +0000

    We should use the reason CARRIER as well and run carrier notifications after PREINIT.

commit 7e5de9cca6b435911e202f8004ecdcf323e16bab
Author: Roy Marples <roy@marples.name>
Date:   Thu Jan 15 10:12:06 2009 +0000

    We need to send the terminator also.

commit 6e0a88da1c424e2f521a000ffccf747767c41916
Author: Roy Marples <roy@marples.name>
Date:   Thu Jan 15 09:58:21 2009 +0000

    We need to close our listeners before removing the socket so clients close down properly.

commit b66d49d3863e7ef38648ed59789bf0343a2a4798
Author: Roy Marples <roy@marples.name>
Date:   Thu Jan 15 09:30:11 2009 +0000

    New configure reasons NOCARRIER and NAK instead of just sending EXPIRE.

commit bd487e6c771dac18b2a2b8b62c5127b09f57b002
Author: Roy Marples <roy@marples.name>
Date:   Tue Jan 13 18:03:12 2009 +0000

    Send version length first on the control socket.

commit f6ec8e1146094000d1418246be2a1576b57b99f9
Author: Roy Marples <roy@marples.name>
Date:   Tue Jan 13 17:36:11 2009 +0000

    Remove .svn dirs from snapshots.

commit 2dbde5c4282a7876c3b14de12fcd9688a5e2aa87
Author: Roy Marples <roy@marples.name>
Date:   Tue Jan 13 17:05:13 2009 +0000

    Copyright.

commit 1ba422363a3e1bbee4bbbee720dfeadfb7d82ee1
Author: Roy Marples <roy@marples.name>
Date:   Tue Jan 13 17:04:28 2009 +0000

    Store the reason we run the script against the interface state.
    This enables us to query states via the control socket.

commit e467f4b21724ad4c3c9f7a3ee9af91c4385a8a88
Author: Roy Marples <roy@marples.name>
Date:   Mon Jan 12 16:39:01 2009 +0000

    Remove the limit for the number of connections to the control socket.
    Send the dhcpcd-run-hooks enviornment to listeners on the control socket.

commit e0c05611c032b8a1e75a11aa8bdbfecf34acf785
Author: Roy Marples <roy@marples.name>
Date:   Mon Jan 12 16:35:58 2009 +0000

    whitespace

commit 7816f16c9f29e3f51d0308938dc1e78052c067e9
Author: Roy Marples <roy@marples.name>
Date:   Mon Jan 12 16:31:13 2009 +0000

    Copyright

commit 6de60e015be02e88d822e9eea20f733212652153
Author: Roy Marples <roy@marples.name>
Date:   Mon Jan 12 16:30:26 2009 +0000

    set broadcast_address correctly.

commit fc7ee2311271864cf9154e8db6812a9048687acb
Author: Roy Marples <roy@marples.name>
Date:   Mon Jan 5 15:52:08 2009 +0000

    Improve the nohook documentation.

commit c34797620425d65bd74397943924417e3bd97767
Author: Roy Marples <roy@marples.name>
Date:   Mon Jan 5 15:50:14 2009 +0000

    Spelling

commit f367dc38be67d6e165780f91bf554faf1030443f
Author: Roy Marples <roy@marples.name>
Date:   Mon Jan 5 08:20:53 2009 +0000

    Allow version to be returned over the control interface.

commit fcdf05ed936deaa48c030bc2cc318e9bc8f342e1
Author: Roy Marples <roy@marples.name>
Date:   Fri Jan 2 09:31:42 2009 +0000

    Adding subnet routes with just sdl_index set does not work for FreeBSD.

commit 63a4a61b1d79f62a416c358db2d2c96cd2d4f6ce
Author: Roy Marples <roy@marples.name>
Date:   Thu Jan 1 21:31:49 2009 +0000

    Fix getting ssid.

commit c53cf4ef4b332cd1ff0cb1b0dc23fc193aebb892
Author: Roy Marples <roy@marples.name>
Date:   Thu Jan 1 20:51:04 2009 +0000

    You can now add a configure block per ssid if the interface is wireless.

commit 91a44b91b06f127a98ae7f64e377e59d47eba329
Author: Roy Marples <roy@marples.name>
Date:   Thu Jan 1 14:23:36 2009 +0000

    Add a static directive that allows the configuration of variables, which
    supercedes any DHCP configured variables.
    If ip_address is configured then we don't bother with a DHCP
    transaction.

commit 32dd1d3c3e47045db22ea6b0f65ff0b82a21a153
Author: Roy Marples <roy@marples.name>
Date:   Sun Dec 21 20:53:07 2008 +0000

    Document the BSD subnet manipulation issue in the README and not the man page.

commit 62ea37d68e6dac696d83fe69f091517680ed07ea
Author: Roy Marples <roy@marples.name>
Date:   Fri Dec 19 12:52:38 2008 +0000

    Release 4.99.7

commit ac372a6d17d8b2911185b13ef62b038c359fde29
Author: Roy Marples <roy@marples.name>
Date:   Thu Dec 18 12:14:09 2008 +0000

    Document the BSD issue with dhcpcd changing the subnet route.

commit 5f14fcaa61142ae7c5314af12a829479ecf99ea2
Author: Roy Marples <roy@marples.name>
Date:   Thu Dec 18 10:25:52 2008 +0000

    send_request is no longer a public interface.

commit 8e06ab4a536e79752d8b6fa02910ccea4da0c8cd
Author: Roy Marples <roy@marples.name>
Date:   Thu Dec 18 10:23:40 2008 +0000

    Add the DHS_PROBE state so that we ignore subsequent offers
    whilst probing.

commit 02d339e3a6ecaf7869b4aa9bce5dce6a0ec44979
Author: Roy Marples <roy@marples.name>
Date:   Tue Dec 16 17:52:12 2008 +0000

    Document avoiding BOOTP servers.

commit 63bce4d48e5f0e3ad04ff79d402c74aea6bdd88f
Author: Roy Marples <roy@marples.name>
Date:   Tue Dec 16 16:31:38 2008 +0000

    Typo.

commit 2276d96c27a1a454f7871b2d172fb9b3a38128c1
Author: Roy Marples <roy@marples.name>
Date:   Tue Dec 16 16:30:59 2008 +0000

    Style.

commit 83b738f21f027d549e7501ec2f8426529471f134
Author: Roy Marples <roy@marples.name>
Date:   Tue Dec 16 13:35:05 2008 +0000

    Plug a leak.

commit 9c30ffcfd671fd822c970d2d5c3d6de7442aa9c1
Author: Roy Marples <roy@marples.name>
Date:   Tue Dec 16 13:28:42 2008 +0000

    Re work the route management so we deal with a changed route table in a renewal/rebind correctly.

commit e346dd7ccc9fff2c6d5e3e187601cb9eac696b21
Author: Roy Marples <roy@marples.name>
Date:   Sat Dec 13 09:40:27 2008 +0000

    Try and make the subnet route identical to the kernel one.

commit f19b6499fad7f2c846bc9ad39858e5505b86d963
Author: Roy Marples <roy@marples.name>
Date:   Sun Dec 7 17:29:53 2008 +0000

    Document the quiet directive in man dhcpcd.conf

commit 5aad14ecbded55053aa3f5d2bc7b8824f4358c93
Author: Roy Marples <roy@marples.name>
Date:   Tue Dec 2 14:54:46 2008 +0000

    Default route is more descriptive.

commit 9928a3bb971477489897a50aa8ccde5a5b11c7f4
Author: Roy Marples <roy@marples.name>
Date:   Tue Dec 2 14:18:37 2008 +0000

    Save a malloc

commit 38d187ed862825023856489bab14fbe8d6ff523a
Author: Roy Marples <roy@marples.name>
Date:   Tue Dec 2 00:24:25 2008 +0000

    Ensure we de-reference the old pointer from the open routes correctly when building lists.

commit a4d0de41b3f6a586160d74cb939198ff39cfc919
Author: Roy Marples <roy@marples.name>
Date:   Mon Dec 1 20:18:02 2008 +0000

    Don't delete static ARP entries

commit 399b1c0151599447d29079cec146dd25fd9b78fa
Author: Roy Marples <roy@marples.name>
Date:   Mon Dec 1 18:03:20 2008 +0000

    Save a few more bytes.

commit a6fc352dde01b3733bad6758473f6f44a3244883
Author: Roy Marples <roy@marples.name>
Date:   Mon Dec 1 16:58:10 2008 +0000

    Ensure host routes and subnet routes are added correctly.

commit fb10befc1caa5d518da26da9822f030bda082cfd
Author: Roy Marples <roy@marples.name>
Date:   Mon Dec 1 16:56:56 2008 +0000

    Add desc_route to save some bytes.

commit b96011558a4c5a2a2749e11075d70de9a914bf56
Author: Roy Marples <roy@marples.name>
Date:   Thu Nov 27 16:16:32 2008 +0000

    Ensure that we add the src pref address.

commit fb5c66b68da8a355d653148d3a05bcb0e94aeb69
Author: Roy Marples <roy@marples.name>
Date:   Thu Nov 27 10:37:02 2008 +0000

    Describe the blacklist option.

commit a4398c7a4ba3614103396b20754409b0531a57d1
Author: Roy Marples <roy@marples.name>
Date:   Thu Nov 27 09:45:13 2008 +0000

    Fix warning of monotonic clock existence.

commit ddeace4bd49828ef6389f59745766119a514095b
Author: Roy Marples <roy@marples.name>
Date:   Tue Nov 25 21:00:46 2008 +0000

    Release 4.99.6

commit 399004f724fa1ec27b851d00d01239cf42e89862
Author: Roy Marples <roy@marples.name>
Date:   Tue Nov 25 13:12:20 2008 +0000

    Fix adding of host routes.

commit 1200b7e9656e5eaebba0ec3048107514d468ad59
Author: Roy Marples <roy@marples.name>
Date:   Tue Nov 25 12:57:48 2008 +0000

    CSR should come before other route options according to RFC 3442.

commit 6abfc8ec053cd13ea60c869af9c023d1855d693a
Author: Roy Marples <roy@marples.name>
Date:   Tue Nov 25 11:39:09 2008 +0000

    Style

commit 3a3c791b7a2b963d7b0a2220fc79041f8945cfa6
Author: Roy Marples <roy@marples.name>
Date:   Mon Nov 24 22:30:41 2008 +0000

    Don't manipulate subnet routes when they are INADDR_BROADCAST as they don't exist.

commit 95a12dde2a813eeb921499df6b64d56e4adf01ba
Author: Roy Marples <roy@marples.name>
Date:   Mon Nov 24 11:21:31 2008 +0000

    Probably better to exit here.

commit 74d48421744e227b4086cf2edf27220387d70380
Author: Roy Marples <roy@marples.name>
Date:   Mon Nov 24 11:21:11 2008 +0000

    Work out __restrict better.

commit 7ba2eab95d13c892cc1d0ff6c40403d01a921270
Author: Roy Marples <roy@marples.name>
Date:   Fri Nov 21 20:00:26 2008 +0000

    Remove the S option from the command line description, #121

commit 999b21a590c6c8f07104e223786816e0c7e38158
Author: Roy Marples <roy@marples.name>
Date:   Thu Nov 20 10:50:46 2008 +0000

    Plug a leak when rebinding interfaces via the control socket.

commit a2328d2dddd1513622f04d1953269dac6f1fd051
Author: Roy Marples <roy@marples.name>
Date:   Thu Nov 20 09:57:46 2008 +0000

    BOOTP fixes. Also, we don't write a BOOTP lease file.

commit 299662da4f99217bf4dfdd62147c273c0a5e3f1b
Author: Roy Marples <roy@marples.name>
Date:   Wed Nov 19 15:48:18 2008 +0000

    We are now a BOOTP client also :)

commit 0b10229bc6ae7eadcc84a3c5e5710aac11c4f163
Author: Roy Marples <roy@marples.name>
Date:   Wed Nov 19 15:01:20 2008 +0000

    Zeroing each field is cheaper than using memset/memcpy.

commit c5cf49e71a87e064a503ca8dfe771c41cb8db26b
Author: Roy Marples <roy@marples.name>
Date:   Wed Nov 19 14:58:24 2008 +0000

    If no lease time is supplied, assume it's infinite.

commit ea7071e5c997b255ae3f356ab7ebd14e89f1ecc9
Author: Roy Marples <roy@marples.name>
Date:   Wed Nov 19 14:58:17 2008 +0000

    If no lease time is supplied, assume it's infinite.

commit 991e95061860340023e5ed6e2f738d9ec9ae9414
Author: Roy Marples <roy@marples.name>
Date:   Wed Nov 19 14:53:56 2008 +0000

    Adjust lengths to fit MTU.

commit 3faba9e651e08664d5a5719efee02e5c590618e3
Author: Roy Marples <roy@marples.name>
Date:   Wed Nov 19 12:50:49 2008 +0000

    Clarify the clientid option.

commit 55a303e7bfcdf254a02000ab049c0d64cad41cfc
Author: Roy Marples <roy@marples.name>
Date:   Wed Nov 19 09:48:11 2008 +0000

    If we are asked to ARP and we don't have an offer then we are testing our current address.

commit 5f1643f5844b6cf6adba486c8712931b98533c74
Author: Roy Marples <roy@marples.name>
Date:   Mon Nov 17 22:50:37 2008 +0000

    Fix working with linux aliased interfaces again.

commit c989b02361577d2227094cd396c760c1df39e697
Author: Roy Marples <roy@marples.name>
Date:   Mon Nov 17 17:25:54 2008 +0000

    We no longer send a ClientID by default. This is so we now mirror the kernel DHCP client and can re-use its lease by default. To retain the old behaviour, simply add clientid to dhcpcd.conf.

commit 228181a8118f4faed4f67ead567bcf2e8696cf42
Author: Roy Marples <roy@marples.name>
Date:   Mon Nov 17 12:48:38 2008 +0000

    Whitespace.

commit 7b9d0731c3ac128498c7110f1e1f1e8d0868c820
Author: Roy Marples <roy@marples.name>
Date:   Sat Nov 15 11:24:26 2008 +0000

    Fork into background even with no interfaces IF we are asked to background AND have link detection.

commit e6be43482df2b919a1c6f15e95d83708c110382d
Author: Roy Marples <roy@marples.name>
Date:   Fri Nov 14 20:38:40 2008 +0000

    Report all interfaces requested that do not exist.

commit 4ad77cd73759b823ca56cfaac5e34b60394aa4f6
Author: Roy Marples <roy@marples.name>
Date:   Fri Nov 14 19:18:57 2008 +0000

    NetBSD sh needs eval here.

commit 10bcbb5d6b5b100f8e91a17658fbf5d0a65d95c1
Author: Roy Marples <roy@marples.name>
Date:   Fri Nov 14 09:39:09 2008 +0000

    When declining a DHCP lease and we have an IPv4LL one, don't re announce our IPv4LL lease.

commit 6b9750ea051be312f7cb4721a34d306446934c7a
Author: Roy Marples <roy@marples.name>
Date:   Tue Nov 11 09:28:17 2008 +0000

    Don't restart ntpd if it's not already running.

commit 3ad4d331afc3c7959cf9ca0c694adb190337a634
Author: Roy Marples <roy@marples.name>
Date:   Mon Nov 10 11:15:27 2008 +0000

    Fix some LINT errors.

commit eee1b3eed91b9122ad132ea501430693641cd066
Author: Roy Marples <roy@marples.name>
Date:   Mon Nov 10 08:31:33 2008 +0000

    Fix changing routes on BSD.

commit 8109d295243d1299029b1a2b7fda0dc8875bc09d
Author: Roy Marples <roy@marples.name>
Date:   Wed Nov 5 15:59:36 2008 +0000

    Default to -O2.

commit 40494f78e8df7766703d0aa8cd08b2c7421544e4
Author: Roy Marples <roy@marples.name>
Date:   Wed Nov 5 14:36:23 2008 +0000

    Parens.

commit e1caa8dbade9d653dec2172b5c052f1dbeaebb22
Author: Roy Marples <roy@marples.name>
Date:   Wed Nov 5 13:57:54 2008 +0000

    get_line now uses a single buffer, strips leading space and skips comments. This reduces malloc usage slightly and gives a cleaner API at the expense of a slight bss increase.

commit 9783ceb17a8513b0ebcf5fc36d5a42cbd24f1c49
Author: Roy Marples <roy@marples.name>
Date:   Wed Nov 5 13:56:00 2008 +0000

    Close fd's in the child.

commit c93e8528e09c322d105b00711a26cb54f5926422
Author: Roy Marples <roy@marples.name>
Date:   Wed Nov 5 13:09:18 2008 +0000

    Save a few bytes by moving close_fds to bind where it's really used.

commit 5b7112f52583dff9385712b40bb800e2febd36ad
Author: Roy Marples <roy@marples.name>
Date:   Tue Nov 4 10:13:07 2008 +0000

    Test should always DISCOVER.

commit 4c240a4a92ca40661353c9e27061cfbe4bbf1807
Author: Roy Marples <roy@marples.name>
Date:   Tue Nov 4 10:04:25 2008 +0000

    Trim trailing NULLs from string options, #120.

commit 459f34f308040bba6ddc6d3a2a90e228185de44c
Author: Roy Marples <roy@marples.name>
Date:   Wed Oct 29 13:02:41 2008 +0000

    Release 4.99.3

commit b85bcbf82d1c0547415c76614b8730a03ff2e025
Author: Roy Marples <roy@marples.name>
Date:   Wed Oct 29 08:13:15 2008 +0000

    ~0U is better than just ~0 for this.

commit 29a4a2041111d9cfe3933832d404fba278933454
Author: Roy Marples <roy@marples.name>
Date:   Tue Oct 28 09:28:55 2008 +0000

    Re-create the old .info file for applications that parse it.

commit 503f4fe18e2ce1ab0676104a07127b2ad2e68547
Author: Roy Marples <roy@marples.name>
Date:   Tue Oct 28 09:24:23 2008 +0000

    Explain why we decline the address in a message.

commit 3179cfaac73d770b28cf36211a3d67aa2d001d04
Author: Roy Marples <roy@marples.name>
Date:   Mon Oct 27 12:39:32 2008 +0000

    Allow ntp.conf location to be tunable, #119

commit d25b56c354e4b5a79fd033765545dbfa10bacde4
Author: Roy Marples <roy@marples.name>
Date:   Wed Oct 22 08:29:53 2008 +0000

    Update change log location

commit 75fafed825ec7580e9a0a3d659d9fa1bff5741ce
Author: Roy Marples <roy@marples.name>
Date:   Tue Oct 21 15:34:52 2008 +0000

    We should erase the lease file when we get an ARP conflict on rebinding from it.

commit d4ba058f6102e4968257b2164467755885c5aea6
Author: Roy Marples <roy@marples.name>
Date:   Mon Oct 20 16:45:27 2008 +0000

    Really fix .depend with GNU make and other makes.

commit d901c6acdb95b1377ed0b88fe96db508b6b16a93
Author: Roy Marples <roy@marples.name>
Date:   Mon Oct 20 12:11:43 2008 +0000

    We need to include a variable, not the gmake shell funtion.

commit e99d18942d888d1af56220cd4a2fa67cedc5cc80
Author: Roy Marples <roy@marples.name>
Date:   Mon Oct 20 09:56:21 2008 +0000

    Calculate netmask from cidr more efficiently.

commit 37a08d5cf66c62ac30d1d1f07146986b1d80f69c
Author: Roy Marples <roy@marples.name>
Date:   Mon Oct 20 09:50:52 2008 +0000

    Ignore .depend

commit 026311935756351e797e66fd7c0d957ab198081b
Author: Roy Marples <roy@marples.name>
Date:   Mon Oct 20 09:50:07 2008 +0000

    Allow .depend to be included if it exists with gmake.

commit 791c6214a99cd42902ac160569e2c3dce32aa181
Author: Roy Marples <roy@marples.name>
Date:   Sun Oct 19 05:39:28 2008 +0000

    Cast to void * to remove compiler warnings on Sparc64. This should still be aligned correctly as this is how the kernel makes it.

commit 34bf905984347f0f73a3d237408a943ce50086b1
Author: Roy Marples <roy@marples.name>
Date:   Sat Oct 18 23:44:00 2008 +0000

    Fix obtaining netmask on NetBSD.

commit 159d2fcf4993252b99656febdead11b89b8701b7
Author: Roy Marples <roy@marples.name>
Date:   Sat Oct 18 23:28:49 2008 +0000

    Fix up address and netmask detection. This *should* align fine.

commit 9754dc73797d69cf999993af8f1f9f445d359ff4
Author: Roy Marples <roy@marples.name>
Date:   Sat Oct 18 22:58:10 2008 +0000

    Alloc less for options and correctly for inform.

commit 6d35d0ccf958e290338706c08d5ea50f7a9448b6
Author: Roy Marples <roy@marples.name>
Date:   Sat Oct 18 22:57:40 2008 +0000

    Ensure inform options are terminated.

commit 58656754e785474455ad470a9b0f83294fc0dd46
Author: Roy Marples <roy@marples.name>
Date:   Sat Oct 18 18:46:22 2008 +0000

    Fix reading netmask and linux informing.

commit eae4f5b4724b0a237bdf036479435e553b6ecd90
Author: Roy Marples <roy@marples.name>
Date:   Sat Oct 18 16:41:19 2008 +0000

    Get INFORM support almost working again.

commit aec7d71ddb2d4236c7db2fe79350274ca26e178f
Author: Roy Marples <roy@marples.name>
Date:   Sat Oct 18 10:52:01 2008 +0000

    Use the existing start_reboot function instead of a start_request.

commit 49c0efdadb6fa4a27bf0405302945403d4d62ef8
Author: Roy Marples <roy@marples.name>
Date:   Sat Oct 18 10:02:36 2008 +0000

    Make init request for an address work off the command line again.

commit 08a40a313fd57ceaded511764d4781fea6e513a7
Author: Roy Marples <roy@marples.name>
Date:   Fri Oct 17 21:30:25 2008 +0000

    We should send the IP address we decline and the server ID for release.

commit a6fa5cfde80f408434f47700525f1f4ba9cf225c
Author: Roy Marples <roy@marples.name>
Date:   Fri Oct 17 07:22:39 2008 +0000

    Fix warning on sparc64

commit 674616cd8372909ff6df63167e669046d3a044a0
Author: Roy Marples <roy@marples.name>
Date:   Wed Oct 15 13:00:33 2008 +0000

    Cast to void * to avoid compiler warnings on Sparc64. Also, save a needless malloc.

commit dacb4c85c2a5b0e34648339c15772e0615b49301
Author: Roy Marples <roy@marples.name>
Date:   Wed Oct 15 09:08:22 2008 +0000

    Compile on Sparc64/FreeBSD-6.2

commit 56d212f25a2ff83bc474da428703ae7500a901eb
Author: Roy Marples <roy@marples.name>
Date:   Tue Oct 7 20:01:33 2008 +0000

    Update bug page.

commit 2db75f1366ddbf270e27e82f865e1b972b72bde2
Author: Roy Marples <roy@marples.name>
Date:   Mon Oct 6 12:49:07 2008 +0000

    Style.

commit 35a8183fb9d41cd62d1b1689ffe9953fff677aa9
Author: Roy Marples <roy@marples.name>
Date:   Mon Oct 6 12:45:32 2008 +0000

    static objects are initialized to 0 by default, so don't explicity do this.

commit 079649b0b1b5e074c745c84f9ebf3fd504c9a628
Author: Roy Marples <roy@marples.name>
Date:   Mon Oct 6 08:37:02 2008 +0000

    We should be able to reboot interfaces we don't already know about.

commit 7dc5bd24b9c334b9ec495976e17fb4f0a0da235c
Author: Roy Marples <roy@marples.name>
Date:   Mon Oct 6 07:30:17 2008 +0000

    Simplify the logic of what to put in the message, and ensure that the MTU size is in the DISCOVER message.

commit 764eb12abd25802e1f1d072c53076a8a8fe47018
Author: Roy Marples <roy@marples.name>
Date:   Wed Oct 1 11:15:33 2008 +0000

    Fix TEST.

commit 29062278395e56a38e76cfc1f6f71f13ceb00523
Author: Roy Marples <roy@marples.name>
Date:   Wed Oct 1 11:11:42 2008 +0000

    Build the resolv.conf correctly from the last commit.

commit 1b17598f02a4b92ad2212226495424382bd7f71f
Author: Roy Marples <roy@marples.name>
Date:   Wed Oct 1 10:55:49 2008 +0000

    Write resolv.conf as per the DHCP message.

commit 9c9ad2f1e6d02ebc311521341848385aa499efa0
Author: Roy Marples <roy@marples.name>
Date:   Fri Sep 26 07:26:50 2008 +0000

    Fix -I '' to not send a client ID instead of a blank one, #116.

commit 130d5f86b3957469197990e03b3280f5dedc6cad
Author: Roy Marples <roy@marples.name>
Date:   Thu Sep 25 22:04:11 2008 +0000

    svn repo

commit c624cd4d7c6d96b12f592fd1e5c15078b4b43907
Author: Roy Marples <roy@marples.name>
Date:   Thu Sep 25 21:23:47 2008 +0000

    Punt

commit 071628abd0c3cd692b48a22916777937b1d99e7c
Author: Roy Marples <roy@marples.name>
Date:   Thu Sep 25 21:23:16 2008 +0000

    Punt old dirs and work with svn.

commit 1f580944fa848a9c14639e68076f182de08dc917
Author: Roy Marples <roy@marples.name>
Date:   Fri Sep 19 23:31:17 2008 +0000

    Fix comment.

commit bbe2fd074f83d32af75dbcc0e0dfec8eda1fec11
Author: Roy Marples <roy@marples.name>
Date:   Fri Sep 19 13:36:40 2008 +0000

    4.99.2

commit f7038ab8b9bcd3bb651d7decbfba3744b00a1c81
Author: Roy Marples <roy@marples.name>
Date:   Wed Sep 17 13:09:30 2008 +0000

    As we now use times to trigger again instead of decreasing timers, ensure our lease fits. We may wish to revisit this again if we need decreasing timers once more.

commit 5c39a95174cf4fa01fece35c6fbd67c13a39cf2b
Author: Roy Marples <roy@marples.name>
Date:   Wed Sep 17 10:37:03 2008 +0000

    Fix pointer.

commit f52769ba71d9fac5acbe71a435e6018f2eacd571
Author: Roy Marples <roy@marples.name>
Date:   Wed Sep 17 10:32:55 2008 +0000

    Move wireless detection from net.c into if-bsd.c and if-linux.c

commit 065125d478bfa3d0814c8a67fa0bad5fd442270b
Author: Roy Marples <roy@marples.name>
Date:   Wed Sep 17 10:32:34 2008 +0000

    Document metrics better.

commit b2173751b6eb4d404b1f157da310d6fc3b86ef49
Author: Roy Marples <roy@marples.name>
Date:   Wed Sep 17 08:29:56 2008 +0000

    Fix rebooting off a signal.

commit 2662d5195f4c8200be223bad3656903e3db16548
Author: Roy Marples <roy@marples.name>
Date:   Tue Sep 16 13:17:23 2008 +0000

    Allow the release keyword in dhcpcd.conf to release the lease on shutdown.

commit 9c7d387680c41b35e99a0509dd58c2b8fd38c896
Author: Roy Marples <roy@marples.name>
Date:   Tue Sep 16 13:15:21 2008 +0000

    Fix compile.

commit 12653e16439d180b38a660d1137ac8ce8cef475d
Author: Roy Marples <roy@marples.name>
Date:   Tue Sep 16 10:02:14 2008 +0000

    Fix discovery

commit 43b2edaf432212eeee9f97ca5e476af95e2c373e
Author: Roy Marples <roy@marples.name>
Date:   Tue Sep 16 09:55:46 2008 +0000

    Move AF_LINK discovery to if-bsd.c. Also, we only work with IFT_ETHER types currently, so skip others.

commit b4160f67135a7878dfa11c480b2a37baba6bbca6
Author: Roy Marples <roy@marples.name>
Date:   Mon Sep 15 19:31:18 2008 +0000

    Loads of changes, so the next full version will be 5.0. We'll releae 4.99.1 here.

commit facdc25be0bd1b0ec0d3aa7fc188e3d56e42acfc
Author: Roy Marples <roy@marples.name>
Date:   Mon Sep 15 19:30:44 2008 +0000

    Remove debug.

commit afc7387846a6e8f01deafe2f2ae797392d496413
Author: Roy Marples <roy@marples.name>
Date:   Mon Sep 15 19:15:52 2008 +0000

    We need to flush the ARP table after configuring new routes.

commit 1da85ce3902e0fa159b35f24f5addffeb9493eac
Author: Roy Marples <roy@marples.name>
Date:   Mon Sep 15 16:53:11 2008 +0000

    Add subnet routes to our routing table so we can change them for systems without metrics.

commit 4f35e21b38d919fd01c5f6007abde438f88b6d4f
Author: Roy Marples <roy@marples.name>
Date:   Mon Sep 15 16:43:57 2008 +0000

    Fix segfault when passing options in.

commit 5c957ca3d31c126fbd173f1191712687068a47c8
Author: Roy Marples <roy@marples.name>
Date:   Mon Sep 15 16:43:27 2008 +0000

    Fix reboot timeout in dhcpcd.conf.

commit a2a9a498da4327ecf2fdec8560bb9a3557490fa9
Author: Roy Marples <roy@marples.name>
Date:   Mon Sep 15 15:23:46 2008 +0000

    Reboot off the last lease and use the last lease if not expired and user has asked for it. Also, add a reboot timeout toggle (default 10 seconds).

commit 78c8e969a552d0076faab4065ed627e5f14cb814
Author: Roy Marples <roy@marples.name>
Date:   Mon Sep 15 15:20:37 2008 +0000

    Correctly set the REBOOT reason.

commit 9266112e617cb0ac5fe3124b5ab512d83e8d9cc6
Author: Roy Marples <roy@marples.name>
Date:   Mon Sep 15 15:20:09 2008 +0000

    Don't decline leases that we loaded from disk.

commit 43205146f8f2d0a5846262c5154fc36d16e00257
Author: Roy Marples <roy@marples.name>
Date:   Mon Sep 15 09:05:29 2008 +0000

    Fix subnet routes. This needs more testing.

commit 1993f8f9977d3a7cdd583add3c74829f11869421
Author: Roy Marples <roy@marples.name>
Date:   Mon Sep 15 09:02:56 2008 +0000

    Don't overflow the buffer.

commit 3b85adad85f1e3275fb3020c54a16fa8cee6faa6
Author: Roy Marples <roy@marples.name>
Date:   Sun Sep 14 09:07:34 2008 +0000

    Ensure that routes go via the correct interface and set netmask correctly.

commit 9bb03ee18111983683517744b4cb4270a62cc56e
Author: Roy Marples <roy@marples.name>
Date:   Sun Sep 14 09:06:22 2008 +0000

    We may change size of hwaddr_buffer, so just use sizeof.

commit c4f493792ccb676ea7968c556b3a202c7f573719
Author: Roy Marples <roy@marples.name>
Date:   Sat Sep 13 11:17:24 2008 +0000

    We need to drop config on carrier loss now.

commit 48fdb3a5ee7ff0fcc9a8266274fba14c87fc60a3
Author: Roy Marples <roy@marples.name>
Date:   Sat Sep 13 10:49:23 2008 +0000

    We don't add this anymore.

commit a43bdfa634a490856dc4e2deb4b66e008d3f9b9d
Author: Roy Marples <roy@marples.name>
Date:   Sat Sep 13 10:48:48 2008 +0000

    Fix subnet route.

commit 441f7d159dbb8448f075e177f9c3770503fc6aa4
Author: Roy Marples <roy@marples.name>
Date:   Fri Sep 12 18:08:07 2008 +0000

    Remove remembering routes per interface and have a global routing table so we can change routes depending on interface state. This is very useful for the BSD's where there is no route metric.

commit be070f751ba8033aebb08e1cece0f0081d9c2a88
Author: Roy Marples <roy@marples.name>
Date:   Thu Sep 11 22:55:27 2008 +0000

    Drop interfaces in reverse order when stopping and handle removal of interfaces in one function.

commit c4012b7e1bdb720fcae58fbe499f59b4dedd7223
Author: Roy Marples <roy@marples.name>
Date:   Thu Sep 11 15:50:19 2008 +0000

    Fix removing old config.

commit ede5017e8c2fd5232d1ffaec67346250a0ed8eb7
Author: Roy Marples <roy@marples.name>
Date:   Thu Sep 11 09:56:57 2008 +0000

    Tidy up some valgrind errors.

commit ba97e49417ba7463405abdb7d62e834349f0d329
Author: Roy Marples <roy@marples.name>
Date:   Thu Sep 11 09:38:02 2008 +0000

    Add allowinterfaces and denyinterfaces options to dhcpcd.conf for better multiple interface support.

commit 03c2c87907acec01b024d525414bd76f7d001a15
Author: Roy Marples <roy@marples.name>
Date:   Thu Sep 11 08:28:39 2008 +0000

    Allow quiet and nobackground to work in dhcpcd.conf

commit 9d94cb7804fb74fb2a6611e0e4e02ade206d38b4
Author: Roy Marples <roy@marples.name>
Date:   Wed Sep 10 12:39:20 2008 +0000

    Move function lower down as it's not that important.

commit b6b003adbae25eba9d7318ce0a249da480e61683
Author: Roy Marples <roy@marples.name>
Date:   Wed Sep 10 12:34:25 2008 +0000

    Export IF_METRIC to resolvconf. We should change to the -m option when openresolv-1.8 gets around abit.

commit 1fe5d27c83850363d25852e0f9bd3f860eb3e659
Author: Roy Marples <roy@marples.name>
Date:   Tue Sep 9 20:52:39 2008 +0000

    Fix interface detection.

commit 3270bfbf689cf8e7111b21c0b22b4951bb9b9175
Author: Roy Marples <roy@marples.name>
Date:   Tue Sep 9 20:52:21 2008 +0000

    Fix memory errors.

commit 59795183289d077902f64a815c31126499a12ca2
Author: Roy Marples <roy@marples.name>
Date:   Tue Sep 9 19:07:37 2008 +0000

    Fix compile errors.

commit 2b60ecb71e76e4a6ac765afac3ce7da87ef4464b
Author: Roy Marples <roy@marples.name>
Date:   Tue Sep 9 17:07:48 2008 +0000

    Sort interfaces according to preference and pass this to dhcpcd-run-hooks so we can prefer configs.

commit 21164dfb798aedb56d11bcdca897106748094d91
Author: Roy Marples <roy@marples.name>
Date:   Tue Sep 9 15:36:50 2008 +0000

    We don't create these files, so don't clean them.

commit d76457c8ea830b815f8e03055ed18e4c0dfffb57
Author: Roy Marples <roy@marples.name>
Date:   Tue Sep 9 08:16:15 2008 +0000

    We no longer ship .sh files, so remove the construct.

commit cf7a295fa370022c78bf971667e61f69450104a4
Author: Roy Marples <roy@marples.name>
Date:   Mon Sep 8 11:30:31 2008 +0000

    On Linux, fix replacing the kernel added subnet route correctly for metrics.

commit c130b44207af00d374c6eee6c115b210a2b9bd49
Author: Roy Marples <roy@marples.name>
Date:   Mon Sep 8 11:28:12 2008 +0000

    Fix renewing.

commit f19ee00e7346f15e90e910172d551359711e4c88
Author: Roy Marples <roy@marples.name>
Date:   Mon Sep 8 08:19:06 2008 +0000

    Use -S to test full compiler flags.

commit 64c6e1eb18db57252fb4dbdde81f25973beba4ff
Author: Roy Marples <roy@marples.name>
Date:   Sat Sep 6 19:41:05 2008 +0000

    Check carrier when starting reboot.

commit 08aa77766031ce7f5966e81495e87360dce2e1a2
Author: Roy Marples <roy@marples.name>
Date:   Sat Sep 6 19:24:40 2008 +0000

    Style.

commit a53c73c2e50ea39286e84671b3c7572c265d5256
Author: Roy Marples <roy@marples.name>
Date:   Sat Sep 6 18:43:27 2008 +0000

    ocets might as well be size_t. This also fixes a segfault whe compiled with pcc.

commit a10033b7c0e72d182582a4385bb542c38a3aadf9
Author: Roy Marples <roy@marples.name>
Date:   Sat Sep 6 18:24:27 2008 +0000

    Tests now work with gcc and pcc.

commit e63c314dbd5bdbda6e6897504721e789b963df5c
Author: Roy Marples <roy@marples.name>
Date:   Sat Sep 6 15:53:31 2008 +0000

    Always test our cc options with a valid input file.

commit 4521897e2528532e957fcb334e3f27c852c51bea
Author: Roy Marples <roy@marples.name>
Date:   Fri Sep 5 19:44:02 2008 +0000

    Should use LOG_DAEMON as we're a DHCP Client Daemon

commit 765fbf7db0669762f6fe4f829f37c6b10de77fe4
Author: Roy Marples <roy@marples.name>
Date:   Fri Sep 5 18:24:34 2008 +0000

    Remove logger and exclusively uses syslog instead. This saves almost 2K on NetBSD/amd64 from before changing strerror to %m.

commit f25f3fb214d3106bb12fdaa0b67eeabd3dadbb0a
Author: Roy Marples <roy@marples.name>
Date:   Fri Sep 5 15:46:02 2008 +0000

    Don't spam on startup about unsupported interfaces if quiet.

commit 4119774e53a495666d9c28dcf0ba06f5ad37361a
Author: Roy Marples <roy@marples.name>
Date:   Fri Sep 5 15:28:08 2008 +0000

    Fix the define for GLIBC. uClibc just passes syslog to printf, so assume %m works there also.

commit fca060b851b96d6e82d13306df83322ea1d08128
Author: Roy Marples <roy@marples.name>
Date:   Fri Sep 5 14:16:53 2008 +0000

    Save more memory, malloc the pidfile.

commit 9f7780b07bd3216da3fb83f95b9976e4fd257484
Author: Roy Marples <roy@marples.name>
Date:   Fri Sep 5 13:28:44 2008 +0000

    Don't use a needless buffer for cffile.

commit f6de5860b6c6a47c21d09ee4203895f182c01eaa
Author: Roy Marples <roy@marples.name>
Date:   Fri Sep 5 13:12:35 2008 +0000

    As our logger calls emulate syslog, we can use %m. However, this means we have to convert it for printf as POSIX does not require that printf supports it. This also means we drop -pedantic from our GCC flags.

commit 99d755f98fbd68ea54a199f5ce27516e37108cd1
Author: Roy Marples <roy@marples.name>
Date:   Fri Sep 5 11:54:44 2008 +0000

    Pack the dhcp structure.

commit 0ce8caf249d3f477eacbcb45cf31322798551b2d
Author: Roy Marples <roy@marples.name>
Date:   Fri Sep 5 11:46:03 2008 +0000

    Mark functions as _noreturn.

commit e7eeaf88da7f1512b33847d180288f4158ef6bd4
Author: Roy Marples <roy@marples.name>
Date:   Fri Sep 5 07:31:09 2008 +0000

    Make TEST work once more.

commit da16617840a22827d78c99bab837d9be0a420c7c
Author: Roy Marples <roy@marples.name>
Date:   Fri Sep 5 07:22:03 2008 +0000

    Remove some ints and replace with our option mask.

commit 686608c28c738b3a990512d7ab6b22c7396b3117
Author: Roy Marples <roy@marples.name>
Date:   Thu Sep 4 22:41:33 2008 +0000

    Add the remembered routes in reverse order. This saves having to reverse them later, and uses less code. Remember the new subnet route when changing it for the metric.

commit b6b248817207e0c9595b2b97e8b2ed241bcd7e3d
Author: Roy Marples <roy@marples.name>
Date:   Thu Sep 4 22:02:57 2008 +0000

    Ensure last is set when deleting events.

commit ef1066943266a988a00386d9714050009c73b16a
Author: Roy Marples <roy@marples.name>
Date:   Thu Sep 4 22:02:32 2008 +0000

    Ensure background is initialised.

commit 7e0d51b1903615a3daae0dbc859359b33b23fd10
Author: Roy Marples <roy@marples.name>
Date:   Thu Sep 4 15:42:09 2008 +0000

    Mark as daemonised correctly.

commit 15eb50d78c45f16663e242f6b4ef1b71ea230efc
Author: Roy Marples <roy@marples.name>
Date:   Thu Sep 4 15:24:55 2008 +0000

    Make background work again.

commit 62111255dc94ae89a2641d3e5dd56d5ad4a0aae5
Author: Roy Marples <roy@marples.name>
Date:   Thu Sep 4 14:12:20 2008 +0000

    Fix compile.

commit 064dd58ee2542ff28fdc0e6615c434529c6c92a0
Author: Roy Marples <roy@marples.name>
Date:   Thu Sep 4 14:08:14 2008 +0000

    Enable detection of addition and removal of interfaces on Linux.

commit 335b626a1731fed77776bae520a922435d94807a
Author: Roy Marples <roy@marples.name>
Date:   Thu Sep 4 11:43:56 2008 +0000

    Fix compile on Linux.

commit 96d0673a2cd58d50f0e4c8e0c60b332a7fff92a8
Author: Roy Marples <roy@marples.name>
Date:   Thu Sep 4 11:30:11 2008 +0000

    When OS reports new and removed interfaces, dhcpcd sees this and either starts or stops watching them. BSD only, Linux to follow.

commit 4570862e65882adb2b2b60e45b6ba7e6dec21229
Author: Roy Marples <roy@marples.name>
Date:   Thu Sep 4 09:43:52 2008 +0000

    If we fail to send a packet, remove the interface from consideration.

commit 87987af44e93241523279315ae75df6b40587531
Author: Roy Marples <roy@marples.name>
Date:   Thu Sep 4 09:43:33 2008 +0000

    Not needed.

commit b905fc787c1bcc537af52d407bf0bd350a7d5f7a
Author: Roy Marples <roy@marples.name>
Date:   Thu Sep 4 08:48:06 2008 +0000

    Only free the option buffer when debugging memory leaks.

commit f0f4b8b6df73aaa57672c47a7f339b52db23e68f
Author: Roy Marples <roy@marples.name>
Date:   Thu Sep 4 08:31:00 2008 +0000

    Use static buffers for ARP and move the send code to arp.c. Also, move the hwaddr buffer to the top of the file for clarity.

commit 25312cdd58c66ead7c218ce88e5994f47e7c9266
Author: Roy Marples <roy@marples.name>
Date:   Thu Sep 4 08:27:38 2008 +0000

    No need to be this complicated.

commit f65dc4f659d614283a54c20382027d5703ce4dfe
Author: Roy Marples <roy@marples.name>
Date:   Thu Sep 4 08:20:26 2008 +0000

    Ensure that clientid is free before reallocing it.

commit b332752859d595fc7f7c8fb73c3da3cd21e95b6d
Author: Roy Marples <roy@marples.name>
Date:   Wed Sep 3 23:36:46 2008 +0000

    Work around broken linux headers when including wireless.h

commit 26ab34ee2033ef098d367df1ea5d77fd7c22a592
Author: Roy Marples <roy@marples.name>
Date:   Wed Sep 3 19:27:47 2008 +0000

    Allow 5 control socket connections at once. Time each out after 5 minutes.

commit 36eb75bc7aabe27fe4a02faf410317924d0a98f2
Author: Roy Marples <roy@marples.name>
Date:   Wed Sep 3 16:50:52 2008 +0000

    Merge branch 'master' of git.marples.name:/var/git/dhcpcd

commit f43e585355e50bd2e7021380db6fc792662f76be
Author: Roy Marples <roy@marples.name>
Date:   Wed Sep 3 16:49:28 2008 +0000

    Add a control socket so that interfaces can be dynamically re-set.
    This requires the event loop argument being changed to void *
    so we can send arguments other than an interface.

commit f0c98483e7369f2df38edc352433239fa24f6a2f
Author: Roy Marples <roy@marples.name>
Date:   Tue Sep 2 18:29:49 2008 +0000

    Clean code.

commit 948eea38e57ee86215613e14e48a4615196f2f6a
Author: Roy Marples <roy@marples.name>
Date:   Tue Sep 2 15:35:02 2008 +0000

    Don't need this.

commit ccf0a5f559a4cbe55e44b43861f02e73801b33cc
Author: Roy Marples <roy@marples.name>
Date:   Tue Sep 2 15:25:14 2008 +0000

    Fix compile and wireless test on FreeBSD.

commit 274abdf80bea6fb6babb3511ed4ee226ce18b8d2
Author: Roy Marples <roy@marples.name>
Date:   Tue Sep 2 15:11:01 2008 +0000

    Add wireless detection to NetBSD (tested) and FreeBSD (untested).

commit b24e47427238cfa1496a975befdee9a4f5668c8e
Author: Roy Marples <roy@marples.name>
Date:   Tue Sep 2 15:07:01 2008 +0000

    strncpy -> strlcpy.

commit fd05b7dcfc61e1a8f1d4f0f7ecd27bb25a6cc7a8
Author: Roy Marples <roy@marples.name>
Date:   Tue Sep 2 13:28:11 2008 +0000

    Add an event loop.
    Split client.c into smaller files and functions and
    recode around the event loop.
    Add multiple interface support using the new event loop.
    Document changes and outstanding bugs.

commit ca07508a27a3048ead0c0a411f2cecc84ac97935
Author: Roy Marples <roy@marples.name>
Date:   Tue Aug 26 13:27:07 2008 +0000

    Style

commit 78593b95f4866ae0d3c9f39906da3f42f0e69313
Author: Roy Marples <roy@marples.name>
Date:   Mon Aug 25 07:34:10 2008 +0000

    Fix CMDLINE_COMPAT.

commit f0c82200f2faf5b83ea16d3f415f38ddb340b576
Author: Roy Marples <roy@marples.name>
Date:   Sun Aug 24 11:56:30 2008 +0000

    Release dhcpcd-4.0.0 :D

commit 5d5323f08441aeae08effe0a9af7d4ea6566aa1b
Author: Roy Marples <roy@marples.name>
Date:   Fri Aug 22 09:48:25 2008 +0000

    Style.

commit 38d94a32010793579241234b261d968c4b8b1255
Author: Roy Marples <roy@marples.name>
Date:   Fri Aug 22 09:44:02 2008 +0000

    Don't errors when opening a UDP socket for INADDR_ANY and soemthing else already has it open.

commit 0eb85def78f66cdc4ea08cb7e34920e5c0d884a2
Author: Roy Marples <roy@marples.name>
Date:   Thu Aug 21 08:52:34 2008 +0000

    Always open a UDP port on the interface.
    This stops ICMP not reachable messages when dhcpcd first starts and
    the IP we get is already configured on the interface.

commit 0235df9d663b986bb4a0c9554209555673e5d312
Author: Roy Marples <roy@marples.name>
Date:   Wed Aug 20 08:50:38 2008 +0000

    Move the --renew option to --rebind as it's more accurate (both are -n). Support --renew when CMDLINE_COMPAT is enabled.

commit 1895d36baf752404c7cead5fb6f0f12a2be1ecbc
Author: Roy Marples <roy@marples.name>
Date:   Wed Aug 20 08:40:53 2008 +0000

    Clarify that dhcpcd will not re-configure itself or use any command line arguments when signalling an existing process to renew.

commit 3deb5188ef227de2294c1fcc679bd74accc08091
Author: Roy Marples <roy@marples.name>
Date:   Tue Aug 19 13:31:59 2008 +0000

    We should really enter the rebinding state on a requested renew as we're broadcasting instead of unicasting.

commit 9c422b680a317b2f0b83773e6fdbfa54940a6c34
Author: Roy Marples <roy@marples.name>
Date:   Tue Aug 19 10:18:31 2008 +0000

    Don't run PREINIT when testing.

commit 54d4db3a260989e8c66e535a6d06121b761b881d
Author: Roy Marples <roy@marples.name>
Date:   Mon Aug 18 18:35:12 2008 +0000

    Fix Test returning to userland.

commit 8ffd7d9402282dbc757ae6b07cf2629b89704940
Author: Roy Marples <roy@marples.name>
Date:   Mon Aug 18 18:34:40 2008 +0000

    pidfiles normally have a new line

commit 9eef54d82c8600751451a014ffd4e0bbbc61ee2c
Author: Roy Marples <roy@marples.name>
Date:   Mon Aug 18 12:46:18 2008 +0000

    Fix some config reading.

commit cc45fbd76ed54efda7538a2eb8e56dd714346467
Author: Roy Marples <roy@marples.name>
Date:   Mon Aug 18 12:43:05 2008 +0000

    The require directive now requires that the required options are present in each DHCP message. A few variables and functions have also been renamed to make this part more readable.

commit bac03ede3de43969143a5bd314af10f17003980a
Author: Roy Marples <roy@marples.name>
Date:   Sun Aug 17 15:13:23 2008 +0000

    Document correct background option in dhcpcd.conf

commit e77d58d95897320a92c0a4b86836e067b0daacfa
Author: Roy Marples <roy@marples.name>
Date:   Fri Aug 15 19:29:24 2008 +0000

    Fix compat.

commit be5aa344886f15c4697c34d3790337afd93c4375
Author: Roy Marples <roy@marples.name>
Date:   Fri Aug 15 19:24:39 2008 +0000

    Release dhcpcd-4.0.0-rc5

commit 7e79a3e4a12ba865f95f21abe8110adb47446293
Author: Roy Marples <roy@marples.name>
Date:   Fri Aug 15 11:33:33 2008 +0000

    If cmp and diff aren't around, try a text match using cat. After all, we are working with text files.

commit ee90dc2257a48b3b8bae93a218d3dcc1bee46aaf
Author: Roy Marples <roy@marples.name>
Date:   Fri Aug 15 11:06:27 2008 +0000

    Don't enforce that keys are space separated

commit 7bcaeef3a2cba652e43d4c3459240fb333875637
Author: Roy Marples <roy@marples.name>
Date:   Fri Aug 15 09:07:56 2008 +0000

    sed may not always be available, so use shell loops to replicate behaviour in this case

commit a01c3091db8e36d11547f327e7e46330edc94cbf
Author: Roy Marples <roy@marples.name>
Date:   Fri Aug 15 03:31:37 2008 +0000

    Fix cmp test.

commit a5ea73e73f08db717425db8c2894d599f6faf603
Author: Roy Marples <roy@marples.name>
Date:   Fri Aug 15 03:22:21 2008 +0000

    Remove the append/clean framework and prefer a store and merge
    approach. It's more work, but the end result looks cleaner.

commit 68e04b443823cfd04b747a8accd4bdea4f6f74f2
Author: Roy Marples <roy@marples.name>
Date:   Thu Aug 14 16:16:06 2008 +0000

    Re-jig the order of doing things to improve our logging.

commit fb8a5f981735c7c6a85a9f996cc4bcd39f48e34a
Author: Roy Marples <roy@marples.name>
Date:   Thu Aug 14 16:15:45 2008 +0000

    If a device is not found, report it.

commit 50b9957e82beba942dffd8574fe937597ddb1fe6
Author: Roy Marples <roy@marples.name>
Date:   Thu Aug 14 16:00:37 2008 +0000

    Don't warn about dhcpcd not running when using --renew.

commit 205be441f3dff70fa9098f84110b85a760b429fd
Author: Roy Marples <roy@marples.name>
Date:   Thu Aug 14 12:37:44 2008 +0000

    Don't error if no interfaces or the state dir does not exist.

commit 697033263dcdbca3e2946301d574ac9c6aaf7553
Author: Roy Marples <roy@marples.name>
Date:   Thu Aug 14 12:17:23 2008 +0000

    Set the main state dir in the main hook script.

commit cf05d568c4aa6d86e13ed5379dd5928cd5f726cc
Author: Roy Marples <roy@marples.name>
Date:   Thu Aug 14 12:14:23 2008 +0000

    Don't quote for uniqify and use 1 sed call instead of looping.

commit fb8c0fd4b0d1ac58474f42f7bfc8c4398a954d83
Author: Roy Marples <roy@marples.name>
Date:   Thu Aug 14 11:00:58 2008 +0000

    Move uniqify to dhcpcd-run-hooks

commit b78ebc2f4c93e0a0b93a839e65d70c331d8134b7
Author: Roy Marples <roy@marples.name>
Date:   Thu Aug 14 10:38:15 2008 +0000

    If resolvconf is not present, try and emulate it's functionality just for dhcpcd so we can sanely handle >1 instance running.

commit 908a4aa9ae8e02fa13c5a98b9dae03d32803cfe7
Author: Roy Marples <roy@marples.name>
Date:   Thu Aug 14 10:37:11 2008 +0000

    Make signature more sane and fix comment.

commit a5b2d977e8c6b91b9a2c85b74602db866f1aae12
Author: Roy Marples <roy@marples.name>
Date:   Thu Aug 14 08:34:38 2008 +0000

    We should always run the script on FAIL.

commit a6384491556a5acaea02d58c69d70febab2020e1
Author: Roy Marples <roy@marples.name>
Date:   Thu Aug 14 08:06:21 2008 +0000

    Be consistent with dhcient - always PREINIT on startup. We can use this to purge stale configuration.

commit 7b1ae6d97bfd6191bba5108ff6b2dea8237b9cbb
Author: Roy Marples <roy@marples.name>
Date:   Wed Aug 13 21:29:30 2008 +0000

    classid -> vendorclassid to match the RFC description.

commit c22ce5910d50c60031684fb3ef654d4c819c3858
Author: Roy Marples <roy@marples.name>
Date:   Wed Aug 13 20:26:41 2008 +0000

    Allow reqmask of numbers.

commit 4cec793b2485516c1bd8f6405c08166e7ac73a67
Author: Roy Marples <roy@marples.name>
Date:   Wed Aug 13 19:41:40 2008 +0000

    Fix INFORM and document it in dhcpcd-run-hooks.

commit 43ea14b85cf30771da22cfed498c2315b307ff2c
Author: Roy Marples <roy@marples.name>
Date:   Wed Aug 13 17:06:02 2008 +0000

    Fix segfault.

commit 0e447e5ebd5736e4c755832f15d993c072324d9e
Author: Roy Marples <roy@marples.name>
Date:   Wed Aug 13 16:02:42 2008 +0000

    Check for localhost.localdomain as needing a new hostname.

commit b4b41529500740d30fbecebd4c5665bca1f18948
Author: Roy Marples <roy@marples.name>
Date:   Wed Aug 13 15:39:34 2008 +0000

    Support head and tail files for resolv.conf

commit 7375b68c26a045bbb374b66c43d368e11c2c16e0
Author: Roy Marples <roy@marples.name>
Date:   Wed Aug 13 15:09:13 2008 +0000

    Scrub compile warnings on FreeBSD.

commit 58d770fc587edce63df57d0567b9677773096c8d
Author: Roy Marples <roy@marples.name>
Date:   Wed Aug 13 14:56:46 2008 +0000

    Fix removing old stale entries.

commit 479d70fa71c43103c4a3540dd55216f9ac434a22
Author: Roy Marples <roy@marples.name>
Date:   Wed Aug 13 14:53:46 2008 +0000

    content -> configuration

commit 61dbdd6bd4d9895075032443e49b8436d0db453f
Author: Roy Marples <roy@marples.name>
Date:   Wed Aug 13 14:46:49 2008 +0000

    Remove the word inteface from the signature.

commit 12271146c6f6c7c27c05a2914dc2a91cf28083c4
Author: Roy Marples <roy@marples.name>
Date:   Wed Aug 13 13:00:20 2008 +0000

    Use append_conf return value.

commit 5c6909c055201f34d665165c18c08bd45a28dc5c
Author: Roy Marples <roy@marples.name>
Date:   Wed Aug 13 12:35:33 2008 +0000

    Don't cast needlessly.

commit 1c34afb04dee48693f808c9cfa55874abd74e7f5
Author: Roy Marples <roy@marples.name>
Date:   Wed Aug 13 12:29:32 2008 +0000

    Fix an buffer overflow leading to random bytes in the hardware address.

commit 91309576bd255aadb15e88d8fb3a67ffe1c3854d
Author: Roy Marples <roy@marples.name>
Date:   Wed Aug 13 12:07:27 2008 +0000

    Add a framework for top an tailing config files with DHCP data and a method for cleaning them.

commit 16ceedbb2da1112848b71b58f617d1c3bb94e0e7
Author: Roy Marples <roy@marples.name>
Date:   Tue Aug 12 23:56:09 2008 +0000

    Fix -n when already running.

commit edffba160425bf6b652f97b5515fe3065768fe4e
Author: Roy Marples <roy@marples.name>
Date:   Tue Aug 12 23:32:18 2008 +0000

    Remove the signature variable - each hook makes it's own.
    ntp.conf now preserves existing server entries and cleans stale dhcpcd
    entries

commit dbf03ba256fafb7eaf699a496ad5fac200bf65df
Author: Roy Marples <roy@marples.name>
Date:   Tue Aug 12 22:51:33 2008 +0000

    Default target should not be install ...

commit 444ceeeb4c5e4712c09870800e2b1a55c33be07b
Author: Roy Marples <roy@marples.name>
Date:   Tue Aug 12 20:46:42 2008 +0000

    ntp.conf could have more than just servers, but DHCP only knows about servers. Solution == use egrep to grab everything but servers and append to it :)

commit 43aedb8a161bdafb30c64ac89a53159dc6f37cdd
Author: Roy Marples <roy@marples.name>
Date:   Tue Aug 12 20:44:42 2008 +0000

    Don't assume comments start with #

commit d2a47191c31ced2c567e3f7604dbeb758c8e1689
Author: Roy Marples <roy@marples.name>
Date:   Tue Aug 12 16:56:35 2008 +0000

    Document dhcpcd spining with dhcpcd -x.

commit 8724d5a72d9d07064d9220a357b1caf7bc2bdfb3
Author: Roy Marples <roy@marples.name>
Date:   Tue Aug 12 16:52:56 2008 +0000

    leased from should be time_t. Also, add boundtime for the last commit to work.

commit 2169e8e4031771cbb95c28727027194dbdce2548
Author: Roy Marples <roy@marples.name>
Date:   Tue Aug 12 16:45:12 2008 +0000

    When requesting an address, probe for it first.
    If we have a monotonic clock, then remove time
    taken from bound -> announced from the renewal time.

commit d99ed6bd0c976c27784d2ff8313823da5e58ec93
Author: Roy Marples <roy@marples.name>
Date:   Tue Aug 12 12:20:25 2008 +0000

    Need time.h for nanosleep.

commit 56f8fe9da19878e7ec210a41732511ea5b377790
Author: Roy Marples <roy@marples.name>
Date:   Tue Aug 12 10:54:09 2008 +0000

    We should ARP probe after discover.

commit 6607ae4ba702f4bac17977484bc23e6bda78d18b
Author: Roy Marples <roy@marples.name>
Date:   Tue Aug 12 10:51:42 2008 +0000

    Spin until dhcpcd exits (timeout 10 seconds) to avoid this race:- dhcpcd -x eth0; dhcpcd eth0

commit 0c424cde17ae40da570bf94d156a642b1bda3186
Author: Roy Marples <roy@marples.name>
Date:   Tue Aug 12 10:50:30 2008 +0000

    Remove unused function.

commit 6b842b3c9f513fcbe67e1bfca685fed4e16bee9c
Author: Roy Marples <roy@marples.name>
Date:   Mon Aug 11 09:28:53 2008 +0000

    Rename exec_script to run_script. Split the exec/fork part to static exec_script. This allows us to use vfork and stop gcc complaining about exec stamping on the env variable.

commit ef53de735fad7fb3036e4bb83824f3b36aac3e9d
Author: Roy Marples <roy@marples.name>
Date:   Mon Aug 11 09:21:07 2008 +0000

    No longer need these.

commit 523f398e5e3bd5dd9876e690cdc0f9e07383772f
Author: Roy Marples <roy@marples.name>
Date:   Mon Aug 11 08:32:52 2008 +0000

    Remove loads of code specific to fork()less systems. dhcpcd no longer backgrounds on these systems, but is a lot lighter.

commit 37e7de18999e968f25b85e30a1aeddbb48f546a6
Author: Roy Marples <roy@marples.name>
Date:   Fri Aug 8 17:55:48 2008 +0000

    DHCP_option -> DHO_option.

commit 33ab3153f10a54273806c05714da995f7645a727
Author: Roy Marples <roy@marples.name>
Date:   Fri Aug 8 17:45:09 2008 +0000

    Allow FQDN to be decoded to userland. Also, don't exclude hostname when sending FQDN.

commit 9e4fa6b47974aea01257a054d038b9136dc24c3b
Author: Roy Marples <roy@marples.name>
Date:   Fri Aug 8 13:47:57 2008 +0000

    We should not make any restrictions on hostname. RFC2131 says that hostname field *could* be fully or partially qualified.

commit caf08c91c9df09401fe1233706122210acb7d07e
Author: Roy Marples <roy@marples.name>
Date:   Fri Aug 8 12:26:05 2008 +0000

    Ensure that hostname does not begin with a .

commit 5248f6ac08646ff73a813a5599bf18acf6937faf
Author: Roy Marples <roy@marples.name>
Date:   Fri Aug 8 11:31:19 2008 +0000

    Skip the trailing . if it exists on the FQDN.

commit be3c2740b76e1e59fa46ce0152c6c6eda1525917
Author: Roy Marples <roy@marples.name>
Date:   Thu Aug 7 11:45:29 2008 +0000

    Heh, need to reserve space for FQDN option length also.

commit af94aa169458928a6cd681b0b46a50ed01cc77d8
Author: Roy Marples <roy@marples.name>
Date:   Thu Aug 7 11:42:14 2008 +0000

    We need to reserve a byte for initial length also.

commit e837a67042f3b3d128068214774d22d0657168ac
Author: Roy Marples <roy@marples.name>
Date:   Thu Aug 7 10:15:15 2008 +0000

    Note that we encode the hostname according to RFC1035. As such, we can't use the system defined MAX hostname length.

commit 272d4bf457075709238ddfe5188276a7090c8827
Author: Roy Marples <roy@marples.name>
Date:   Thu Aug 7 10:04:16 2008 +0000

    Use full dates.

commit 18b8807b59062aec7bbb0c9f75916cebd5fe629e
Author: Roy Marples <roy@marples.name>
Date:   Thu Aug 7 09:45:41 2008 +0000

    Turns out my encoding was correct after all :)
    I've now split it out into it's own function for easier maintenance though.

commit 4971c6237d01d56a1a6fb34df8568682c7638032
Author: Roy Marples <roy@marples.name>
Date:   Wed Aug 6 22:12:37 2008 +0000

    Revert FQDN to ASCII encoding as I cannot find out what RFC4702 really means for encoding :/

commit 0bdf7a9499e336a8c59fa5f918a7e805e7291fbc
Author: Roy Marples <roy@marples.name>
Date:   Wed Aug 6 21:37:34 2008 +0000

    Attempt to fix FQDN encoding.

commit e59e7d4251218e3cab62897dc699eb6b04273eba
Author: Roy Marples <roy@marples.name>
Date:   Wed Aug 6 17:31:04 2008 +0000

    Fix enum name

commit 1f70eea80d24efc9a5ae54dc1ad0a2af7af03f0c
Author: Roy Marples <roy@marples.name>
Date:   Wed Aug 6 12:23:24 2008 +0000

    Remove pointless log message.

commit a6e325fa768765be7f0457c4d9469d193ec8084b
Author: Roy Marples <roy@marples.name>
Date:   Wed Aug 6 09:32:58 2008 +0000

    Don't reset the counters unless we should. dhcpcd should now be fully conformant to RFC2131 and RFC3927 timings.

commit 14b5ef555cd44f42aeb1364a32f17384c525f792
Author: Roy Marples <roy@marples.name>
Date:   Wed Aug 6 08:31:20 2008 +0000

    Allow disable for fqdn option so command line can override config.

commit 7f692d054ca89f52ba7113efb14433445c45dafb
Author: Roy Marples <roy@marples.name>
Date:   Wed Aug 6 08:28:43 2008 +0000

    Remove the MINIMAL define.

commit 6fb09249faab7273fb0bd04e991f38cf07afae0e
Author: Roy Marples <roy@marples.name>
Date:   Tue Aug 5 22:07:08 2008 +0000

    Fix comment.

commit 1674a067737125daf0888ac07b8276b640831392
Author: Roy Marples <roy@marples.name>
Date:   Tue Aug 5 22:06:45 2008 +0000

    Put options in correct order.

commit 3ca9152f440cf5808351d7ee2d11c1f8e2fc5bb9
Author: Roy Marples <roy@marples.name>
Date:   Tue Aug 5 22:06:11 2008 +0000

    Use correct hostname length.

commit a6d8a84a142a44764ccd292c8d468ab4d07c58cc
Author: Roy Marples <roy@marples.name>
Date:   Tue Aug 5 22:04:34 2008 +0000

    Respect hostname length.

commit 6faa58fe5b8fee66179af85a928125728d6d3269
Author: Roy Marples <roy@marples.name>
Date:   Sat Aug 2 22:56:42 2008 +0000

    Turns out that POSIX only requires 31 days max for select. Linux has a hard limit which is hard to work out, so we now use a poll loop again with decreasing timers.

commit 0f150036c930d1ebf68e07a4e7f6bf347fd55211
Author: Roy Marples <roy@marples.name>
Date:   Sat Aug 2 19:59:13 2008 +0000

    Fix compile on Darwin.

commit b2a1ad13706b29461284d8aed7f2cdb3e1c0c382
Author: Roy Marples <roy@marples.name>
Date:   Fri Aug 1 17:42:38 2008 +0000

    Fix dhcp message logging.

commit 50d1f4b48ee9361ff012f8bf1f46e431d0734227
Author: Roy Marples <roy@marples.name>
Date:   Fri Aug 1 14:11:33 2008 +0000

    Add support for mach_absolute_time if on Darwin as that platform does not have clock_gettime. I cannot test this myself, so it may have bugs or not compile.

commit b5329d0e46028d623454756a1da81013474aab65
Author: Roy Marples <roy@marples.name>
Date:   Fri Aug 1 13:15:11 2008 +0000

    Brute force detection of monotonic clock as sysconf is unreliable. Instead rely on clock_gettime failing gracefully with an invalid clockid (which it should do).

commit 6e8e514928d59cb195e6616f1b0eda92baae63ae
Author: Roy Marples <roy@marples.name>
Date:   Fri Aug 1 10:22:44 2008 +0000

    Don't bother waiting on a negative timeout and fix poll -> select error message.

commit 8fd2efb43e5d216dadd6386d7e26663b22f2144f
Author: Roy Marples <roy@marples.name>
Date:   Fri Aug 1 08:41:25 2008 +0000

    Tweak README about monotonic, and improve warning message.

commit f92a185f0ef10af23a273c225a793a6d3c6a4a6e
Author: Roy Marples <roy@marples.name>
Date:   Thu Jul 31 23:46:37 2008 +0000

    select and poll cannot be trusted to respect the timeout - sometimes they timeout just before the value. As such, the timers now decrease instead of being set times to timeout. This makes the code a bit lighter as well - the side effect is we've bloated the logger calls with timeouts as we can no longer log the waiting time in wait_for_fd.

commit 43603fad752ece99c37bf8a763a8e0fd27de4f66
Author: Roy Marples <roy@marples.name>
Date:   Thu Jul 31 23:44:08 2008 +0000

    Document monotonic clock warning and solution.

commit 37a596da190297812137b740303a33d14633cacc
Author: Roy Marples <roy@marples.name>
Date:   Thu Jul 31 23:43:37 2008 +0000

    clock_monotonic now is 0 or 1 depending on if the clock is monotonic. Also, systems that have headers for monotonic but do not claim support now warn about this. You can build dhcpcd to force a monotonic clock.

commit 6b63804804c9a13e453e2c7de9bfd81bf68c3295
Author: Roy Marples <roy@marples.name>
Date:   Thu Jul 31 15:44:07 2008 +0000

    Another usec fix.

commit 89af1d45058a9e08f9074cbbfcd6904ad555c74b
Author: Roy Marples <roy@marples.name>
Date:   Thu Jul 31 13:39:40 2008 +0000

    It looks impossible to send our information to NM using DBus, so just call the NM dispatcher directly.

commit 9ad54d5114520814ca3beab1099de19712b5fd7c
Author: Roy Marples <roy@marples.name>
Date:   Thu Jul 31 12:26:45 2008 +0000

    fd_set is not a struct.

commit af8c4c92e971b8745d6d3589c5ddee0f98153fae
Author: Roy Marples <roy@marples.name>
Date:   Thu Jul 31 12:20:26 2008 +0000

    Always restart ntp even config hasn't changed as it could have been configured correctly and started before dhcpcd, which means it won't actually be talking to the ntp server we want.

commit a302de2f7a05a4904b31c117700e88cbba6d9ae4
Author: Roy Marples <roy@marples.name>
Date:   Thu Jul 31 12:19:14 2008 +0000

    Don't lookup the hostname if we don't have an ip address (INFORM).

commit 73571294afba6f017e7285f5b431401ca07ec7a1
Author: Roy Marples <roy@marples.name>
Date:   Thu Jul 31 12:18:37 2008 +0000

    Clear stop timer for INFORM.

commit f4e3746739ca67ed02ca13f33a9e2181a4243253
Author: Roy Marples <roy@marples.name>
Date:   Thu Jul 31 09:30:42 2008 +0000

    Prefer signal to poll so we avoid any possibilty of a timeval -> int/msecs overflow. We could of course loop msecs / INT_MAX times, but it then gets messy. It also saves around 200 bytes of binary size :)

commit 121c3dce00910839ba94e6cf1448bdfc1f68a5ee
Author: Roy Marples <roy@marples.name>
Date:   Wed Jul 30 21:27:48 2008 +0000

    stderr should be unbuffered by default.

commit ca7d0644df8ace5aada5e88aa585a710c5f13956
Author: Roy Marples <roy@marples.name>
Date:   Wed Jul 30 20:15:49 2008 +0000

    Add correct time bit.

commit 184199bae42394b7bbd5d8ecf9395cdf5b8da764
Author: Roy Marples <roy@marples.name>
Date:   Wed Jul 30 14:28:53 2008 +0000

    Don't log spam carrier or infinite.

commit cb706afcf17bec9bb501cd0d01d60c274ad000ac
Author: Roy Marples <roy@marples.name>
Date:   Wed Jul 30 11:11:08 2008 +0000

    Plug a leak.

commit 0fc7ff3ed64bdf14440e78acae611ae78ff6dc4d
Author: Roy Marples <roy@marples.name>
Date:   Wed Jul 30 11:05:45 2008 +0000

    We should bind to the interface if we can - for the case where we renew and there are two interfaces on the same subnet and the default subnet route goes via the wrong interface.

commit 1e3374e9841aab38b557b7f7f835bb775446028e
Author: Roy Marples <roy@marples.name>
Date:   Tue Jul 29 16:09:56 2008 +0000

    Fix background for forkless systems.

commit 5a2cb5bcaf1cc7709204800129aeb8e203e4bbf3
Author: Roy Marples <roy@marples.name>
Date:   Mon Jul 28 15:43:38 2008 +0000

    Use setlinebuf() at startup instead of calling fflush() for each logger call.

commit 2e0d9c25433d44a26210b938b6d9c81c692b05e0
Author: Roy Marples <roy@marples.name>
Date:   Mon Jul 28 14:35:20 2008 +0000

    Release dhcpcd-4.0.0-rc4

commit 6c8424d347ec65899878a43232f3a93dca395579
Author: Roy Marples <roy@marples.name>
Date:   Mon Jul 28 14:01:17 2008 +0000

    returns

commit 945168dd6ce55a21071ddb5c93ad4f770e70a4e2
Author: Roy Marples <roy@marples.name>
Date:   Mon Jul 28 13:39:57 2008 +0000

    Check chaddr matches our hwaddr if it fits.

commit c9fe909f24c35cfe7d3ab7a89a3f42816ae3da6f
Author: Roy Marples <roy@marples.name>
Date:   Mon Jul 28 13:28:08 2008 +0000

    Don't use the word will so much.

commit eceefd55549c60544e0303f1fb5101bbb4f6d17e
Author: Roy Marples <roy@marples.name>
Date:   Mon Jul 28 13:21:47 2008 +0000

    Add -X, --blacklist option to reject DHCP messages with a matching serverid.

commit 8d1fbeec1a4167bf1cb9d17decbe110f022df34a
Author: Roy Marples <roy@marples.name>
Date:   Mon Jul 28 12:02:24 2008 +0000

    Tart up the mandoc a little, thanks to Thomas Klausner.

commit e514c7dd1102311611a838b9009674959a25547c
Author: Roy Marples <roy@marples.name>
Date:   Mon Jul 28 09:17:07 2008 +0000

    Fix --noipv4ll option from timing out right away.

commit cb4446e8d6f37cab32f0f82760dd64f53c48cbc2
Author: Roy Marples <roy@marples.name>
Date:   Sun Jul 27 18:04:44 2008 +0000

    Inherit DBDIR and LIBEXECDIR from the env.

commit f5c9a8c12b384693ffe9cb496c0eb6cab41c6d41
Author: Roy Marples <roy@marples.name>
Date:   Sun Jul 27 15:36:40 2008 +0000

    Misc fixes and clarify why inform should have a CIDR.

commit 13a2e34a69d434cd3c08b7567c508861dc4ac190
Author: Roy Marples <roy@marples.name>
Date:   Sun Jul 27 10:29:12 2008 +0000

    Release dhcpcd-4.0.0-rc3

commit 535b7c047926169711ce800fdccd8aca48967122
Author: Roy Marples <roy@marples.name>
Date:   Sun Jul 27 10:17:36 2008 +0000

    Don't set a sop timeout when bound to an infinite lease after announcing.

commit 650af7c143e7c471a7b4e4ea470b5da8f8259ec7
Author: Roy Marples <roy@marples.name>
Date:   Sat Jul 26 12:29:02 2008 +0000

    Fix sign error.

commit c24da3cf9c72b0c83a890d5f49f8ba3996ff2e79
Author: Roy Marples <roy@marples.name>
Date:   Sat Jul 26 11:40:39 2008 +0000

    Save some bytes by not using timeradd so much.

commit 69d31ac77a75c466fac9157bf49a17d1eff93986
Author: Roy Marples <roy@marples.name>
Date:   Sat Jul 26 09:28:16 2008 +0000

    Ensure can handle our lease time.

commit 97b9e4cf4ec8360051c27dd456eba8d03b08186a
Author: Roy Marples <roy@marples.name>
Date:   Sat Jul 26 07:32:44 2008 +0000

    Move the seconds waiting calc into the if where it's needed.

commit de01f4bf0a54b6433e6a8b8ee526c275a2db89a9
Author: Roy Marples <roy@marples.name>
Date:   Fri Jul 25 20:35:41 2008 +0000

    Report more accurate seconds.

commit 702a51f3769857d3a3e1d8aab3a238c852932c29
Author: Roy Marples <roy@marples.name>
Date:   Thu Jul 24 21:51:11 2008 +0000

    Fix signal handling and ARP announcing.

commit 024089040018e11f919efb7e81ace44ca564d2e6
Author: Roy Marples <roy@marples.name>
Date:   Thu Jul 24 15:50:19 2008 +0000

    Fix breakage caused by last patch.

commit 318fbafe9e81b35ec47014418c05360448046e0b
Author: Roy Marples <roy@marples.name>
Date:   Thu Jul 24 15:09:33 2008 +0000

    Normalise tv_usecs. Also, send the fd ready back to the main loop so we don't have to re-poll each fd. Saves bytes and is more efficient.

commit 5fa0b31f1008b99c38637cbcccf8233b76e78b9b
Author: Roy Marples <roy@marples.name>
Date:   Thu Jul 24 14:30:36 2008 +0000

    get_time -> clock_monotonic to be more descriptive.

commit b8b4be9a39e91342c91e493ce2e08c00d0177aa8
Author: Roy Marples <roy@marples.name>
Date:   Wed Jul 23 17:06:42 2008 +0000

    Remove #ifdefs to disable specific bits of code. We now build everything - we're small enough :)

commit 482f13c723f9353308e869d006771c717e440cd9
Author: Roy Marples <roy@marples.name>
Date:   Wed Jul 23 16:08:27 2008 +0000

    Release dhcpcd-4.0.0-rc2

commit c929dd3ce5f960891eb3eccab5283ec10de744f9
Author: Roy Marples <roy@marples.name>
Date:   Wed Jul 23 14:21:29 2008 +0000

    If we fail to obtain an IPv4LL address, drop back to search for a DHCP lease.

commit bb4f92a02d0d8b0d59f21c9ac3fd851278456056
Author: Roy Marples <roy@marples.name>
Date:   Wed Jul 23 14:14:53 2008 +0000

    Don't flap the carrier needlessly.

commit 2e86d3d17f9bd7d383583acde98f671f602ddb7f
Author: Roy Marples <roy@marples.name>
Date:   Wed Jul 23 10:32:00 2008 +0000

    Fix mini timeouts and starting ipv4ll when link is down and we try to renew a lease.

commit 07640210f3c230ee648a910154b7b2c5fa7655eb
Author: Roy Marples <roy@marples.name>
Date:   Wed Jul 23 08:45:04 2008 +0000

    Typo

commit 288959e423909d7d895aae118cbd0240bcf904e4
Author: Roy Marples <roy@marples.name>
Date:   Tue Jul 22 12:49:26 2008 +0000

    Minor updates.

commit 21232258e314b634ac52be2102fd828614103d9b
Author: Roy Marples <roy@marples.name>
Date:   Tue Jul 22 09:10:55 2008 +0000

    Release dhcpcd-4.0.0-rc1

commit d59ecd08c8f2f69349481d8483822379d6b996bd
Author: Roy Marples <roy@marples.name>
Date:   Tue Jul 22 06:58:11 2008 +0000

    Always expire lease on probe failure. We should do this as the LAN we hot swap too could deny our IPv4LL probes are a while and this is safer.

commit b6db29122a7eec62654102ddb5947253fedb9c4b
Author: Roy Marples <roy@marples.name>
Date:   Mon Jul 21 21:48:17 2008 +0000

    Fix valgrind errors, and report correct type.

commit 681b6eeac74c38993db4ca3bb66cb30cad81b278
Author: Roy Marples <roy@marples.name>
Date:   Mon Jul 21 21:30:48 2008 +0000

    EXPIRE on NAK and fix valgrind errors.

commit e511f2a4ff91cde777f31bdf52fb2c0536159a94
Author: Roy Marples <roy@marples.name>
Date:   Mon Jul 21 16:21:53 2008 +0000

    More timer fixes. Also, when a handle function returns 1, don't wait for a packet as we should drop through to the handle_timeout. Makes the code a bit cleaner.

commit 61490808713ef584c0ed0779d3bebc2ab4980aae
Author: Roy Marples <roy@marples.name>
Date:   Mon Jul 21 14:30:07 2008 +0000

    Better to say which OS's have closefrom.

commit f242783d9ed817923102dbce490a6cec1295d78f
Author: Roy Marples <roy@marples.name>
Date:   Mon Jul 21 14:24:18 2008 +0000

    Darwin uses --rpath instead of -Wl,-rpath= - bummer.

commit e7503fec222f8244de607f216cf7abe5000d13fc
Author: Roy Marples <roy@marples.name>
Date:   Mon Jul 21 14:05:35 2008 +0000

    OK, the loop was caused by the initial carrier timeout. Also, always log carrier waiting, but don't spam the console when backgrounding.

commit b27bf5f663094250a4843249e1db97c5d951238b
Author: Roy Marples <roy@marples.name>
Date:   Mon Jul 21 13:20:59 2008 +0000

    Attempt to fix dhcpcd going into a tight infinite loop after getting an IPv4LL address.

commit 66a74fc3510732b5d46cf83b30248b9bcf6ef405
Author: Roy Marples <roy@marples.name>
Date:   Mon Jul 21 10:32:16 2008 +0000

    Fix compile on OSX.

commit 242f97be36e14e210af7136e6e9f43bbe397adef
Author: Roy Marples <roy@marples.name>
Date:   Mon Jul 21 06:17:08 2008 +0000

    Don't log waiting for carrier when backgrounding.

commit 03fd6c72e4d8f1e72ee8842d6156cd1b9ad15b2a
Author: Roy Marples <roy@marples.name>
Date:   Mon Jul 21 06:12:33 2008 +0000

    We should timeout when in background for IPv4LL.

commit c1529e746dacc6cc9c2cd6e2dafa2b099716a69b
Author: Roy Marples <roy@marples.name>
Date:   Mon Jul 21 06:02:28 2008 +0000

    Actually no, just the probing state. We should defend our announces :)

commit 7f00e32c0c0d9e487cdb52172428f9ec3e85698d
Author: Roy Marples <roy@marples.name>
Date:   Mon Jul 21 05:40:24 2008 +0000

    We should only defend when not in the probing or announcing state.

commit bae25b133bc5421dce1a92fcd404fa6e8ce68101
Author: Roy Marples <roy@marples.name>
Date:   Sun Jul 20 19:33:27 2008 +0000

    Remove the fork() test as compile hosts will normally have it, making it redundant.

commit ffd0e18fa7103cb7ade72e29b75aa5f4197c9a59
Author: Roy Marples <roy@marples.name>
Date:   Sun Jul 20 16:21:53 2008 +0000

    fork()less fixes.

commit f864457988a8696da5c5626db9eece94bb95ad64
Author: Roy Marples <roy@marples.name>
Date:   Sun Jul 20 15:56:01 2008 +0000

    Don't re-up the interface - user may have brought it down.

commit 29584e650e566bdf0bb6e18f2a034aa48dda2726
Author: Roy Marples <roy@marples.name>
Date:   Sat Jul 19 20:52:17 2008 +0000

    Quick fix.

commit 4cce18b82448cd69519cddb8ec99368a0c014a84
Author: Roy Marples <roy@marples.name>
Date:   Sat Jul 19 20:11:03 2008 +0000

    Style.

commit ec941659afe0075349cf512069fe0546999768db
Author: Roy Marples <roy@marples.name>
Date:   Sat Jul 19 20:04:27 2008 +0000

    Fix the timeouts some more - complicated stuff!

commit e056cd1ff7442d2eaf22443dad3b96d9d5ed92b1
Author: Roy Marples <roy@marples.name>
Date:   Sat Jul 19 17:06:54 2008 +0000

    Fix IPv4LL when backgrounding.

commit 991f1ad654cbe6cc16117d8a719c00f62ffb4d3c
Author: Roy Marples <roy@marples.name>
Date:   Sat Jul 19 14:14:40 2008 +0000

    No need to check for this error code.

commit ac05379f53122d78cec66b148bb64603f68b1078
Author: Roy Marples <roy@marples.name>
Date:   Sat Jul 19 14:04:36 2008 +0000

    When daemonised, don't set bound state.

commit 90b99acc911550387e3dcf62c930ae94bf3952ce
Author: Roy Marples <roy@marples.name>
Date:   Sat Jul 19 14:04:18 2008 +0000

    Don't report deleteing a non existant address on FreeBSD.

commit e64cdaa02911b3979ee5034166e8c9d896f5112b
Author: Roy Marples <roy@marples.name>
Date:   Fri Jul 18 23:31:34 2008 +0000

    Fix IPv4LL

commit 70a88cf1145cd2ff471ec2d5f33ebb937db4e4d1
Author: Roy Marples <roy@marples.name>
Date:   Fri Jul 18 22:00:18 2008 +0000

    Rework the state engine around the timers better. timeout is now used for re-transmissions and stop is used to change state.

commit 492397c3e0ef53294b6a5bf1b2c78f61ac5797c2
Author: Roy Marples <roy@marples.name>
Date:   Fri Jul 18 16:42:47 2008 +0000

    Add log_dhcp so we log server ip and name if available. Saves a few bytes.

commit 3835fbec37c4d9e851c7d3123db9e3044179ad22
Author: Roy Marples <roy@marples.name>
Date:   Fri Jul 18 13:43:25 2008 +0000

    Try and stop a flapping timeout.

commit 833d43a51343862665655e561599c0e9eddae56c
Author: Roy Marples <roy@marples.name>
Date:   Fri Jul 18 12:23:45 2008 +0000

    We could return from a few more states here.

commit da7975276c586e3881d8771449055e1ff40978d3
Author: Roy Marples <roy@marples.name>
Date:   Fri Jul 18 12:06:35 2008 +0000

    Add an exit timer so that carrier changing does not cause timeouts to flap. Also, fix renewals entering the server address.

commit 0883583f6b71c9bf5d30e2724436812efab3b83b
Author: Roy Marples <roy@marples.name>
Date:   Fri Jul 18 09:17:52 2008 +0000

    Move -X to -B and give it a long option. This now complements the --background option.

commit d1159955ac35eddb1cbbb13b87353cb8c0f31a36
Author: Roy Marples <roy@marples.name>
Date:   Fri Jul 18 09:11:35 2008 +0000

    Move the immediate background flag to 'b'

commit 43b27a73b38a22ec1a64745574fc1128d007b26a
Author: Roy Marples <roy@marples.name>
Date:   Fri Jul 18 09:03:43 2008 +0000

    Fix timeouts around carrier a little. We may need to introduce a third timer just for the userland timeout as it may flap if the carrier goes up/down a lot.

commit 40cdc41f39816dac4078a89e33da23fdb910b97c
Author: Roy Marples <roy@marples.name>
Date:   Thu Jul 17 14:03:45 2008 +0000

    Fix realpath when dhcpcd is called from a $PATH search.

commit 0a07ea153ce28f3e3b85127314e9cd6ae7c9b7d5
Author: Roy Marples <roy@marples.name>
Date:   Thu Jul 17 13:26:38 2008 +0000

    Use proper exit codes.

commit 9576e90c178a6a8a5461d7c969b2206fec752015
Author: Roy Marples <roy@marples.name>
Date:   Thu Jul 17 12:26:58 2008 +0000

    Fix IPv4LL netmask and broadcast on big endian.

commit 20d23e16d21c43e90c5de12cf83dff54310b6f5e
Author: Roy Marples <roy@marples.name>
Date:   Thu Jul 17 12:26:32 2008 +0000

    No need to cast

commit 33cb9a0ad156f0323ee6a0b724ce69b82c3da47f
Author: Roy Marples <roy@marples.name>
Date:   Thu Jul 17 10:36:42 2008 +0000

    Move the renew reset code futher down where it makes more sense.

commit b1856d31b5126763567c52ff8f5ae17598f043ac
Author: Roy Marples <roy@marples.name>
Date:   Thu Jul 17 08:36:47 2008 +0000

    Reset message counter on renew request.

commit ce41d01be5131c90b5da1130bddbf32fa80108da
Author: Roy Marples <roy@marples.name>
Date:   Thu Jul 17 08:27:17 2008 +0000

    Close the link fd at exit.

commit ad5f2db68ea7ef42e5b723f43a0729cb12f40408
Author: Roy Marples <roy@marples.name>
Date:   Wed Jul 16 22:27:56 2008 +0000

    Fix warning.

commit a26af49123674044a0216fbae83bec30db5f8ab3
Author: Roy Marples <roy@marples.name>
Date:   Wed Jul 16 22:23:07 2008 +0000

    Add support for link carrier detection. For Linux this involved a big change to the netlink code to add callbacks, for BSD just an extra function. We also have an option not to wait for a DHCP lease and fork right away - useful for startup scripts.

commit c4d4ee1358061ff620679a51b0d620ce4fa1326b
Author: Roy Marples <roy@marples.name>
Date:   Wed Jul 16 08:10:41 2008 +0000

    fd -> raw_fd

commit c969e56974e13ff1fa3204242ce5b2b43e829ad5
Author: Roy Marples <roy@marples.name>
Date:   Tue Jul 15 22:09:21 2008 +0000

    Always enter the RENEW_REQUESTED state on signal or fd error as this state should then do the right thing.

commit 19a81c6a2bb065590be03705d75512fd86749589
Author: Roy Marples <roy@marples.name>
Date:   Tue Jul 15 19:16:58 2008 +0000

    Close socket on error and signal so that they get refreshed.

commit d67c3bbb4c4b2f7b34751cb53afc0a6595c2c484
Author: Roy Marples <roy@marples.name>
Date:   Tue Jul 15 15:06:09 2008 +0000

    Don't log about trying to use a non existant lease.

commit 410016e1dc2ca358820e1ecd8823222d4b10987b
Author: Roy Marples <roy@marples.name>
Date:   Tue Jul 15 14:59:00 2008 +0000

    Ensure that IPv4LL address is one :)

commit 5cf7ba77c12b6b10155586da247d416527b66bc1
Author: Roy Marples <roy@marples.name>
Date:   Tue Jul 15 00:53:30 2008 +0000

    Fix timeout.

commit b7979d9e55a03f1eb3bc6d7de2e7fadde0b24011
Author: Roy Marples <roy@marples.name>
Date:   Mon Jul 14 20:51:41 2008 +0000

    If renewing an IPV4LL address, re-enter the probing state of just exiting.

commit 8709c115ea79f9adb54fadc564a88292da0933b5
Author: Roy Marples <roy@marples.name>
Date:   Sun Jul 13 08:38:08 2008 +0000

    Remove some warnings when removing features.

commit c69fc1f8827d153e8eb14673b94132d95ea3ee47
Author: Roy Marples <roy@marples.name>
Date:   Sat Jul 12 17:54:21 2008 +0000

    Typo.

commit ddfae9f2bd771b3f457f803156ddfb382d905aa3
Author: Roy Marples <roy@marples.name>
Date:   Sat Jul 12 17:38:42 2008 +0000

    BSD systems auto gratuitous ARP when configured with an address, so no need to send 2 announcements, just the one.

commit 9a7c3c8ed957d3e8ea4a6e92add49e21db0b003c
Author: Roy Marples <roy@marples.name>
Date:   Sat Jul 12 17:14:45 2008 +0000

    Allow a user defined enter and exit hook instead of just a single hook.

commit 7e7d301b8f5d0f72f78790aabc2eb3325d88bfc9
Author: Roy Marples <roy@marples.name>
Date:   Sat Jul 12 16:47:05 2008 +0000

    Optimize the random calc for timeout.

commit 9cb2d1e701b8fc64cdf471bfca56f3dc668ce9f1
Author: Roy Marples <roy@marples.name>
Date:   Sat Jul 12 12:51:04 2008 +0000

    It seems that every arp application does not pad to 60 bytes. So either they are all not RFC conformant (doubtful) or their leaving it to something else. As such, dhcpcd will not pad either, so it's less code :)

commit c760c47722264f618bd736fe96cf115653bcc1f0
Author: Roy Marples <roy@marples.name>
Date:   Sat Jul 12 01:03:18 2008 +0000

    Typo

commit e6f5c7d3b97bfb9ace521d972e6fa1d06f308805
Author: Roy Marples <roy@marples.name>
Date:   Sat Jul 12 00:49:59 2008 +0000

    Fix gratuitous ARP with fork()less systems.

commit a6c4cbb9c137ed9fc61907240cf25794b39417de
Author: Roy Marples <roy@marples.name>
Date:   Sat Jul 12 00:49:34 2008 +0000

    We should use ETHERMIN.

commit 925154cc9c7ef506d7f7cf71256b40c100141b74
Author: Roy Marples <roy@marples.name>
Date:   Sat Jul 12 00:29:32 2008 +0000

    Respect ipv4ll timeouts more.

commit 140e769ec2748b804aa8116cfd42bd78f3ffe7e1
Author: Roy Marples <roy@marples.name>
Date:   Sat Jul 12 00:27:48 2008 +0000

    We shoudln't have to disable timeout.

commit 6c068eebe752ca06eb1614801e9535a803cfc86a
Author: Roy Marples <roy@marples.name>
Date:   Fri Jul 11 11:24:18 2008 +0000

    Improve ARP conflict.

commit 0e94b2aca5b57b1d9518750dda2b5e5aa83bf5a0
Author: Roy Marples <roy@marples.name>
Date:   Fri Jul 11 10:13:23 2008 +0000

    Save a few bytes here. Also, fill with 0 so that we mirror the BSD gratuitous ARP when adding an address.

commit da2080fd82a91cf77eccdddb5c5c80fd7cb92562
Author: Roy Marples <roy@marples.name>
Date:   Fri Jul 11 09:01:04 2008 +0000

    Remove superfluous brackets.

commit 132349d53410932cb59f11178e7bfbe9ec0efcaf
Author: Roy Marples <roy@marples.name>
Date:   Fri Jul 11 08:48:35 2008 +0000

    Use timeval usecs instead of secs for greater randomistation.

commit b54b36631ca607bb12e4408bc7714df01d7b709f
Author: Roy Marples <roy@marples.name>
Date:   Fri Jul 11 08:31:48 2008 +0000

    If time overflows, we should wait again.

commit 19354f0b7456c8e3aafb652ec2b5adb0bf9e7713
Author: Roy Marples <roy@marples.name>
Date:   Thu Jul 10 18:39:34 2008 +0000

    Fix timeval -> poll conversion.

commit f2450d3493f9ff6ecb9268e88f003f134f2d49c3
Author: Roy Marples <roy@marples.name>
Date:   Thu Jul 10 16:06:29 2008 +0000

    Fix compile for fork()less systems.

commit a79cb97ff309b5ac7a1184ae484d2efdddd67a0c
Author: Roy Marples <roy@marples.name>
Date:   Thu Jul 10 15:36:19 2008 +0000

    Report more send_arp breakage.

commit 3837265a409ba456e4e69da7a4803210cba32aea
Author: Roy Marples <roy@marples.name>
Date:   Thu Jul 10 15:32:27 2008 +0000

    Report errors sending ARP requests.

commit dca5f15979da882c8d2b3fdf471c3410f64f996a
Author: Roy Marples <roy@marples.name>
Date:   Thu Jul 10 15:32:03 2008 +0000

    Fix sending of ARP packets.

commit 6c738c7f9efef4523256517ad63b272c26f5e4ce
Author: Roy Marples <roy@marples.name>
Date:   Thu Jul 10 15:31:37 2008 +0000

    Style.

commit 60aa832d5c0655732c9ca4865fd6bd500dfbfae0
Author: Roy Marples <roy@marples.name>
Date:   Thu Jul 10 13:07:51 2008 +0000

    Tweak define comments.

commit fa581d1cdcd4c797fbb79e12e4f9c5ecb7f5d35a
Author: Roy Marples <roy@marples.name>
Date:   Thu Jul 10 13:06:14 2008 +0000

    No need for these defines anymore.

commit 5fc866d10eaa2204c275ec358706ea1e4cebd591
Author: Roy Marples <roy@marples.name>
Date:   Thu Jul 10 12:54:15 2008 +0000

    Restore the error checking on fd's.

commit f1b0b93011793b1a816ac2659fe0536b7f9cb906
Author: Roy Marples <roy@marples.name>
Date:   Thu Jul 10 12:53:52 2008 +0000

    ignore _dhcpcd.c

commit 3459b19014ee166ae9a8bb945ffbe9ac3454edb5
Author: Roy Marples <roy@marples.name>
Date:   Thu Jul 10 11:55:10 2008 +0000

    Allow ARP_REQUESTS through the filter as well so we work with conflicting IPV4LL probes. This requires the timeout to work of a time instead of a timeout.

commit f5f8e223833e1d13d157d465d3626ea6a4bba67c
Author: Roy Marples <roy@marples.name>
Date:   Wed Jul 9 23:26:36 2008 +0000

    Save a few bytes by avoiding memset.

commit 23d8d9ce8aeac7dd87e3b4b65b929083ab97e7d7
Author: Roy Marples <roy@marples.name>
Date:   Wed Jul 9 22:41:49 2008 +0000

    Ensure that our ARP messages are at least 64 bytes so we're RFC compliant.

commit 86a7f0f304fe665d364d78e99ad11d9e8d6950fa
Author: Roy Marples <roy@marples.name>
Date:   Wed Jul 9 21:17:19 2008 +0000

    Set the renew->rebind timer.

commit 378b0716112fab6b8e72843ef0f9c47c8ba4c089
Author: Roy Marples <roy@marples.name>
Date:   Wed Jul 9 21:15:26 2008 +0000

    Report the reason we exec the script and don't error on deleting non existant routes on Linux.

commit a1a96852b718c88b13070375fa215e69d6a664b8
Author: Roy Marples <roy@marples.name>
Date:   Wed Jul 9 14:46:29 2008 +0000

    Document the pidfile.

commit 21d9edf8f35349b0755e7c08c3b82e064ef5bb47
Author: Roy Marples <roy@marples.name>
Date:   Wed Jul 9 10:24:17 2008 +0000

    removing -> deleting and don't report error on routes already deleted.

commit fb91c8af2a3311923cb1a38c85f04e1e7782ed0a
Author: Roy Marples <roy@marples.name>
Date:   Wed Jul 9 10:20:36 2008 +0000

    And turn this into a function so save a few bytes.

commit 52a9906822ea14727c8f4dad4448bf41326cb136
Author: Roy Marples <roy@marples.name>
Date:   Wed Jul 9 10:16:12 2008 +0000

    And report errors.

commit e2b239fcfe67318ec48da446e1f979201bf7d6c7
Author: Roy Marples <roy@marples.name>
Date:   Wed Jul 9 10:12:28 2008 +0000

    Report address removal.

commit 7fa02284d45e7c36fe7012c360fd7835d973beb1
Author: Roy Marples <roy@marples.name>
Date:   Wed Jul 9 07:46:55 2008 +0000

    Add a macro to change a route.

commit d31af5110f301c20859d2572850e4e5b7227e532
Author: Roy Marples <roy@marples.name>
Date:   Wed Jul 9 06:50:31 2008 +0000

    Add more error checking if the link was taken down or ip addresses removed - if this happens we reset to the init state.

commit a30b3a9fbd6ad8eed29de9408f81a469e6f04e4f
Author: Roy Marples <roy@marples.name>
Date:   Tue Jul 8 20:56:15 2008 +0000

    Optimize.

commit 71bb037b1c50eaf60e613f6432d59a3e65f00d15
Author: Roy Marples <roy@marples.name>
Date:   Tue Jul 8 16:43:35 2008 +0000

    Fix env var ms_classless_static_routes

commit fce166cfdb38223fa7a4b3e78c976d1b2499e93e
Author: Roy Marples <roy@marples.name>
Date:   Tue Jul 8 16:08:11 2008 +0000

    beta9

commit 84e42b79ba8d1583b561ea2734f8830667cefbe4
Author: Roy Marples <roy@marples.name>
Date:   Tue Jul 8 16:05:26 2008 +0000

    Err, I mean X, not Z :)

commit 4486a4f8a0019f9fe9bb669393d83c0ac0f811e3
Author: Roy Marples <roy@marples.name>
Date:   Tue Jul 8 16:02:51 2008 +0000

    Move the --nodaemonize option from K to Z so we don't conflict with SuSE custom dhcpcd patch, and allow removal of option requests in the configuration file.

commit 1a022c5560df3d265884b573915a6f3620a17b53
Author: Roy Marples <roy@marples.name>
Date:   Tue Jul 8 15:59:53 2008 +0000

    Style

commit 3f489a9a4d460cec161bd285f99b8639df3b9f3e
Author: Roy Marples <roy@marples.name>
Date:   Sat Jul 5 22:12:21 2008 +0000

    Show the correct probe address.

commit 1c4b10e90c0f648cd4f7130b326cdfe43761eb38
Author: Roy Marples <roy@marples.name>
Date:   Sat Jul 5 18:41:25 2008 +0000

    We need to link to the right libc if installing in / on NetBSD.

commit 31e182aa7a943f941e52baa6353600c112a32db1
Author: Roy Marples <roy@marples.name>
Date:   Sat Jul 5 13:40:19 2008 +0000

    dhcpcd-4.0.0-beta8

commit c6331b9b95ce2b7cac172647667fe60f82a0b7af
Author: Roy Marples <roy@marples.name>
Date:   Fri Jul 4 13:58:31 2008 +0000

    Set the script correctly with MINIMAL.

commit 7012803b9fd0f3de63290a200d6e4e1de163a461
Author: Roy Marples <roy@marples.name>
Date:   Fri Jul 4 13:30:50 2008 +0000

    Encourage use of CPPFLAGS over CFLAGS for extra defines.

commit 09da00df6426394a56cd188d901241a7781ff458
Author: Roy Marples <roy@marples.name>
Date:   Fri Jul 4 13:20:20 2008 +0000

    Use ifnames of less than 4 bytes in the IAID as well.

commit b953fded8ba0795e58a6a49b8cd4ecccce1ca2c8
Author: Roy Marples <roy@marples.name>
Date:   Fri Jul 4 13:02:33 2008 +0000

    Remove ENABLE_DUID and introduce MINIMAL, which removes all non essential userland options, knocking around 6k off the binary size.

commit 4b8e7d3f26b2ce7dc53b519388b60b761783a633
Author: Roy Marples <roy@marples.name>
Date:   Fri Jul 4 12:13:02 2008 +0000

    We should WARN on NAK.

commit a3f53aeaff648137dd0314b3434c876036304f5b
Author: Roy Marples <roy@marples.name>
Date:   Fri Jul 4 12:08:51 2008 +0000

    Send LOG_INFO to the console by default so users know what it's doing a little more. This can be disabled with the new -q, --quiet option.

commit 69175affefa389110a65434930a4e749f9600231
Author: Roy Marples <roy@marples.name>
Date:   Fri Jul 4 12:07:48 2008 +0000

    Better english.

commit 77770806adc13d9834c1aaa144ab606496f75e7e
Author: Roy Marples <roy@marples.name>
Date:   Fri Jul 4 08:34:56 2008 +0000

    We should inform the user we're checking the address ourselves.

commit 217e8e835e6f407fb992d70705cb1d99efe075c6
Author: Roy Marples <roy@marples.name>
Date:   Thu Jul 3 17:07:24 2008 +0000

    Cleaner fix for working with PCC.

commit 22a95a986d1e820642cf0ee3ef4f47e3b7053d81
Author: Roy Marples <roy@marples.name>
Date:   Thu Jul 3 09:24:09 2008 +0000

    Fix the ClientID and only parse it once.

commit 1d49ff6f18d7e5b8dffb71bb1a608568933f2aec
Author: Roy Marples <roy@marples.name>
Date:   Thu Jul 3 00:12:57 2008 +0000

    Work around PCC not supporting the __packed__ attribute on structures. dhcpcd now works fully with PCC on NetBSD-4.99.67.

commit 7264b4772f41fb07bb258f00e434f67660e8afb0
Author: Roy Marples <roy@marples.name>
Date:   Wed Jul 2 19:05:25 2008 +0000

    If starting daemonised (THERE_IS_NO_FORK) then don't send any signals.

commit 261eb2d41fd97a4bdfb04eac99af3c693701157b
Author: Roy Marples <roy@marples.name>
Date:   Wed Jul 2 17:05:41 2008 +0000

    Remove previous toggles for classid, clientid, userclass and vendor - they call *could* be required for DHCP. Add a string parser and process all user strings through it.

commit 0951a1c048ca5da7f75c75cccaef8b538e511f11
Author: Roy Marples <roy@marples.name>
Date:   Wed Jul 2 11:13:10 2008 +0000

    Support the root dynmanic linker on NetBSD, so we work without /usr mounted.

commit 0364eaca263c68cc1b3df82732bd12d1e45dea18
Author: Roy Marples <roy@marples.name>
Date:   Wed Jul 2 10:29:24 2008 +0000

    Ensure that we have at least 2 ocets.

commit 3aa5b6ed1ad9d02968c9ab1baf1b4f88d3ec5e1c
Author: Roy Marples <roy@marples.name>
Date:   Wed Jul 2 09:48:53 2008 +0000

    Fix ClientID parsing.

commit 7896eaf0234c3c6ae260d849ee5a3c7853d9a94e
Author: Roy Marples <roy@marples.name>
Date:   Tue Jul 1 12:57:16 2008 +0000

    Add copyright to --version.

commit 5dd248bb688d479b791792024b3abe9a24982e7c
Author: Roy Marples <roy@marples.name>
Date:   Mon Jun 30 18:54:31 2008 +0000

    Ensure we work if ARP compiled out but requested.

commit d65fd32df0506c849262e1e63611c134db267745
Author: Roy Marples <roy@marples.name>
Date:   Mon Jun 30 16:35:41 2008 +0000

    Allow ClassID to be configured.

commit 413724d05e63d58a28a9a26d415d30e01c8b749d
Author: Roy Marples <roy@marples.name>
Date:   Mon Jun 30 16:27:15 2008 +0000

    Allow clientid to be configured.

commit 79f58b5d886cef4a517845062d5ba1aaae9ef421
Author: Roy Marples <roy@marples.name>
Date:   Mon Jun 30 16:15:29 2008 +0000

    Allow userclass to be compiled out.

commit 79d4dc886900653fd38b6d7ab36009403dee370b
Author: Roy Marples <roy@marples.name>
Date:   Mon Jun 30 16:14:56 2008 +0000

    Cleaner code when ARP is disabled.

commit 757520c586a98cdea4e1ef571cd9e448f9f9c72b
Author: Roy Marples <roy@marples.name>
Date:   Mon Jun 30 16:02:56 2008 +0000

    Add support for vendor encapsulated options. Also, MINIAL define now disables all configurable options.

commit a72cb83891d74115890ee40761d4cd6e87cbf689
Author: Roy Marples <roy@marples.name>
Date:   Mon Jun 30 15:08:19 2008 +0000

    Add -K, --nodaeomise option so dhcpcd can run in the foreground without debugging. This is useful for running under a debugger or network manager.

commit 215dfd335b62e7f3372e5880f7e3306aa0f08a9a
Author: Roy Marples <roy@marples.name>
Date:   Mon Jun 30 15:07:23 2008 +0000

    Fix timeout when we aren't daemonising.

commit 944bb80ec50e1264b4c1b3df1508176ce73e5418
Author: Roy Marples <roy@marples.name>
Date:   Mon Jun 30 14:15:03 2008 +0000

    We need to copy out the script from the config file as it's no longer a constant var.

commit 0f4f8b4a972698ba3aa7371dbcf2a86a16d04aaf
Author: Roy Marples <roy@marples.name>
Date:   Sun Jun 29 19:48:25 2008 +0000

    Fix some valgrind errors.

commit abc5592709affc9ec3f88ec786b624b69ee9f28f
Author: Roy Marples <roy@marples.name>
Date:   Sun Jun 29 18:28:19 2008 +0000

    Save a few bytes by treating some strings like DHCP options, having the first byte as the length.

commit 1f96a7d73e5e735ffe3a34ddb892abda5cd7eaae
Author: Roy Marples <roy@marples.name>
Date:   Sun Jun 29 10:55:21 2008 +0000

    Fix hwaddr_aton

commit 7f90106a9eb27ce6decd9ae6e7bc015eb9cdd949
Author: Roy Marples <roy@marples.name>
Date:   Sat Jun 28 13:50:17 2008 +0000

    Fix renewing.

commit 38ff8d9250b1a6efbf922ce05ade196d98975563
Author: Roy Marples <roy@marples.name>
Date:   Fri Jun 20 15:37:15 2008 +0000

    Request as much as the packet as we can with buggy BPF filters.

commit 8094302cf1393f570cad30fa24b90ebf27a86ff0
Author: Roy Marples <roy@marples.name>
Date:   Fri Jun 20 06:56:31 2008 +0000

    beta7

commit 5d32e1fb3d998d114eaa634cf41070320e048711
Author: Roy Marples <roy@marples.name>
Date:   Fri Jun 20 06:47:15 2008 +0000

    Optimize the state engine a little and fix timeval -> poll timeout calculation.

commit b480fb715ec0dc041f8adb1384a0189594ddfa86
Author: Roy Marples <roy@marples.name>
Date:   Thu Jun 19 21:26:41 2008 +0000

    whitespace

commit 0ecbf7fe59300ab41ec717b9da13215ec13eb947
Author: Roy Marples <roy@marples.name>
Date:   Thu Jun 19 15:58:02 2008 +0000

    Add metric= to our env, #93 thanks to Tobias Volk.

commit 6ed8985371b5ab520f70242c9395a275d9bc26fd
Author: Roy Marples <roy@marples.name>
Date:   Wed Jun 18 10:23:16 2008 +0000

    Allow LIBEXECDIR to inherit from env.

commit 3ad2e247c927d8700db72b3f9d9363168ae808bb
Author: Roy Marples <roy@marples.name>
Date:   Wed Jun 18 09:59:33 2008 +0000

    Man page fixes.

commit 847a70948cc336d093cd7bcb7e2830ab80edd314
Author: Roy Marples <roy@marples.name>
Date:   Wed Jun 18 09:27:08 2008 +0000

    Re number the hook scripts to give more space.

commit 4573309ce8651dfcf8706027aa9db0003e87d64e
Author: Roy Marples <roy@marples.name>
Date:   Wed Jun 18 09:05:04 2008 +0000

    De-configure when rebinding fails.

commit 9e917fed88358aac76bdce4f565ddd9117e4eb6f
Author: Roy Marples <roy@marples.name>
Date:   Fri Jun 13 10:10:00 2008 +0000

    Disable the requesting of MTU by default as there's a lot of buggy servers out there. Plus we maybe trying to use jumbo frames.

commit fa1d32892283c03053ffad10e6137cf3ff6d69b7
Author: Roy Marples <roy@marples.name>
Date:   Fri Jun 13 09:55:18 2008 +0000

    Add 05-mtu hook so we respect the desired MTU on networks.

commit 16aa95ba9e5242900e7ede905848f9948b1fd328
Author: Roy Marples <roy@marples.name>
Date:   Fri Jun 13 08:31:21 2008 +0000

    Clear the timer and counters at the start of the timeout failed function so we don't loop.

commit df2de15107e89746bcf80d972093e4cb73c08ec4
Author: Roy Marples <roy@marples.name>
Date:   Thu Jun 12 08:57:29 2008 +0000

    On NAK, clear the timer and lease so we init correctly.

commit aabb7df95fddaddbf7df11820ca2fe85fecb3846
Author: Roy Marples <roy@marples.name>
Date:   Wed Jun 11 09:47:37 2008 +0000

    Don't flush addresses on startup anymore. Also, fix inform leasetimes.

commit bd586e4dc6bb3035ce5ef12d2f21c0776b7b1945
Author: Roy Marples <roy@marples.name>
Date:   Wed Jun 11 08:43:08 2008 +0000

    We don't use this var anymore.

commit eb942e0abce48272767404ca604573d3ea674302
Author: Roy Marples <roy@marples.name>
Date:   Tue Jun 10 22:23:57 2008 +0000

    Remove the signal array stack as our pipe handling should be secure enough now. Also, move the normalize close_on_exec and setting non block.

commit 7349c9bf8cf950dfb92d53f9a860f34b33d97229
Author: Roy Marples <roy@marples.name>
Date:   Tue Jun 10 21:47:39 2008 +0000

    Remove KEEPADDRESS as it makes no sense right now. Also, fix adding --request without an address.

commit 92a3dcc2539eadd6a55a4f1fee3bd6c3b71d9255
Author: Roy Marples <roy@marples.name>
Date:   Tue Jun 10 09:33:13 2008 +0000

    If test works ensure we return 0 to userland.

commit 2e34b9ce74f2d576557d3bf97179e486817b67e7
Author: Roy Marples <roy@marples.name>
Date:   Tue Jun 10 06:50:01 2008 +0000

    Timeout on negative timeouts.

commit b6c87f0e3a0e7028654a8d78b3d1f5054740bf62
Author: Roy Marples <roy@marples.name>
Date:   Mon Jun 9 18:29:33 2008 +0000

    Fix compile for NO_FORK users.

commit 785fb9f2b2a4531d1fa3f9190003a33a2f9aa813
Author: Roy Marples <roy@marples.name>
Date:   Mon Jun 9 08:21:28 2008 +0000

    Fix compile.

commit 06a9c86a803e0f7636b78d5b1db68f77fc2922be
Author: Roy Marples <roy@marples.name>
Date:   Mon Jun 9 06:19:34 2008 +0000

    We now support IPv4LL fully - until someone points out we don't ;)

commit 5fb580a7713ca5bca9b7238a57977f1d739cdd46
Author: Roy Marples <roy@marples.name>
Date:   Sun Jun 8 20:07:54 2008 +0000

    Re-write the client state engine around a simple timer instead of complex loops. Use the re-transmission times as per RFC 2131. Integrate the ARP handling code in the new engine so we are able to defend our IPV4LL address whilst negotiating a DHCP lease. This also means we're able to bind the address and fork BEFORE waiting to send announcements which makes us appear faster on the commandline.

commit 27e5226dc33c91862912b03c1f3d9162579dbcac
Author: Roy Marples <roy@marples.name>
Date:   Sun Jun 8 06:50:42 2008 +0000

    Typo.

commit fd34289e216f45570c6c2f5af94863e19be0db53
Author: Roy Marples <roy@marples.name>
Date:   Sat Jun 7 00:15:14 2008 +0000

    Bump to beta6 for internal testing and move UNCONST to common.h

commit 7c45fb9338092de7ca988f6abbecd4b0d54d76cc
Author: Roy Marples <roy@marples.name>
Date:   Sat Jun 7 00:14:16 2008 +0000

    We should test a specific fd instead of index 0 in a structure.

commit 751e2f818d970ca55fc094647df3ab9345ad3166
Author: Roy Marples <roy@marples.name>
Date:   Sat Jun 7 00:11:17 2008 +0000

    Add a function to test if a fd has data to be read.

commit fedb3da0be34b47246d663e6ff55a7e0937515c0
Author: Roy Marples <roy@marples.name>
Date:   Sat Jun 7 00:10:15 2008 +0000

    Increase the default timeout to 30 seconds to allow 3 RFC conformant re-transmissions + 2 seconds grace.

commit cb5148cebd2c57f25fddf78c55a5c35f78bbada0
Author: Roy Marples <roy@marples.name>
Date:   Sat Jun 7 00:08:07 2008 +0000

    make DEBUG=yes enabled ggdb.

commit 29fd7eaf8c059d35815ea74ed63f318619f15744
Author: Roy Marples <roy@marples.name>
Date:   Sat Jun 7 00:07:05 2008 +0000

    Allow building of snapshots.

commit 1a68b1d47f38f35fa28e3a249df2dee0f82e6f06
Author: Roy Marples <roy@marples.name>
Date:   Wed Jun 4 16:36:12 2008 +0000

    Add a sample NetworkManager hook script.

commit dc7fc61240c85d07a4fa1cf5bb3584ef310be911
Author: Roy Marples <roy@marples.name>
Date:   Tue Jun 3 22:21:51 2008 +0000

    We should not be setting IFF_RUNNING - that's the job of the interface driver.

commit dfcdfbbf73dadfd8d5dd16363c34b32fbe250cd9
Author: Roy Marples <roy@marples.name>
Date:   Fri May 30 10:51:56 2008 +0000

    Add a note about dhcpcd not fully supporting RFC 3927 yet.

commit 7fa019426f2e5cb8bfd143f227f91ae41d2822c8
Author: Roy Marples <roy@marples.name>
Date:   Fri May 30 10:27:15 2008 +0000

    Kernel will send the 2nd annoucemnent when we add the address.

commit 855c5820e78e34cb6d29cb3422c7fd10eacc3cfc
Author: Roy Marples <roy@marples.name>
Date:   Fri May 30 09:52:09 2008 +0000

    Parse the ARP packet better.

commit 317e2b6ef048548942ca70d21f062a0a2faa0da5
Author: Roy Marples <roy@marples.name>
Date:   Fri May 30 09:51:45 2008 +0000

    Don't request the last tried IPV4LL address.

commit 3c02568a28483fb384bd9eedc208e19154c9310a
Author: Roy Marples <roy@marples.name>
Date:   Thu May 29 19:26:16 2008 +0000

    Make the timings more random by using the full range of poll timeout.

commit 6db92f62e6f7ae69f5877462ca78a0b7801afe69
Author: Roy Marples <roy@marples.name>
Date:   Thu May 29 19:05:28 2008 +0000

    Should clean the core files too.

commit 8d45ec29616d3799f01a2553c1f302fa842236e2
Author: Roy Marples <roy@marples.name>
Date:   Thu May 29 17:04:29 2008 +0000

    Improve documentation about inform

commit 4857e31278051d5c7f387090a5011354c741f22d
Author: Roy Marples <roy@marples.name>
Date:   Thu May 29 16:57:47 2008 +0000

    persist addresses for INFORM

commit fb5f6b9e5b2420e41794516279e47b226e2d8a9b
Author: Roy Marples <roy@marples.name>
Date:   Thu May 29 15:08:39 2008 +0000

    Remove pointless header.

commit 0dc15f70d59d61750e4a914cc8d25383d8babb5a
Author: Roy Marples <roy@marples.name>
Date:   Thu May 29 13:21:58 2008 +0000

    Check size of arp reply vs what we need. Also, no need to copy out the hardware addresses.

commit 3cf0d215a5c211d8e1b7a1b6a4c982e62b4de682
Author: Roy Marples <roy@marples.name>
Date:   Thu May 29 11:58:25 2008 +0000

    Respect RFC 3927 more, regarding times and conflicts.

commit 26b48f9559fc47a3c98372c9ccf3a2789e67ab5c
Author: Roy Marples <roy@marples.name>
Date:   Thu May 29 08:26:57 2008 +0000

    DISABLE_FEATURE defines now don't enable automatic ENABLE_FEATURE defines.

commit 0cf4412b26de07d366292cb9f6ef02caaa7ac245
Author: Roy Marples <roy@marples.name>
Date:   Wed May 28 13:21:28 2008 +0000

    Ensure that IPV4LL defends by doing a  DHCP_DISCOVER for 10 seconds and then falling back to ARP checking for our address.

commit 431e499beb5384c82efa32393d695a3d2a382423
Author: Roy Marples <roy@marples.name>
Date:   Wed May 28 12:03:03 2008 +0000

    Back off IPv4LL detection after MAX_CONFLICTS.

commit 1fd83d79e8cbb08f8de3d810b75951d0f7a1db8d
Author: Roy Marples <roy@marples.name>
Date:   Wed May 28 12:02:04 2008 +0000

    We should inspect our signal fd before processing ARP replies.

commit 841ff129d17612a40b92362a67fa26da86c884f3
Author: Roy Marples <roy@marples.name>
Date:   Wed May 28 09:30:45 2008 +0000

    When we're persistent and using the last lease ignore expired check. This is so we work with NFS / and the DHCP server has been down for a while.

commit 9643f9162be0afc2438f399a8dc9e8e144f6461b
Author: Roy Marples <roy@marples.name>
Date:   Wed May 28 07:12:06 2008 +0000

    Put env var back :)

commit 7579dc52b7a38a2d34986abc0d64cd3e77a352c1
Author: Roy Marples <roy@marples.name>
Date:   Wed May 28 07:11:07 2008 +0000

    Only calculate strlen(oarg), saves space and fixes parsing fqdn in the config file.

commit 7b9104ce1a28a5e1be54d1449d2f625e8167ffe7
Author: Roy Marples <roy@marples.name>
Date:   Wed May 28 06:43:32 2008 +0000

    Document -x

commit f7f2e40505adf2f66e61ce98727dfce5a5a3cca9
Author: Roy Marples <roy@marples.name>
Date:   Tue May 27 20:04:15 2008 +0000

    Fix the option to change script.

commit caecf62c79ac0cf15a8b02f365c4976f28621606
Author: Roy Marples <roy@marples.name>
Date:   Tue May 27 19:06:48 2008 +0000

    Replace the signal clear with a pipe so child can notify parent when to exit.

commit 440bb73290dc30dd5dc80e5ad8b5c1c78a7c27d8
Author: Roy Marples <roy@marples.name>
Date:   Tue May 27 18:47:50 2008 +0000

    Fix signal loop.

commit 3367df0d12b31694fae3a75ca153e62ec051016a
Author: Roy Marples <roy@marples.name>
Date:   Tue May 27 12:41:42 2008 +0000

    Use new names.

commit 4292a3b401bcc31db006862b22cc954e49d7371e
Author: Roy Marples <roy@marples.name>
Date:   Tue May 27 12:39:00 2008 +0000

    Merge branch 'master' of git.marples.name:/var/git/dhcpcd

commit 74112a2090f90d81fead0978715ea678aac7f510
Author: Roy Marples <roy@marples.name>
Date:   Tue May 27 12:32:36 2008 +0000

    Use new names.

commit ce0d3a68da830c83121f21037b356704d8aedeed
Author: Roy Marples <roy@marples.name>
Date:   Tue May 27 11:26:24 2008 +0000

    We source the hooks, so use FILES instead of SCRIPTS.

commit 920dfbc94e6688a01920b43a610754ddc785930b
Author: Roy Marples <roy@marples.name>
Date:   Tue May 27 11:22:58 2008 +0000

    Fix rc-service command.

commit acf37f8de9ac5ba8e890b513f11d2e1cb3469ef1
Author: Roy Marples <roy@marples.name>
Date:   Tue May 27 09:14:33 2008 +0000

    Use the write length.

commit f487abdb543bf9baeac87e9fecd220cf95930221
Author: Roy Marples <roy@marples.name>
Date:   Tue May 27 09:14:04 2008 +0000

    Move NO_FORK code down so options is initialised.

commit fa52b460472412690462dcc3eeaada6c396059fb
Author: Roy Marples <roy@marples.name>
Date:   Mon May 26 20:43:34 2008 +0000

    Fix pointer.

commit 4d043aea41e496c1f4dc7373b0bb36e42130593d
Author: Roy Marples <roy@marples.name>
Date:   Mon May 26 19:48:46 2008 +0000

    Fix compile.

commit e0496aa9eb35c9006f105e5db6bb8d27270c0c25
Author: Roy Marples <roy@marples.name>
Date:   Mon May 26 19:19:11 2008 +0000

    Fix a signal race when daemonising.

commit 08e5e31f93122865ce9c92ff1e82560811d24cad
Author: Roy Marples <roy@marples.name>
Date:   Mon May 26 16:06:35 2008 +0000

    set is shell builtin, env is not

commit f2d3069decc2e6530c3db0212cf73ea9cab30f6d
Author: Roy Marples <roy@marples.name>
Date:   Mon May 26 09:58:36 2008 +0000

    Pull ARP replies correctly.

commit 98335969de29c5405e324568de81470a6e810549
Author: Roy Marples <roy@marples.name>
Date:   Sat May 24 17:47:44 2008 +0000

    dhcpcd-4.0.0-beta5

commit eb84b80a646412f37710c24e7fbec1be66b7b99c
Author: Roy Marples <roy@marples.name>
Date:   Sat May 24 17:45:38 2008 +0000

    Fix install.

commit ca80e3a0fbc0f68c8719fc5fbc1387d2166f4641
Author: Roy Marples <roy@marples.name>
Date:   Sat May 24 17:40:38 2008 +0000

    Document --script.

commit 4f5da121e7a8b9f65b3db8313abd5290e4e3d1c2
Author: Roy Marples <roy@marples.name>
Date:   Sat May 24 17:37:15 2008 +0000

    Fix subdir

commit f2ce838f64925f70b53a5793377cc196409cccf7
Author: Roy Marples <roy@marples.name>
Date:   Sat May 24 17:30:00 2008 +0000

    Style.

commit f9b72864214145b25b28f2928dc8c3eee7f958b7
Author: Roy Marples <roy@marples.name>
Date:   Sat May 24 17:18:07 2008 +0000

    Rename hook script to reflect the config file they are updating.

commit 3c112bd504671141e4424ba2f7c423e713e98cd1
Author: Roy Marples <roy@marples.name>
Date:   Sat May 24 17:15:34 2008 +0000

    Merge branch 'master' of git.marples.name:/var/git/dhcpcd

commit ee4e620abbd8cf362c36047bea040c692bd9f282
Author: Roy Marples <roy@marples.name>
Date:   Sat May 24 17:15:14 2008 +0000

    Move dhcpcd.sh to dhcpcd-run-hooks and remove .sh suffixes

commit 759f2a055abd3b4b705bdb942128c9772697b6f8
Author: Roy Marples <roy@marples.name>
Date:   Fri May 23 07:31:17 2008 +0000

    Don't bother appending log level to stdout, save a few bytes.

commit 71e0979efc6ed661581d7eeb844fc243401b2a50
Author: Roy Marples <roy@marples.name>
Date:   Fri May 23 06:36:57 2008 +0000

    Fix shell logic

commit 9f1fea6b03f8d725369402b6dad569c3d7cf1209
Author: Roy Marples <roy@marples.name>
Date:   Thu May 22 21:41:40 2008 +0000

    Just use /etc.

commit d1f69d4d1cd38bedee63e0fdd9f9d8302f915dad
Author: Roy Marples <roy@marples.name>
Date:   Thu May 22 21:41:27 2008 +0000

    Use proper words.

commit 29cdf2857e12686d5f0d6991bf88706a03bd3b1d
Author: Roy Marples <roy@marples.name>
Date:   Thu May 22 18:16:22 2008 +0000

    Put my code at the top and UNCONST filters in bpf.c

commit 90479007bdd4af214664b3e2acfd0a7660a98cd8
Author: Roy Marples <roy@marples.name>
Date:   Thu May 22 16:08:22 2008 +0000

    Don't echo loglevel names to stdout.

commit 096c9a9991c52af5cb23f93454b4c204ebdf9bf4
Author: Roy Marples <roy@marples.name>
Date:   Thu May 22 16:07:45 2008 +0000

    Add ISC copyright to dhcp_bpf_filter.

commit bed0c5d411bfa910a7adc19613575de27bddf0bd
Author: Roy Marples <roy@marples.name>
Date:   Thu May 22 13:59:33 2008 +0000

    Use constant BPF structures and defines to alter the data instead of functions. Smaller code :)

commit b604c3de5b04d1a5e0e68e5f2e54aae731e91d62
Author: Roy Marples <roy@marples.name>
Date:   Thu May 22 09:23:03 2008 +0000

    Installing to FHS dirs just for Linux is silly, especially as GNU autotools don't by default. With installing to the same dirs regardless of OS it also makes my life easier.

commit a06bed27a5e40ec3ee4e5afd76cc7bb993d73249
Author: Roy Marples <roy@marples.name>
Date:   Wed May 21 10:40:56 2008 +0000

    Apparently some DHCP servers return NULL strings, Gentoo #222381.

commit bb44c154542784bcfb055f4b838fcb8facca50f8
Author: Roy Marples <roy@marples.name>
Date:   Wed May 21 09:16:24 2008 +0000

    Improve documentation about the hooks.

commit d46cd932b092dcf0266dd5c6c3bfa4ec090c48cd
Author: Roy Marples <roy@marples.name>
Date:   Wed May 21 08:43:28 2008 +0000

    Stop defining the same flags twice.

commit 12785ee2907537665ef4173a3fa309fd94014070
Author: Roy Marples <roy@marples.name>
Date:   Tue May 20 23:06:15 2008 +0000

    Use CPP flags here.

commit 82770593eafaf5beec457573a2065d4563daef69
Author: Roy Marples <roy@marples.name>
Date:   Tue May 20 23:01:13 2008 +0000

    Plug some valgrind leaks.

commit 8276da828bfd6e8221d5e2c11fdacdcb56eec300
Author: Roy Marples <roy@marples.name>
Date:   Tue May 20 22:53:41 2008 +0000

    More Typo

commit 2a8db9701fdea9a4d66463b8d6e67888b3069e34
Author: Roy Marples <roy@marples.name>
Date:   Tue May 20 22:50:28 2008 +0000

    Typo

commit 7e9d113c566d93c0ff0994fee658f39d4267a56d
Author: Roy Marples <roy@marples.name>
Date:   Tue May 20 22:49:22 2008 +0000

    Typo

commit a443fcfea7a5c3905d516a3965c6180f3c2091f6
Author: Roy Marples <roy@marples.name>
Date:   Tue May 20 22:47:39 2008 +0000

    Document last lease and nohook.

commit bbb7565e567a4fede800247ef353cf6f0b02478f
Author: Roy Marples <roy@marples.name>
Date:   Tue May 20 22:41:07 2008 +0000

    Install hooks in the os specific dir.

commit db1de9cb22094b2625201975d75dea9d8fdf0323
Author: Roy Marples <roy@marples.name>
Date:   Tue May 20 22:29:57 2008 +0000

    Fix install for gmake.

commit d9e13256b0ea98a62e21205b4d0f565d34e4468b
Author: Roy Marples <roy@marples.name>
Date:   Tue May 20 22:25:20 2008 +0000

    Move socket.c -> lpf.c. Also, default Linux to using /lib/dhcpcd rather than /libexec so it fits the FHS better.

commit 37156a6b53681b9ab70482b15358e0a86a08c74d
Author: Roy Marples <roy@marples.name>
Date:   Tue May 20 16:05:15 2008 +0000

    Add a -C, --nohook option to skip the running of hook scripts. Makes it easier to just not do any configuring of resolv.conf

commit 5f81be76fc605333ef92ecde09b093b1ebe5bd4d
Author: Roy Marples <roy@marples.name>
Date:   Tue May 20 14:10:21 2008 +0000

    Don't set CONFIG in the Makefile.

commit 6c7e65c0665357a210f886fcae1cd528a05ceb7d
Author: Roy Marples <roy@marples.name>
Date:   Tue May 20 13:51:44 2008 +0000

    Fix ipv4ll support.

commit db58ab42c3916dd78e60de8c32fb5deb13726f68
Author: Roy Marples <roy@marples.name>
Date:   Tue May 20 12:55:29 2008 +0000

    Document dhcpcd.conf in FILES.

commit 1a659b5c516f61684510866642ed9c1eadab240b
Author: Roy Marples <roy@marples.name>
Date:   Tue May 20 12:47:16 2008 +0000

    Don't prefix functions with _

commit cf42802e15aa95933019caebd61338d4687f3816
Author: Roy Marples <roy@marples.name>
Date:   Tue May 20 12:33:04 2008 +0000

    One sentence per line.

commit ac02e910e2e9af8203e3bd585110f06549c5b438
Author: Roy Marples <roy@marples.name>
Date:   Tue May 20 12:24:39 2008 +0000

    Fix readme

commit 0aeb350cfa645e333dbbc353064408e81ba8c93c
Author: Roy Marples <roy@marples.name>
Date:   Tue May 20 12:23:29 2008 +0000

    Install dhcpcd.sh and hooks into /libexec by default. dhcpcd.conf, dhcpcd.duid and dhcpcd.hook are now in /etc.

commit c61c4118d8a688f26a9bd53b061090aca5e45f66
Author: Roy Marples <roy@marples.name>
Date:   Tue May 20 10:55:25 2008 +0000

    Split dhcpcd.sh into smaller hook scripts, so that dhcpcd.sh just provide some handy functions and runs the hooks. We now only have one hook, instead of enter/exit.

commit f4456e160e165aff083d4c877361ff3e5069708f
Author: Roy Marples <roy@marples.name>
Date:   Tue May 20 08:30:08 2008 +0000

    Use CPPFLAGS as FreeBSD make doesn't.

commit 8dc303abc8d09d9a8ec5dfc6bbc90dc31732196f
Author: Roy Marples <roy@marples.name>
Date:   Tue May 20 05:57:35 2008 +0000

    We should really be using CPPFLAGS.

commit 67929494570fa1d6ec89a940059ca4242d53087a
Author: Roy Marples <roy@marples.name>
Date:   Mon May 19 23:22:44 2008 +0000

    Move the SUFFIXES to them.

commit efdc6936857ed58de5ab4fac0a22a10c038290de
Author: Roy Marples <roy@marples.name>
Date:   Mon May 19 22:37:48 2008 +0000

    Fix csr's, #81.

commit 92cd03a05a3fc6ec8aaf30575c26c2d98fd422fb
Author: Roy Marples <roy@marples.name>
Date:   Mon May 19 15:50:50 2008 +0000

    Change our Makefile vars to be more like NetBSD.

commit 8a5b130746063c2f984ce46a548543ea122f3052
Author: Roy Marples <roy@marples.name>
Date:   Mon May 19 14:47:37 2008 +0000

    Style

commit 9934ead60e17bf90ebb780812bbe77916d92c942
Author: Roy Marples <roy@marples.name>
Date:   Mon May 19 14:45:05 2008 +0000

    Trap some config.h defines if they're in CFLAGS.

commit 8c6735148fad82183dc4b454186930f266e2aaaf
Author: Roy Marples <roy@marples.name>
Date:   Mon May 19 13:40:39 2008 +0000

    realloc -> xrealloc

commit 7b15d336d981587e32a738d5d6186516b528ff12
Author: Roy Marples <roy@marples.name>
Date:   Mon May 19 13:36:06 2008 +0000

    Move VERSION from Makefile to config.h so that other Makefiles can be used instead of our own.

commit 0788461c46ba10ecc784734630695a4764b5c87c
Author: Roy Marples <roy@marples.name>
Date:   Mon May 19 13:16:03 2008 +0000

    Fix a potential segfault.

commit 37305c908cac2f8489ed6fa0cff401804452485f
Author: Roy Marples <roy@marples.name>
Date:   Mon May 19 09:18:02 2008 +0000

    Style.

commit 32391c95110f44cd7dd0245221c21b7e0d7e5d5a
Author: Roy Marples <roy@marples.name>
Date:   Mon May 19 09:16:55 2008 +0000

    Create a real arc4linux function so we don't have to visible seed random in dhcpcd main.

commit c30da3c20325f4ddbf797bc5f30e5e422b185b6e
Author: Roy Marples <roy@marples.name>
Date:   Fri May 16 09:08:52 2008 +0000

    Setup our lease and state correctly when comming back as daemonised.

commit a2651060906270ac143fd6c83e76ffd4d7f2408b
Author: Roy Marples <roy@marples.name>
Date:   Thu May 15 20:58:31 2008 +0000

    Try a new checksum routine.

commit fba865f71d680975665008401f3c7c2964472de3
Author: Roy Marples <roy@marples.name>
Date:   Thu May 15 20:45:45 2008 +0000

    Fix checksum on Sparc64.

commit 2ef196b788df888846cf02e5979ce4e636e29b12
Author: Roy Marples <roy@marples.name>
Date:   Thu May 15 19:30:21 2008 +0000

    Fix test.

commit dcf889cb72d2d385db03e3ee29b80fbf035abf69
Author: Roy Marples <roy@marples.name>
Date:   Thu May 15 19:21:15 2008 +0000

    Use arc4random as everything apart from glibc seems to have it.

commit 8673924690579224982640dd29cbbbdfd3721bcd
Author: Roy Marples <roy@marples.name>
Date:   Thu May 15 16:35:41 2008 +0000

    Fix compile on Linux.

commit 72bda00bdcb980720a94f662471d6b524f925e16
Author: Roy Marples <roy@marples.name>
Date:   Thu May 15 16:30:16 2008 +0000

    Use paths.h when available and ensure that we can disable our glue easily.

commit 8dc6afb7e808c5e24a69fd035914a1a67432a950
Author: Roy Marples <roy@marples.name>
Date:   Thu May 15 16:09:42 2008 +0000

    Check correct lengths and use closefrom where available.

commit fca9d5445b39e6efa37de6cf86c99229dfab3167
Author: Roy Marples <roy@marples.name>
Date:   Thu May 15 15:48:15 2008 +0000

    Style.

commit f3053f4759310fd6f2fefa59786685c0c9253bd4
Author: Roy Marples <roy@marples.name>
Date:   Thu May 15 14:20:01 2008 +0000

    No need for this check with our non blocking sockets.

commit 3528961fc661b258de615673b26ebe47198f8b31
Author: Roy Marples <roy@marples.name>
Date:   Thu May 15 14:16:47 2008 +0000

    Use non blocking sockets so read errors with EAGAIN.

commit 57220ee0629f8c1ad3aad80aa43cf2b8878e1fbc
Author: Roy Marples <roy@marples.name>
Date:   Thu May 15 13:34:31 2008 +0000

    get_packet 0 means no more buffer, so loops don't need to know the bpf/socket buffering.

commit 0f1f396ae21a88beb53cc5c9dc37267ab3aa9108
Author: Roy Marples <roy@marples.name>
Date:   Thu May 15 12:57:31 2008 +0000

    Don't use stdio in a vfork and fix some unconsts.

commit 9c308ff18f5ae688edaa3680a7d5adbd79b7be3a
Author: Roy Marples <roy@marples.name>
Date:   Thu May 15 12:48:01 2008 +0000

    Move signal.{c,h} to signals.{c.h} so we can work better in the NetBSD source tree.

commit fe965fea17d9bb66994df6c10785b3f3d148d270
Author: Roy Marples <roy@marples.name>
Date:   Thu May 15 12:32:27 2008 +0000

    Fix bpf for the correct position on new buffers.

commit 2eebbca565e80370d617f7c325510f7c29811693
Author: Roy Marples <roy@marples.name>
Date:   Thu May 15 12:15:49 2008 +0000

    Loop correctly for more packets.

commit 0ec2a0ab214f619e32c485326ce0500e561f53fa
Author: Roy Marples <roy@marples.name>
Date:   Thu May 15 12:15:33 2008 +0000

    Only alloc the buffer once.

commit 811d4272b54fa4712bf341fdd1654e3618063a77
Author: Roy Marples <roy@marples.name>
Date:   Thu May 15 12:15:06 2008 +0000

    Only alloc a buffer if size is different.

commit 3581b92aa447e9a29952aafc13d74aaa38415abf
Author: Roy Marples <roy@marples.name>
Date:   Thu May 15 11:12:44 2008 +0000

    Fix some valgrind errors, and work on Linux again.

commit b1009e62b221f6ca2d84818766547b92cee64564
Author: Roy Marples <roy@marples.name>
Date:   Thu May 15 10:10:39 2008 +0000

    Improve get_packet API and memcpy to structure instead of using union pointers.

commit 35ba5bc0c444ee8b3f9b76ddcc440955940d9786
Author: Roy Marples <roy@marples.name>
Date:   Thu May 15 08:48:17 2008 +0000

    When we explictly don't want an option, don't put it in the env.

commit 343c1ae64197ffe81aed083514b930c65af7931a
Author: Roy Marples <roy@marples.name>
Date:   Wed May 14 12:19:05 2008 +0000

    Prettify code a little.

commit a1613b91fd34b5cb904a3f8b278c7b9b2fff2f87
Author: Roy Marples <roy@marples.name>
Date:   Wed May 14 12:05:04 2008 +0000

    Prettify code a little.

commit 45e1c85466284a8c0061be1be0e49dfae33d0550
Author: Roy Marples <roy@marples.name>
Date:   Wed May 14 11:53:58 2008 +0000

    BIOCIMMEDIATE isn't always available

commit bf6c0cfe0c1fd556f3b9353e36346946d91cac55
Author: Roy Marples <roy@marples.name>
Date:   Wed May 14 11:44:01 2008 +0000

    Export the parent pid to the script.

commit 34018b076149595d4c582327549a8f1b5e5ec4ba
Author: Roy Marples <roy@marples.name>
Date:   Wed May 14 10:12:26 2008 +0000

    Fix setting a blank hostname by mistake.

commit 360edcebf1296bd107407e0d878c76019fe61df6
Author: Roy Marples <roy@marples.name>
Date:   Wed May 14 10:08:27 2008 +0000

    Use an easier looping method, and use more const.

commit 17b57433ce03b81e034677c71adbb6a371affe49
Author: Roy Marples <roy@marples.name>
Date:   Wed May 14 10:07:57 2008 +0000

    We shouldn't need to declare an interface when requesting a variable list.

commit a6f0c6b6e6f91336e451b09cfa242d290e7f9bc4
Author: Roy Marples <roy@marples.name>
Date:   Wed May 14 09:21:46 2008 +0000

    Define our own log text so we can move it off bss.

commit 864bef556062add3810ebd33695d95b8f2f02d34
Author: Roy Marples <roy@marples.name>
Date:   Wed May 14 09:21:26 2008 +0000

    Move the dhcp_ops structure off bss.

commit 52eedd1bc7e1f0cb7eeabd43118d22c86a63401d
Author: Roy Marples <roy@marples.name>
Date:   Wed May 14 09:07:54 2008 +0000

    If we have space, ensure our packet options are correctly terminated.

commit bae375892a222548d648e2271ea2e8ac2b1b5973
Author: Roy Marples <roy@marples.name>
Date:   Tue May 13 20:25:22 2008 +0000

    Use better error messages.

commit 67d31b6264eeb8ab55aa753ae6fd53f08919ee5c
Author: Roy Marples <roy@marples.name>
Date:   Tue May 13 20:24:54 2008 +0000

    Free buffer at exit.

commit e04407ba2fc70b1582f289dadf8cd3d9d3cbdb7c
Author: Roy Marples <roy@marples.name>
Date:   Tue May 13 18:39:18 2008 +0000

    Move the static buffer off bss.

commit 74657a182c5759fd206ccd38c82a72144044c52b
Author: Roy Marples <roy@marples.name>
Date:   Tue May 13 14:37:01 2008 +0000

    Fix a segfault and lease issue for no fork users.

commit 3f72bc7af0d288aedb8c1e5f3f93ad2049012b66
Author: Roy Marples <roy@marples.name>
Date:   Tue May 13 14:23:01 2008 +0000

    Include ctype for non fork systems.

commit 05fb3aaa231e670ed6d5f97e8b0aa052208e1785
Author: Roy Marples <roy@marples.name>
Date:   Tue May 13 14:18:15 2008 +0000

    dhcpcd-4.0.0-beta3

commit 585a001fc39cf8eb82ef55f149fa4dcdaa695c8d
Author: Roy Marples <roy@marples.name>
Date:   Tue May 13 13:34:05 2008 +0000

    Man page now states we support RFC 3396.

commit c813d9a98dc5791c2cf050a5f74af411f7198e75
Author: Roy Marples <roy@marples.name>
Date:   Tue May 13 13:32:37 2008 +0000

    Support RFC3996, Encoding Long Options.

commit 6164dc20c5a1ecc813713069fb9db674141d9815
Author: Roy Marples <roy@marples.name>
Date:   Tue May 13 11:47:08 2008 +0000

    Clean up some valgrind errors.

commit 854d14ce48ac9b5fc4ad521ab84798be68aefe29
Author: Roy Marples <roy@marples.name>
Date:   Tue May 13 11:24:16 2008 +0000

    We shouldn't stamp on the dhcp message when checking overloads.

commit 2151620deb3287e809d847bcaf30c461fae049b7
Author: Roy Marples <roy@marples.name>
Date:   Tue May 13 11:21:19 2008 +0000

    We should make our own env instead of using setenv/unsetenv so we work better with vfork systems.

commit 1b3bc4775a960dbf65ffe3f540d63d122311f9c4
Author: Roy Marples <roy@marples.name>
Date:   Mon May 12 21:03:38 2008 +0000

    Don't encode the hostname as a FQDN by default as not all DHCP servers support this.

commit da635e38f73a70ea8e1fc51bdd673a78fe34a7b9
Author: Roy Marples <roy@marples.name>
Date:   Mon May 12 14:53:46 2008 +0000

    Remove silly #

commit c76ca99d959f341a156ea077fbc5b9e8244f8b75
Author: Roy Marples <roy@marples.name>
Date:   Mon May 12 14:23:29 2008 +0000

    Make the man pages by default.

commit 485ba253aa5d9d95874d54755142adedb11c9cdc
Author: Roy Marples <roy@marples.name>
Date:   Sat May 10 12:11:47 2008 +0000

    nis_server -> nis_servers

commit 1ca5a00f41d4c1b24a76e1f2b914edab4c864f85
Author: Roy Marples <roy@marples.name>
Date:   Thu May 8 19:52:32 2008 +0000

    dhcpcd-4.0.0_beta2

commit f19bd3c3d7d2dbf7b558ad54d1415de7a2ce03b5
Author: Roy Marples <roy@marples.name>
Date:   Thu May 8 11:00:15 2008 +0000

    Fix infinite timeouts.

commit c3799faefb6200a29d7e875ec70418b523de152b
Author: Roy Marples <roy@marples.name>
Date:   Wed May 7 09:39:17 2008 +0000

    dhcpcd doesn't really care about script exist status or if it was signalled, so save a few more bytes.

commit d7698d1c90290c6d8e2e9b76ff4ab3801326abb6
Author: Roy Marples <roy@marples.name>
Date:   Wed May 7 09:10:19 2008 +0000

    Clarify comment about DUID usage.

commit 833f739efa6231c604afe254f6bd32740e779350
Author: Roy Marples <roy@marples.name>
Date:   Wed May 7 09:07:28 2008 +0000

    Don't explicity create an IPV4LL route if we have a routeable address - the host system should make this choice.

commit 9b7874c7aee113a2112f293463ecd998f555e9af
Author: Roy Marples <roy@marples.name>
Date:   Tue May 6 08:30:51 2008 +0000

    dhcpcd-4.0.0-beta1

commit eaa90296065dd0f440ff182334dca70d52efc83a
Author: Roy Marples <roy@marples.name>
Date:   Fri May 2 09:05:03 2008 +0000

    Tart the man pages - Aq fails mostly so just use  < .. >

commit 082fabc7e0e2751556f07a6958db67b2b1d06e43
Author: Roy Marples <roy@marples.name>
Date:   Fri May 2 08:49:23 2008 +0000

    Move some opts to compat.

commit f3304eae5d60c0a82b3c527d696806ea51f4d2e9
Author: Roy Marples <roy@marples.name>
Date:   Fri May 2 08:25:54 2008 +0000

    Keep parsing the duid file until we find a valid duid. This allows comments if the user wants them.

commit cd6039ee0272fd8e949ec77ac6017dd50e905074
Author: Roy Marples <roy@marples.name>
Date:   Fri May 2 08:25:21 2008 +0000

    We should only check duid file if duid enabled.

commit 6f629e6d2782fec635d0e7fa943504980fb4ea3e
Author: Roy Marples <roy@marples.name>
Date:   Thu May 1 19:50:33 2008 +0000

    Fix default options and old IPV4LL leases.

commit 0b2f0d442fc18259aec8cec69547e016288928d7
Author: Roy Marples <roy@marples.name>
Date:   Thu May 1 19:38:10 2008 +0000

    Fix IPV4LL

commit 18d36949d263f2534b421b0759d7904d8e5432bb
Author: Roy Marples <roy@marples.name>
Date:   Thu May 1 19:30:11 2008 +0000

    Fix commandline compat.

commit 84fdc6af2697c22acda2b4ea59546b366ce0abf5
Author: Roy Marples <roy@marples.name>
Date:   Thu May 1 18:00:59 2008 +0000

    Move the compat options to the top and renable duid support IF the duid file exists and we're in compat mode.

commit d2616b0835411550cdf1b4633c5a429d1ff5cf06
Author: Roy Marples <roy@marples.name>
Date:   Thu May 1 14:47:52 2008 +0000

    Don't use a DUID by default even though support is compiled in, #70. Also, fix some man page entries a little.

commit 5a0bf07060b943a6e679f64fe30411828e95c309
Author: Roy Marples <roy@marples.name>
Date:   Sat Apr 26 07:51:32 2008 +0000

    Rework the ENABLE_DUID #ifdef so that redoing indents in vim works.

commit f409012f02fb430b9684427ab8b298942f185768
Author: Roy Marples <roy@marples.name>
Date:   Sat Apr 26 07:39:23 2008 +0000

    Repair whitespace damage.

commit e803c75860062fa1f3bf72330830ae4020bdfded
Author: Roy Marples <roy@marples.name>
Date:   Sat Apr 26 07:12:46 2008 +0000

    Allow quotes to be used.

commit 252ab4a5d3ae28bbf4091086f0639d104743e467
Author: Roy Marples <roy@marples.name>
Date:   Fri Apr 25 19:06:11 2008 +0000

    exists -> exit

commit 2a34e957fc7f74f9930a84e1cff198799c1c6024
Author: Roy Marples <roy@marples.name>
Date:   Fri Apr 25 19:00:31 2008 +0000

    Install the right man page.

commit 1410db936a726946228a8135c446bc1bb4ae4369
Author: Roy Marples <roy@marples.name>
Date:   Fri Apr 25 11:01:02 2008 +0000

    Fix compile with commandline compat.

commit 8c8c97d6d4d4e59e856f063d4361fed19d7785b1
Author: Roy Marples <roy@marples.name>
Date:   Thu Apr 24 21:47:22 2008 +0000

    Fix compat for network_number.

commit bd2c83dbbc0d502f595c6796f31728066b9a03e3
Author: Roy Marples <roy@marples.name>
Date:   Thu Apr 24 15:06:06 2008 +0000

    Add server_name and filename env vars. Also, fix network_number to match dhclient.

commit d2a979d3a80ce9a44d7317a84143c9c16a71a564
Author: Roy Marples <roy@marples.name>
Date:   Thu Apr 24 14:50:04 2008 +0000

    Fix line length

commit 3adc552008574690b2e3e2747405d86dd41dfca3
Author: Roy Marples <roy@marples.name>
Date:   Thu Apr 24 14:14:20 2008 +0000

    Man page corrections.

commit 012fd5d37f2b9198e10d5e75a16184cd84205ac5
Author: Roy Marples <roy@marples.name>
Date:   Thu Apr 24 13:53:03 2008 +0000

    interface foo in dhcpcd.conf now only applies subsequent options for interface foo.

commit 25d71b6065e569326f6f42f9233eea5036d33c68
Author: Roy Marples <roy@marples.name>
Date:   Thu Apr 24 13:18:59 2008 +0000

    Allow a config file to be specified on the command line.

commit 967194ef5414a00284bba2bd03ff9a3c7363c078
Author: Roy Marples <roy@marples.name>
Date:   Thu Apr 24 12:35:03 2008 +0000

    Allow values to be escaped using \

commit ebd9d2b7e689848347c134366536ec47a48e1d7f
Author: Roy Marples <roy@marples.name>
Date:   Tue Apr 22 10:49:59 2008 +0000

    ntp should update if no existing config.

commit 396a9a22e5237deb721316ebe5e39f45bff4e605
Author: Roy Marples <roy@marples.name>
Date:   Tue Apr 22 10:41:57 2008 +0000

    Move looking up the hostname in DNS to a sample hook file as it's not something we should really do by default. Rename our sample hooks to end with .sh so they get nice script highlights.

commit 6e41e30851c2a731fa5187c499535cced0f722a2
Author: Roy Marples <roy@marples.name>
Date:   Tue Apr 22 08:13:40 2008 +0000

    Merge branch 'master' of git.marples.name:/var/git/dhcpcd

commit 94aaf2ebac54ca4386493a2e52dd852e23e32521
Author: Roy Marples <roy@marples.name>
Date:   Mon Apr 21 23:11:07 2008 +0000

    Fix host and dig erroring to stdout.

commit ac62ece333065646bf5ffa05b2afb9b7f8b78937
Author: Roy Marples <roy@marples.name>
Date:   Mon Apr 21 23:08:43 2008 +0000

    Fix daemonising when on IPV4LL.

commit 7eecb817e965c92e48a5d934415193e0f6fbf680
Author: Roy Marples <roy@marples.name>
Date:   Mon Apr 21 10:43:08 2008 +0000

    Merge branch 'master' of git.marples.name:/var/git/dhcpcd

commit dbebcb73d1df238e4a04dd894cf9b52df67aef95
Author: Roy Marples <roy@marples.name>
Date:   Mon Apr 21 09:53:18 2008 +0000

    Trim trailing whitespace.

commit 1bda9a75857989cedccf6e4f1292f6b9ec1ed740
Author: Roy Marples <roy@marples.name>
Date:   Mon Apr 21 09:40:14 2008 +0000

    We should check for required arguments and strip leading whitespace.

commit b4ec3a502e11e4e94c914f5b4e36fbcf2f954a18
Author: Roy Marples <roy@marples.name>
Date:   Mon Apr 21 09:31:34 2008 +0000

    Fix a compile warning.

commit 35ff0dbb35b746c5594773ddc47516af440cdae7
Author: Roy Marples <roy@marples.name>
Date:   Sun Apr 20 19:02:19 2008 +0000

    We should send packets to a specific IP over the udp socket so we don't broadcast on layer 2 and unicast on layer 3, #64.

commit 7612d18ee2d823cbd61f156191c6b5d6cb41352f
Author: Roy Marples <roy@marples.name>
Date:   Sun Apr 20 09:35:47 2008 +0000

    Use a.b.c.d/e notation as this more fully represents the data.

commit 4d9fa3dba69af27ca64cc0cd1b482c83270f0a7f
Author: Roy Marples <roy@marples.name>
Date:   Sat Apr 19 17:32:43 2008 +0000

    Fix a signed issue.

commit c605c8f0ea77e382676108187cd12812aaded252
Author: Roy Marples <roy@marples.name>
Date:   Sat Apr 19 11:00:54 2008 +0000

    Fix rfc3397 and rfc3442 decoding for dhcpcd.sh.

commit 6a4aebf6339361c01b76168bdfcb96c5bfdbcc20
Author: Roy Marples <roy@marples.name>
Date:   Fri Apr 18 23:23:00 2008 +0000

    Add a note about how to enable deprecated commandline options.

commit ba9dfb7aaeb7eb870cfc1c93c4e519d58f082b75
Author: Roy Marples <roy@marples.name>
Date:   Fri Apr 18 23:12:44 2008 +0000

    dhcpcd can now read a basic config file! Add a default dhcpcd.conf and matching man page. Add dhcpcd.sh man page. dhcpcd can now report variables it can send to dhcpcd.sh as well.

commit 7eb93bd9e42aa2d63c28e006f74ee19d0a13a31d
Author: Roy Marples <roy@marples.name>
Date:   Thu Apr 17 21:18:20 2008 +0000

    Move the duid file to /etc/dhcpcd as it's really a config file. Also, rename hook dirs to dhcpcd- so they could be installed into /etc and not just /etc/dhcpcd.

commit bce34c740b9cb1e9caa02b2a0ccc19d98df87c64
Author: Roy Marples <roy@marples.name>
Date:   Thu Apr 17 18:38:59 2008 +0000

    Quiet OpenRC scripts.

commit 37c6c90d27001ee5d7866b29eee19b1b4b3f9cf1
Author: Roy Marples <roy@marples.name>
Date:   Thu Apr 17 16:30:30 2008 +0000

    Split ntp and ypbind into sample hook scripts. These are not installed by default.

commit 8537ab8a6fdb82f505dd2a09509c3d874ea49e8b
Author: Roy Marples <roy@marples.name>
Date:   Thu Apr 17 16:29:22 2008 +0000

    Fix ntp and nis servers.

commit cbfa778bd60d03b511d8c7639dd78f59ec42f471
Author: Roy Marples <roy@marples.name>
Date:   Thu Apr 17 10:08:48 2008 +0000

    Specify char

commit f2cfcde87ea8d58a44fd67cf060bdc234f900304
Author: Roy Marples <roy@marples.name>
Date:   Thu Apr 17 09:57:19 2008 +0000

    Our ctype calls should always use unsigned.

commit 574011fc89d07bd35b8e9d744030d41c71151676
Author: Roy Marples <roy@marples.name>
Date:   Thu Apr 17 09:47:11 2008 +0000

    If _PATH_BPF is set, open that instead of searching for a free BPF device.

commit 6895fff31eea6a6069b8483f51030f88ff8d21be
Author: Roy Marples <roy@marples.name>
Date:   Wed Apr 16 18:19:50 2008 +0000

    Change SYSCONFDIR to /etc/dhcpcd as we'll probably be adding some kind of config file.

commit 1f895df1f29f6de8a87045824cb55165032702d9
Author: Roy Marples <roy@marples.name>
Date:   Wed Apr 16 13:50:44 2008 +0000

    Fix compat - d'oh

commit 1b088dd4d517c97fb65024406eb2aeef55cca51e
Author: Roy Marples <roy@marples.name>
Date:   Wed Apr 16 13:47:39 2008 +0000

    Add dhcpcd-compat.sh, so that distros can make available old style variables.

commit 2973ddc6ea5fe5cae00c53cfd902f16d814a91c7
Author: Roy Marples <roy@marples.name>
Date:   Wed Apr 16 12:25:13 2008 +0000

    Use correct mtu function.

commit 66d25accf01fd039dad565ab917693e15e9b53ff
Author: Roy Marples <roy@marples.name>
Date:   Wed Apr 16 10:25:54 2008 +0000

    Add dhcpcd.sh.in

commit 2798d7bd66eb85df4a8878eb3f9cc532e083ee61
Author: Roy Marples <roy@marples.name>
Date:   Wed Apr 16 09:55:35 2008 +0000

    Fix a few compile warnings.

commit dcab79de5ef939f5af004048748fa3dae8cd00f4
Author: Roy Marples <roy@marples.name>
Date:   Wed Apr 16 09:51:20 2008 +0000

    Remove the .info file and now set environment vars in the same vein as dhclient. This allows similar scripts to be used.

commit 2cb85d9bb21273beee6bdfbe1d1ef0467af06ac1
Author: Roy Marples <roy@marples.name>
Date:   Mon Apr 14 19:28:28 2008 +0000

    Don't compare if file does not exist.

commit 7e7aed9b3314a082e9dbe575b1b04db2c69a64fb
Author: Roy Marples <roy@marples.name>
Date:   Mon Apr 14 19:24:23 2008 +0000

    Support GNU style calling.

commit b16302be0aeec7c595fa045b56c89347997781bc
Author: Roy Marples <roy@marples.name>
Date:   Mon Apr 14 18:50:48 2008 +0000

    We should ARP by default.

commit 46bd6451b0fd285a28a6079045bb5b964f657f65
Author: Roy Marples <roy@marples.name>
Date:   Mon Apr 14 15:08:46 2008 +0000

    Replace the clean_metas functions with a write_string function. The main difference is that we escape non ascii or printable chars and avoid mallocing.

commit 207e004634b7a55dd65de9ef63a9663abfada403
Author: Roy Marples <roy@marples.name>
Date:   Mon Apr 14 13:47:20 2008 +0000

    Move MTU configuration to dhcpcd.sh. However, if the MTU is too small for dhcpcd, dhcpcd will increase it to the minimum.

commit 74d7286f46726aa29522dd0320ebd01eed6b28ce
Author: Roy Marples <roy@marples.name>
Date:   Mon Apr 14 13:29:11 2008 +0000

    Fix type for NetBIOS scope, and escape unknown options such as vendor extended options.

commit c46c624e7f2cfba9b12043c2f7d779f46ec3539b
Author: Roy Marples <roy@marples.name>
Date:   Mon Apr 14 13:09:44 2008 +0000

    Change a few build/install knobs.

commit 009d046214f607a0989a74c2ee055d72e4989f00
Author: Roy Marples <roy@marples.name>
Date:   Mon Apr 14 12:43:52 2008 +0000

    Implement arrays and fix getting strings.

commit e8c25f07c3fe28913c58e22b5aa0e122eb697ff0
Author: Roy Marples <roy@marples.name>
Date:   Mon Apr 14 12:21:28 2008 +0000

    Implement integer arrays.

commit 754a344c75b1761d553efc442a0eb3a9b628e150
Author: Roy Marples <roy@marples.name>
Date:   Mon Apr 14 10:02:44 2008 +0000

    Add loads more DHCP options from RFC2132 to the info file, also closes #53.

commit a840945c73085e8a49c222df3489ea178bc7e4ef
Author: Roy Marples <roy@marples.name>
Date:   Mon Apr 14 06:57:18 2008 +0000

    Add more dhcp types, #53

commit c596e5cc1e7302fc170f40f419273c0458b4d19e
Author: Roy Marples <roy@marples.name>
Date:   Mon Apr 14 06:35:05 2008 +0000

    The H argument no means , which changes it's meaning from prior versions.

commit be100443a3d5ec2a4a97da1325002c63573e93ec
Author: Roy Marples <roy@marples.name>
Date:   Mon Apr 14 03:45:54 2008 +0000

    Add -o opt1,opt2 and -O to disable requesting optional options. Rejig our defaults around this.

commit 1eda499e124e4ceb315913acd43fddf0248e4621
Author: Roy Marples <roy@marples.name>
Date:   Sun Apr 13 15:33:00 2008 +0000

    We should check the cookie on messages.

commit 3a113226c99cb8e5715629470a04c9732f475ac5
Author: Roy Marples <roy@marples.name>
Date:   Sun Apr 13 15:29:09 2008 +0000

    We should end options correctly.

commit 312840d8496b8610e0f3b054930ec9387aed3171
Author: Roy Marples <roy@marples.name>
Date:   Sun Apr 13 13:17:03 2008 +0000

    We now use either dig or host to lookup the hostname in DNS again.

commit b3ddebb52ed673d72c5c436deb56e7f2a79d16e8
Author: Roy Marples <roy@marples.name>
Date:   Sun Apr 13 11:49:19 2008 +0000

    Remove the bit about init detection as it's no longer used.

commit e1dcde7a8c6452bd02de7728924d21b4f0d985c4
Author: Roy Marples <roy@marples.name>
Date:   Sun Apr 13 11:27:41 2008 +0000

    As we're only dealing with dhcpcd.sh now, the exec_cmd function doesn't need to be so complex.

commit 4eb2d4c211f7419b257a4f59a3170e0529783cb1
Author: Roy Marples <roy@marples.name>
Date:   Sat Apr 12 23:58:03 2008 +0000

    As we're not looking up the hostname anymore, remove reference from manual.

commit 271a42260ea84d7527505705292bc036f2a21460
Author: Roy Marples <roy@marples.name>
Date:   Sat Apr 12 23:15:22 2008 +0000

    And read only ;)

commit 0236825ba4f847fe9d3f4e0abdd462c21f05294f
Author: Roy Marples <roy@marples.name>
Date:   Sat Apr 12 23:13:15 2008 +0000

    The lease file should only be able to be read by the user than runs dhcpcd.

commit 5a98646f72f9be4fe116d544f8b3d607d682789f
Author: Roy Marples <roy@marples.name>
Date:   Sat Apr 12 23:00:23 2008 +0000

    Move configuration file setup to dhcpcd.sh so that it's possible for the user to change more easily. We now have enter/exit hooks similar to dhclient to make things even easier for the user. At this time, we are still 100% commandline compatible. However, we have lost the feature to lookup hostnames.

commit 3ab998f88b6fb39c3e8247d17a2707f5bd37d3a1
Author: Roy Marples <roy@marples.name>
Date:   Sat Apr 12 03:54:17 2008 +0000

    Fix INFORM support a little.

commit b6e2882d9a5921ac3162b9395d232530617d1eb3
Author: Roy Marples <roy@marples.name>
Date:   Fri Apr 11 16:23:31 2008 +0000

    Punt unused file.

commit 1a60d14fa2f91876b9ec14d6e6c88d97dacf6c4c
Author: Roy Marples <roy@marples.name>
Date:   Fri Apr 11 16:14:55 2008 +0000

    Normally I hate massive code drops, but heh.
    The code has been drastically re-arranged.
    Instead of populating a custom structure while parsing dhcp messages, we now pluck what we need right out of the message itself. We have custom functions and a lookup table to make this really easy.
    This makes us more like dhclient and udhcpc, and will enable us to easily add (and remove!) more dhcp options without having to actually change the code (much).
    We now store the real dhcp message we got in /var/db/dhcpcd-$iface.lease, the mtime of the file being used as when we got the lease. This file is read in when re-using an old lease instead of parsing the .info file.
    The benefit of all of this means that we're actually ~15k smaller when compiled with the same features.
    This has been tested for quite some time, and I'm pretty sure most bugs with the 3.2 branch have been fixed whilst making this. Right now, we are 99% command line compatible with the 3.2 branch.

commit 211da073490c5decd1deb46034385437a54ca977
Author: Roy Marples <roy@marples.name>
Date:   Mon Mar 31 10:23:59 2008 +0000

    read(2) works on ssize_t so we should use this rather than size_t for our buffers. A DHCP or ARP packet still easily fits into this.

commit 0a204e3b9886bd2a88084a5d5796a997ca610c84
Author: Roy Marples <roy@marples.name>
Date:   Sun Mar 30 08:26:34 2008 +0000

    Pointless looping in bpf.packet, as pointed out by D. Young.

commit f828cecf36a0b8457546b09963d16e192e5936e4
Author: Roy Marples <roy@marples.name>
Date:   Sun Mar 30 08:07:37 2008 +0000

    Use d_droute.

commit e0ac6cb8f20276f62c28e1a2d590711b32fcca75
Author: Roy Marples <roy@marples.name>
Date:   Sat Mar 29 19:14:52 2008 +0000

    bitmask options should take less space than booleans.

commit 1191a089fb9a4ba6bf766a1dbd7ca826075f20c8
Author: Roy Marples <roy@marples.name>
Date:   Sat Mar 29 17:03:34 2008 +0000

    strlcpy is more lightweight than memcpy.

commit 2f174b390524336333a2d0713746a96604fe9fda
Author: Roy Marples <roy@marples.name>
Date:   Sat Mar 29 16:58:42 2008 +0000

    Fix compile on NetBSD.

commit c910d0d0a84907051c6436c9fef97e30b2aec212
Author: Roy Marples <roy@marples.name>
Date:   Sat Mar 29 16:50:18 2008 +0000

    Remove all logging from if.c and into the proper bits.

commit b4fb54de2c7813d375b4623db290cf43791e3752
Author: Roy Marples <roy@marples.name>
Date:   Sat Mar 29 13:07:39 2008 +0000

    Convert has_address into a macro.

commit b6e1e0ba13d9ffaf9e3597a110b81a7f08aa1ee5
Author: Roy Marples <roy@marples.name>
Date:   Sat Mar 29 12:53:24 2008 +0000

    flush_addresses can become a macro.

commit 75e802f3d49ad0bc85bd7c0faa6038eb2f98124c
Author: Roy Marples <roy@marples.name>
Date:   Sat Mar 29 11:41:00 2008 +0000

    Save a few more bytes.

commit c9cd4f845aff87a8b6d1faae544fc93dff2035e4
Author: Roy Marples <roy@marples.name>
Date:   Sat Mar 29 11:36:43 2008 +0000

    Move log_route to if.c

commit 9c8429fdfc5dfb3a066184237f8c31a6b68240d6
Author: Roy Marples <roy@marples.name>
Date:   Sat Mar 29 09:48:57 2008 +0000

    We need sys/stat.h on fbsd.

commit 453072ef8fa4589a255f797c7fdc64fccb775e5f
Author: Roy Marples <roy@marples.name>
Date:   Sat Mar 29 08:40:55 2008 +0000

    Rework our error handling code a little to save ~5k on x86_64

commit f57164233dfc48c62679106c8c870bc88119885b
Author: Roy Marples <roy@marples.name>
Date:   Fri Mar 28 17:56:45 2008 +0000

    Fix compile on Linux.

commit 85763ffbe53a7bb8a4db4e89b41215599d1e1dc3
Author: Roy Marples <roy@marples.name>
Date:   Fri Mar 28 15:07:23 2008 +0000

    It's more proper to use ~0U here.

commit 5d57c77990a0222beff0cadf03d7455eb5c679d4
Author: Roy Marples <roy@marples.name>
Date:   Fri Mar 28 13:16:04 2008 +0000

    Install INFODIR in the Makefile to reduce the dhcpcd code size.

commit 02ea7094fc2cfbe496968c24dd1c0439ffe62867
Author: Roy Marples <roy@marples.name>
Date:   Fri Mar 28 12:39:53 2008 +0000

    No need to create /etc

commit 1812bb1ef0612cc599a320b503ad9263e8b6beee
Author: Roy Marples <roy@marples.name>
Date:   Fri Mar 28 12:19:49 2008 +0000

    Use strlcpy here.

commit 88bfc35b39458d3ca35f2b5ae0d7ac0cc132b621
Author: Roy Marples <roy@marples.name>
Date:   Fri Mar 28 12:10:12 2008 +0000

    Don't bother compiling these if undefined.

commit e0cf541d4305fa27980f8c24f829b13cf6fd7881
Author: Roy Marples <roy@marples.name>
Date:   Fri Mar 28 11:54:29 2008 +0000

    Use the close_on_exec function here.

commit 5773891d0a84fdd717bcc9f31e706b19db154723
Author: Roy Marples <roy@marples.name>
Date:   Fri Mar 28 11:45:34 2008 +0000

    It appears that some DHCP servers don't reply to a DISCOVER if we just have DNS_SERVER in the parameter list, so just use the whole list all the time.

commit d7f02399bd81eeb667b122b6c6123a3294628502
Author: Roy Marples <roy@marples.name>
Date:   Thu Mar 27 20:23:34 2008 +0000

    Fix compile on fbsd-6.2

commit ce51e90ffa9b9fc2001f0918ffee28201e5bfd70
Author: Roy Marples <roy@marples.name>
Date:   Thu Mar 27 20:10:31 2008 +0000

    If not Linux then assume BSD.

commit 958fad74c4cc54102595562481115d2428c809a2
Author: Roy Marples <roy@marples.name>
Date:   Tue Mar 25 08:36:28 2008 +0000

    Fix compiler warnings.

commit c39cf2100b087d1da5958af7f4f23927ea991b99
Author: Roy Marples <roy@marples.name>
Date:   Mon Mar 24 20:09:30 2008 +0000

    Add alternative building method to save around 500 bytes.

commit ad97052cfd93290b02dff183d3e4433c35aa9a3d
Author: Roy Marples <roy@marples.name>
Date:   Mon Mar 24 20:08:51 2008 +0000

    Use functions over bloaty macros to save a few bytes.

commit 5c7da814480414082528912a7f383c2fec22ac6a
Author: Roy Marples <roy@marples.name>
Date:   Mon Mar 24 01:45:37 2008 +0000

    Fix compile on BSD.

commit a9819bfb1fdcb3233f49d5e0fee7939868005a4d
Author: Roy Marples <roy@marples.name>
Date:   Mon Mar 24 01:29:33 2008 +0000

    Split interface and socket out into OS bpf, if-bsd and if-linux.

commit daee47fc1d49cda866ed641bc516c627be75fc6d
Author: Roy Marples <roy@marples.name>
Date:   Thu Mar 20 17:03:55 2008 +0000

    Fix compile on NetBSD

commit bea09961d892e180f356c25cce6b3dd021c25366
Author: Roy Marples <roy@marples.name>
Date:   Thu Mar 20 17:00:11 2008 +0000

    Remove uneeded structs.

commit 8d212424765794740d61d4b4fe5db3f2f6800eb9
Author: Roy Marples <roy@marples.name>
Date:   Thu Mar 20 16:47:51 2008 +0000

    Change code style to match the BSDs in the hope the might adpot it instead of dhclient.

commit 74befdac5d0d3c0803cd15c3db85c3ba81064bc8
Author: Roy Marples <roy@marples.name>
Date:   Sun Mar 16 08:22:01 2008 +0000

    Work with zerolength options again.

commit 51660b1d476a8fe3f1e46309e26a124337d967a7
Author: Roy Marples <roy@marples.name>
Date:   Wed Mar 5 12:34:29 2008 +0000

    Include our own queue.h only for Linux systems.

commit 698dd74463613dd7134e718f707c20801a4bdbca
Author: Roy Marples <roy@marples.name>
Date:   Tue Mar 4 11:44:44 2008 +0000

    Import STAIL_QUEUE from FreeBSD headers as not all libc's we support provide it.

commit a7e70542a7d798fb7e15bd63f5e173cf2457fe9a
Author: Roy Marples <roy@marples.name>
Date:   Tue Mar 4 11:24:28 2008 +0000

    Add back asm/types.h direct include for crappy 2.4 linux headers.

commit b7fdefd260d688c053b948ae7b28566930a3afb1
Author: Roy Marples <roy@marples.name>
Date:   Tue Mar 4 11:05:23 2008 +0000

    Allow --fqdn to work without an option, defaulting to both.

commit bb213ed6bfc39e2d21f00410916c980d1421e164
Author: Roy Marples <roy@marples.name>
Date:   Mon Feb 25 08:28:19 2008 +0000

    Release dhcpcd-3.2.3

commit 808f78582dc16ce4220db7b17b20e71b7bcf71f9
Author: Roy Marples <roy@marples.name>
Date:   Sun Feb 24 10:56:21 2008 +0000

    NIS could just be a domain without addresses.

commit 57a0827f7090929a3b2ef6a5d4b95f67ea8593c8
Author: Roy Marples <roy@marples.name>
Date:   Sat Feb 23 23:12:54 2008 +0000

    Fix hostname lookup, #31

commit a869183969f9cf1430116daa0dfe055ff5ff73d0
Author: Roy Marples <roy@marples.name>
Date:   Sat Feb 23 23:12:09 2008 +0000

    Clean up some valgrind errors.

commit 56f32d403768f7cb71e2c595206b39dc6640ec52
Author: Roy Marples <roy@marples.name>
Date:   Fri Feb 22 14:53:02 2008 +0000

    As we don't use the udp socket, set the recieve buffer to 1.

commit 349d5cd8ea4e5626af15f7bc4f42baab8ca4a12a
Author: Roy Marples <roy@marples.name>
Date:   Fri Feb 22 14:35:27 2008 +0000

    Fix building on GNU/kFreeBSD, Debian #467005

commit 4ccd6ec66f331bdf2232dd886380b94d613ead77
Author: Roy Marples <roy@marples.name>
Date:   Fri Feb 22 11:45:18 2008 +0000

    PCC compiler fixes.

commit d030cc06d621afb075e57033d89b8205685e1b04
Author: Roy Marples <roy@marples.name>
Date:   Fri Feb 22 10:11:21 2008 +0000

    Always open UDP port for DHCP client t avoid more ICMP nastyness.

commit 33184ac664ba3c2e3eba50306c2317a77242172e
Author: Roy Marples <roy@marples.name>
Date:   Fri Feb 22 09:29:40 2008 +0000

    ifreqs could have more than structs larger than sockaddr, so use the union size.

commit 817201ac0e6ddd1c428540f7ee143a83032a6f30
Author: Roy Marples <roy@marples.name>
Date:   Thu Feb 21 20:55:27 2008 +0000

    Style.

commit 4695df5739cf74f3b7c78ea2dc4331f1885e7c31
Author: Roy Marples <roy@marples.name>
Date:   Thu Feb 21 20:50:01 2008 +0000

    Fix rebinding.

commit f58bb07c865ac778340b5c225ad985a452e8a662
Author: Roy Marples <roy@marples.name>
Date:   Thu Feb 21 17:59:15 2008 +0000

    Be more RFC conformant regarding sending server id.

commit 8ee31d946ffec9c56c8880f65a058922c9f75c92
Author: Roy Marples <roy@marples.name>
Date:   Thu Feb 21 16:45:01 2008 +0000

    Add a listening port for linux for when we have configured an address and need to renew. Otherwise linux likes to generate an ICMP destination unreachable port unreachable message, which is probably a linux bug as we have obviously read the packet correctly through our packet filter.

commit 4259dca8008f2316b7bb94c308c62d2fb7a7819f
Author: Roy Marples <roy@marples.name>
Date:   Thu Feb 21 16:35:59 2008 +0000

    When renewing, talk to the server ip address.

commit 38ff2646bc15d3296d6ad27b498648c26f9fefa3
Author: Roy Marples <roy@marples.name>
Date:   Thu Feb 21 16:35:15 2008 +0000

    Fix mode of pidfile so any user can read it.

commit 1428b446653c1015b9e1bded886087a53015e30b
Author: Roy Marples <roy@marples.name>
Date:   Thu Feb 21 07:45:02 2008 +0000

    Fix compile on NOMMU systems.

commit 6da1a3d0cf375fc9f2087d0a3ef2dfa5f1a8269a
Author: Roy Marples <roy@marples.name>
Date:   Wed Feb 20 19:09:30 2008 +0000

    Bail out of sys/queue.h lacks STAILQ

commit 8c43c8baa57b46686bb6a6a66f15a2f597c0181a
Author: Roy Marples <roy@marples.name>
Date:   Wed Feb 20 17:49:51 2008 +0000

    Support the PCC compiler.

commit 4e0e64a9d9096ea715218d464b5a6cd692e71571
Author: Roy Marples <roy@marples.name>
Date:   Wed Feb 20 17:13:12 2008 +0000

    Quickly fix a valgrind error.

commit 92b2def08c62396b2909ac4721ccd6f3cd6b7f47
Author: Roy Marples <roy@marples.name>
Date:   Wed Feb 20 17:09:14 2008 +0000

    Release dhcpcd-3.2.2

commit 7fc53ef79484dd1ee618be3f39b8efba95e2d24e
Author: Roy Marples <roy@marples.name>
Date:   Wed Feb 20 17:04:56 2008 +0000

    Use tailq from queue.h instead of rolling our down linked lists.

commit 946bc2424bacc4f2a7c23090e263b31eb54639d5
Author: Roy Marples <roy@marples.name>
Date:   Wed Feb 20 12:15:13 2008 +0000

    Add a comment about older linux headers and -std=c99.

commit 925ec2f6bdc149f0274a60c8ffdb708c8f5c47af
Author: Roy Marples <roy@marples.name>
Date:   Wed Feb 20 10:35:12 2008 +0000

    Don't include -pipe by default.

commit 3261396e1cf43efb4fdcc48d969c9b8634fa0a83
Author: Roy Marples <roy@marples.name>
Date:   Wed Feb 20 10:12:40 2008 +0000

    Test each CC flag we want to set so we will work on other compilers such as pcc when it matures a little.

commit 7aee5018953a862298d3a3b06de5f4a4f37f37ec
Author: Roy Marples <roy@marples.name>
Date:   Tue Feb 19 18:31:37 2008 +0000

    Typo.

commit d13f8f2808c4d17dd1ad348322b26ebc6bd0f9c4
Author: Roy Marples <roy@marples.name>
Date:   Tue Feb 19 18:30:16 2008 +0000

    Remove hardcoded defines for linux and add a nasty hackaround for glibc.

commit 76d06e75e83f798f71532fcc1e50da3d344f32ca
Author: Roy Marples <roy@marples.name>
Date:   Tue Feb 19 17:43:39 2008 +0000

    Fix compile.

commit f6038d23e4a5f29aa481632a9d3868089a541e5a
Author: Roy Marples <roy@marples.name>
Date:   Tue Feb 19 17:35:31 2008 +0000

    Linux-2.6.23 finally supports -std=c99 for asm/types.h, included by headers we include.

commit 0d934a0ae46eaca1b32074fc324a8102e48f3103
Author: Roy Marples <roy@marples.name>
Date:   Tue Feb 19 09:57:27 2008 +0000

    Add comments about interupts and stop polling for events we ignore.

commit 1f765cc21bad15aa3cd59b8b30460bc7c9ded7f0
Author: Roy Marples <roy@marples.name>
Date:   Mon Feb 11 21:43:34 2008 +0000

    When polling and interupted, continue as the signal will then be in our pipe.

commit 0ee2469dc74a371151f4affd0c6b508f942fc4de
Author: Roy Marples <roy@marples.name>
Date:   Mon Feb 11 21:42:53 2008 +0000

    Fix compile warning for new netlink callback header.

commit 568f95fa5d90c1e9b2267d4086809782a4e36559
Author: Roy Marples <roy@marples.name>
Date:   Sun Feb 10 23:40:24 2008 +0000

    Fix poll timeout.

commit d78d972e6f34625827ea48e1cd7c37e4304b1f8a
Author: Roy Marples <roy@marples.name>
Date:   Sun Feb 10 23:30:08 2008 +0000

    Fix compile on NetBSD.

commit 182ac3def5aabd9cfcd16549c0f9caecf94b5c3f
Author: Roy Marples <roy@marples.name>
Date:   Sun Feb 10 23:08:34 2008 +0000

    Just warn when running as non root.

commit b014ee76e17164890317b5a3d9ba070533560f41
Author: Roy Marples <roy@marples.name>
Date:   Sun Feb 10 23:01:44 2008 +0000

    Replace select with poll and nanosleep.

commit ca1e79c0f854186ce84eb0526e9a29bbb0d0c084
Author: Roy Marples <roy@marples.name>
Date:   Sat Feb 9 21:58:05 2008 +0000

    We should only have one bit of code to mark sockets close_on_exec.

commit 2136d44495f4bd145ab6df48bc951abb70bfe564
Author: Roy Marples <roy@marples.name>
Date:   Wed Feb 6 10:18:03 2008 +0000

    Rename getline to get_line so we don't conflict with crappy GNU headers that wrongly expose getline when _GNU_SOURCE isn't set. Bug #17.

commit c737e99e65a44c413d3c16d6ce79403727033d7e
Author: Roy Marples <roy@marples.name>
Date:   Tue Feb 5 21:38:00 2008 +0000

    Allow hardware type to be specified in the ClientID. This is needed, as the ethernet length matches other lengths.

commit 0cd986e35c1b771252dc28e7b8781a7a7e38f9e7
Author: Roy Marples <roy@marples.name>
Date:   Sun Feb 3 22:35:48 2008 +0000

    We should block and reset our signals when daemonising also.

commit 1b3ab874f4aec73ed01dfb8055a05cd813d27342
Author: Roy Marples <roy@marples.name>
Date:   Sat Feb 2 21:56:12 2008 +0000

    Revert posix_spawn as it seems only glibc supports it for us right now. Hope that libc is tolerant to changing signals inside a vfork if we put them back afterwards in the parent.

commit 76ef136f1d0b2c1252da87a3c39e489e579f7eb0
Author: Roy Marples <roy@marples.name>
Date:   Sat Feb 2 19:17:08 2008 +0000

    Block signals to avoid potential signal racing on BSD using fork.

commit 376d7a6ec54736eb4b1304da6bc050833134242f
Author: Roy Marples <roy@marples.name>
Date:   Sat Feb 2 18:08:49 2008 +0000

    Of course, BSD systems don't have posix_spawn yet :/

commit 3712922130df3936d06d31c166a8f49435428ce7
Author: Roy Marples <roy@marples.name>
Date:   Sat Feb 2 17:28:22 2008 +0000

    Use posix_spawn instead of vfork to avoid signal races.

commit 091c081bd1e502c36213dc15e9bb966e532359ea
Author: Roy Marples <roy@marples.name>
Date:   Thu Jan 31 14:18:30 2008 +0000

    Fix adding routes on BSD.

commit 61a22947abd96a1dba9b11d7e383477500453b87
Author: Roy Marples <roy@marples.name>
Date:   Thu Jan 31 11:19:17 2008 +0000

    Move clientid generation to client.c and put it on the interface object inplace of duid. Always save the ClientID as a hex string. This reduces our binary size.

commit 6d0d19b9f7b94f06d6fd3d926fcaf70441ea100e
Author: Roy Marples <roy@marples.name>
Date:   Wed Jan 30 10:08:59 2008 +0000

    Specify install modes for all our files.

commit 501c5cd2a9c04168d0118a5990dcf4e5447036d9
Author: Roy Marples <roy@marples.name>
Date:   Wed Jan 30 09:42:20 2008 +0000

    BPF documentation says use +, so lets do that.

commit 9c5929609c19f79275b3c6c0fdb2664de35c10b8
Author: Roy Marples <roy@marples.name>
Date:   Tue Jan 29 11:26:24 2008 +0000

    Release dhcpcd-3.2.1

commit 4fc07b2a2da30e3e769306fc93b1983681746f21
Author: Roy Marples <roy@marples.name>
Date:   Tue Jan 29 11:20:55 2008 +0000

    Update comment style.

commit c1c8a6816bc3a2fcad3a77089047238a2d879c7c
Author: Roy Marples <roy@marples.name>
Date:   Tue Jan 29 11:12:59 2008 +0000

    Re add the code to re-send message now - last time sent >= TIMOUT_MINI just incase.

commit 2051a07288fb6fe5c07dd6b239e914482efa20ed
Author: Roy Marples <roy@marples.name>
Date:   Tue Jan 29 10:53:59 2008 +0000

    Better to use the size of the packet.

commit 0b1a8fdb7a6f2c6b80761601c316e66512020fbc
Author: Roy Marples <roy@marples.name>
Date:   Tue Jan 29 10:46:54 2008 +0000

    Man page updates.

commit 7fcc9e648bfa464c142a6a28e2431b19ac744cdd
Author: Roy Marples <roy@marples.name>
Date:   Mon Jan 28 17:47:54 2008 +0000

    Use sizeof with the variable, not the declaration more.

commit 692967eb0e3cc72c8579de467396b3deafe43356
Author: Roy Marples <roy@marples.name>
Date:   Mon Jan 28 16:32:04 2008 +0000

    Use sizeof with the variable, not the declaration.

commit 7ab8b9f184628ec9bd7466df72e61d621185fa55
Author: Roy Marples <roy@marples.name>
Date:   Mon Jan 28 15:32:04 2008 +0000

    Introduce xzalloc, which zeros memory as well as allocates it. This makes us smaller.

commit 36c01cf227ef87707950b60d6feccb5098a73b01
Author: Roy Marples <roy@marples.name>
Date:   Mon Jan 28 14:33:46 2008 +0000

    Man page updates.

commit 43137e797f2befea057f7db47657c0bad4242419
Author: Roy Marples <roy@marples.name>
Date:   Mon Jan 28 14:29:54 2008 +0000

    Style

commit 1ca735d85fdb60f400709296c78e99a569aca96a
Author: Roy Marples <roy@marples.name>
Date:   Mon Jan 28 14:17:46 2008 +0000

    We shouldn't need to re-send this message now as our timeout and signal interupt code is a lot more robust plus we now use LPF. We can always add it back if we need to.

commit db881afe318a0af8e0e5617ce7527da7d3de63b8
Author: Roy Marples <roy@marples.name>
Date:   Sun Jan 27 19:49:32 2008 +0000

    We should zero the sa structure before use.

commit 777a0fa2cd97d88c9899ac5bc5dcfc08f7597822
Author: Roy Marples <roy@marples.name>
Date:   Sun Jan 27 19:48:32 2008 +0000

    Fix compile on NetBSD

commit 0376353cfc371c545c97716c09891ccd5e55c94c
Author: Roy Marples <roy@marples.name>
Date:   Sun Jan 27 18:39:31 2008 +0000

    Use sigaction over signal and check iface and state before freeing

commit 8404debd0687f23f35e44a11a66073a6ca362e63
Author: Roy Marples <roy@marples.name>
Date:   Sun Jan 27 11:31:01 2008 +0000

    Linux has LPF, which is almost like BPF. Let's use and let the kernel filter out what we don't need.

commit 13be7b8d0159b738e74546333fafe12ca1a3cd6a
Author: Roy Marples <roy@marples.name>
Date:   Sat Jan 26 10:40:53 2008 +0000

    cast to int for isxdigit

commit 504f915097af48572c792417842d47d1ca17c990
Author: Roy Marples <roy@marples.name>
Date:   Fri Jan 25 19:35:45 2008 +0000

    Add NETWORK= to dhcpcd-.info, bug #10

commit 0162a5acc624c8982af2b852eaa05eede5bec7a9
Author: Roy Marples <roy@marples.name>
Date:   Fri Jan 25 11:02:52 2008 +0000

    Fix ntpd.conf

commit b5252932f1610f4631ed5d97dde518f09283d894
Author: Roy Marples <roy@marples.name>
Date:   Fri Jan 25 10:53:43 2008 +0000

    Release dhcpcd-3.2.0

commit 6d0509623a8376d5394da10f9a8d45c67709303c
Author: Roy Marples <roy@marples.name>
Date:   Fri Jan 25 10:18:13 2008 +0000

    Store and validate the duid using our generic hwaddr_ calls

commit d8bfb688ec1d9a86ae30eee05ecd7c6e591041f5
Author: Roy Marples <roy@marples.name>
Date:   Fri Jan 25 09:52:58 2008 +0000

    If ClientID matches a hardware address formart, encode it as such.

commit b6d70b1ad98755a47387216c14c4511bc0fb6a59
Author: Roy Marples <roy@marples.name>
Date:   Thu Jan 24 16:49:17 2008 +0000

    Don't use const const here - doh.

commit c8f3000b6016544b6b8d80839fc12892bdaecfde
Author: Roy Marples <roy@marples.name>
Date:   Thu Jan 24 15:01:19 2008 +0000

    DHCP over Infiniband requires a fudged broadcast address.

commit 3b573fc74fe01d2ff7e857af758979f32ebb0a8b
Author: Roy Marples <roy@marples.name>
Date:   Thu Jan 24 11:14:18 2008 +0000

    Bump version and fix infiniband number.

commit 0876454594adb1fb31eaeb1e615709ebfc7f4c94
Author: Roy Marples <roy@marples.name>
Date:   Tue Jan 22 16:54:38 2008 +0000

    renewing a lease should not cause dhcpcd to exit.

commit df445a1da1e60f4772141d93c1bace3cbc239eea
Author: Roy Marples <roy@marples.name>
Date:   Mon Jan 21 22:04:43 2008 +0000

    Zero the rset when we fallthrough the waiting for packet.

commit cb8d2261b8cbe1fe5936ccdc0ad7548d79485267
Author: Roy Marples <roy@marples.name>
Date:   Mon Jan 21 21:52:20 2008 +0000

    Fix compile on Linux where.

commit dc9be8a47ffa109785d348d92fdc6c915be734c4
Author: Roy Marples <roy@marples.name>
Date:   Mon Jan 21 21:19:53 2008 +0000

    Quiet some lint warnings.

commit f4db036104af1015a4ffd7b3d3bcd55fc47d6292
Author: Roy Marples <roy@marples.name>
Date:   Mon Jan 21 16:08:42 2008 +0000

    Prefer for (;;) over while (1)

commit df6a66f6b7ae9112c66ad4f5ff37d3fb7ec9ef68
Author: Roy Marples <roy@marples.name>
Date:   Mon Jan 21 15:13:59 2008 +0000

    Re-factor our state engine, splitting out the massive switch block into smaller functions. Hopefully I've not introduced any bugs as it seems to work fine.

commit 62207ad3ee5ecd282d7f22fe88ee17dc882169de
Author: Roy Marples <roy@marples.name>
Date:   Mon Jan 21 15:12:51 2008 +0000

    Don't raise signals on child exits.

commit 8dffa4bc13ae9158e58b931afb91be7cb0d8dedf
Author: Roy Marples <roy@marples.name>
Date:   Mon Jan 21 15:12:31 2008 +0000

    We should use ssize_t here.

commit 02945958901892924cc83eb2042cfcd8499862bb
Author: Roy Marples <roy@marples.name>
Date:   Mon Jan 21 15:10:46 2008 +0000

    inet_aton returns 1 for success

commit 4ae91d0aed3c66e50342cec15f651d1734671cad
Author: Roy Marples <roy@marples.name>
Date:   Thu Jan 17 18:49:26 2008 +0000

    Change man page building to a suffix rule.

commit 07946e83eb0cf95ed341d02dfbda65cc9ba516fb
Author: Roy Marples <roy@marples.name>
Date:   Thu Jan 17 17:54:03 2008 +0000

    Formatting.

commit 5bdc672976ca9e3e669f3efda1cd32382f5622a4
Author: Roy Marples <roy@marples.name>
Date:   Thu Jan 17 17:51:00 2008 +0000

    We should use caddr_t instead of our own types for arp hardware addresses.

commit 1c4ba5d89abcd587b0bd5da524632ae5987cd092
Author: Roy Marples <roy@marples.name>
Date:   Thu Jan 17 14:16:13 2008 +0000

    Re-write the man page using the mdoc format.

commit 4f5e2714086a03dce20b69a388b1486c8070f8b6
Author: Roy Marples <roy@marples.name>
Date:   Wed Jan 16 17:49:58 2008 +0000

    Exit through our abort label to ensure we always clean our memory.

commit 5c3c3a9d5f5d8695273404968d329abce816da49
Author: Roy Marples <roy@marples.name>
Date:   Wed Jan 16 17:38:02 2008 +0000

    Don't request a NULL address and supply a serveraddress when we should.

commit 4a0a186b5e2a2b0f3a6bd658b4c876d98e14fca8
Author: Roy Marples <roy@marples.name>
Date:   Wed Jan 16 17:34:36 2008 +0000

    More formatting fixes.

commit 2f736fb7ce0e5e8a21387ac78819bebf673eca79
Author: Roy Marples <roy@marples.name>
Date:   Wed Jan 16 16:38:47 2008 +0000

    Re format for standard tabs.

commit fc367a018f017e43544224bea067d6957efb4eca
Author: Roy Marples <roy@marples.name>
Date:   Wed Jan 16 15:59:14 2008 +0000

    Add correct license

commit 1fe2d190cfa6a558e88d170e883654a52626c342
Author: Roy Marples <roy@marples.name>
Date:   Wed Jan 16 14:32:35 2008 +0000

    We now work with C90 compilers, so no need to enforce C99.

commit 7ed0e14de0b62127ab32344e88e538ea3be4643f
Author: Roy Marples <roy@marples.name>
Date:   Wed Jan 16 13:40:42 2008 +0000

    start and last_send should really be time_t also.

commit 398ac8be8acb725f655ab0ed6e9f916bb6e83e5a
Author: Roy Marples <roy@marples.name>
Date:   Wed Jan 16 13:16:11 2008 +0000

    uptime should return time_t

commit 4417db8791d49380f2619686426b32d6677de65e
Author: Roy Marples <roy@marples.name>
Date:   Tue Jan 15 15:11:00 2008 +0000

    Fix -S in getopt.

commit 0642e6be9ec68559bd7053f04683d2fca1881a2f
Author: Roy Marples <roy@marples.name>
Date:   Tue Jan 15 14:34:28 2008 +0000

    Add -S to optionally request a Microsoft CSR. -SS only request a Microsoft CSR and not a normal.

commit e859899478755ddcc191312d261a66065dc71d84
Author: Roy Marples <roy@marples.name>
Date:   Wed Jan 9 15:51:04 2008 +0000

    Release 3.1.9

commit b9d2cb68d290ed8606864e5ce7207ad4d42c1d2c
Author: Roy Marples <roy@marples.name>
Date:   Wed Jan 9 14:16:18 2008 +0000

    Fix INFODIR

commit 8585e629ee347011937635d92b7e99743cdffd7a
Author: Roy Marples <roy@marples.name>
Date:   Wed Jan 9 13:41:16 2008 +0000

    Disallow arp claim for IEEE1394 per RFC 2734 thanks to pawka.

commit be37cc89a16b15988b7860e7779bc208f81c3491
Author: Roy Marples <roy@marples.name>
Date:   Wed Jan 9 12:34:34 2008 +0000

    Write the real routing message length, fixing the addition of routes on NetBSD and hopefully  OpenBSD.

commit 1bd3b699144fdac89487e48fe3e0ae26ab654675
Author: Roy Marples <roy@marples.name>
Date:   Wed Jan 9 11:45:30 2008 +0000

    .depend shouldn't need scripts.

commit b72d52b39b0695c483fb164e0d71edb53029ee32
Author: Roy Marples <roy@marples.name>
Date:   Wed Jan 9 10:19:16 2008 +0000

    Bump the version for testing.

commit a98b2928835f4027f67dae5ca44977c1ae61314a
Author: Roy Marples <roy@marples.name>
Date:   Wed Jan 9 10:17:57 2008 +0000

    Only ignore dhcpcd bz2 files.

commit 77ea0429122c831a5330472d206a651374e32763
Author: Roy Marples <roy@marples.name>
Date:   Wed Jan 9 10:17:10 2008 +0000

    Use correct castings for UINT16_MAX.

commit 3cea28afc8608614ac7e6651f41941a5fe4ce732
Author: Roy Marples <roy@marples.name>
Date:   Wed Jan 9 10:12:59 2008 +0000

    Default all int entries in the dhcp header to unsigned.

commit 890fe1c5a47f270316fef8b419d8aac587e5cf92
Author: Roy Marples <roy@marples.name>
Date:   Wed Jan 9 10:02:28 2008 +0000

    common.h now defines a simple define to create the function in common.c. NetBSD needs srandomdev also.

commit a165b0a92af9103e7645120be472310ed397a4b3
Author: Roy Marples <roy@marples.name>
Date:   Wed Jan 9 09:38:00 2008 +0000

    We no longer need these headers.

commit 2c26c9e5aa399a02c7b5858648322e03f69540c5
Author: Roy Marples <roy@marples.name>
Date:   Tue Jan 8 11:04:52 2008 +0000

    Ignore *.bz2 files

commit 4928928e14c7ddf3751e3e01c45c42e04da91b7b
Author: Roy Marples <roy@marples.name>
Date:   Tue Jan 8 10:51:03 2008 +0000

    Fix makefiles for installing via ports

commit 8d6ce033621674d66c098126f0429100f68af21b
Author: Roy Marples <roy@marples.name>
Date:   Tue Jan 8 10:22:57 2008 +0000

    Fix the man install

commit 926831076b3f982c1fd047b0e18b4f9ec4b9df5a
Author: Roy Marples <roy@marples.name>
Date:   Tue Jan 8 10:03:18 2008 +0000

    Style

commit ed812650733935e9ef3b241ac31cdd7728fa9195
Author: Roy Marples <roy@marples.name>
Date:   Tue Jan 8 10:02:25 2008 +0000

    Add comment about where to find the ChangeLog, and now prefer my bugzilla over the cruddy berlios bug reporting system.

commit 782830eb5d57c8a1bd90f1ad3973dddbceb29ee1
Author: Roy Marples <roy@marples.name>
Date:   Tue Jan 8 09:51:23 2008 +0000

    Belatedly into 2008 :)

commit ada3db88e9c51e933311de7e1ed0ed536e02f124
Author: Roy Marples <roy@marples.name>
Date:   Tue Jan 8 09:41:22 2008 +0000

    Add a dist mk stub and tweak the other mk's for style.

commit 5e41e03517523e10a5fd59f33ff887e5ac5df364
Author: Roy Marples <roy@marples.name>
Date:   Tue Jan 8 09:40:24 2008 +0000

    Remove ChangeLog, use the git log instead.

commit a7e645cd4ff33a1c3c371c3067e16c2fbd2c21d5
Author: Roy Marples <roy@marples.name>
Date:   Mon Jan 7 23:46:47 2008 +0000

    Add an ignore file

commit ab5bf7c286014c1c7eb303f3c3811aab89712d22
Author: Roy Marples <roy@marples.name>
Date:   Mon Jan 7 23:45:48 2008 +0000

    Move to a BSD style Makefile and supply mk stubs that work with gmake and pmake.

commit a0bd10b40ca2cd5ba0e4b60baff584a50699006c
Author: Roy Marples <roy@marples.name>
Date:   Mon Jan 7 20:52:49 2008 +0000

    Stop using asprintf as it's not portable.

commit b0b82a14128374384c40530967f03c488abfce5e
Author: Roy Marples <roy@marples.name>
Date:   Mon Jan 7 20:49:25 2008 +0000

    Clean up some valgrind warnings.

commit 772f18a5e3d334ac613760dde03c753aafc7c08d
Author: Roy Marples <roy@marples.name>
Date:   Mon Jan 7 20:48:32 2008 +0000

    Always relaunch with the full path.

commit 80d2c6e878ab621e4e0520ac29004352c765c050
Author: Roy Marples <roy@marples.name>
Date:   Mon Jan 7 20:47:58 2008 +0000

    Always exit throught the abort label so we clean up our memory like a good citizen.

commit 876bd5f9ed6ddd02e1b4811a5aea30932ab9d70d
Author: Roy Marples <roy@marples.name>
Date:   Mon Jan 7 20:47:06 2008 +0000

    Stop trying to fudge gmake including the .depend

commit b32d2967bc9f6d01cf5c95fb0b92cf2e670db0d2
Author: Roy Marples <roy@marples.name>
Date:   Mon Jan 7 19:13:54 2008 +0000

    Avoid valgrind errors with getline.

commit b5d0d901da7cd53ea7f2b3a21c4ef6cbb4ce69c0
Author: Roy Marples <roy@marples.name>
Date:   Mon Jan 7 18:14:51 2008 +0000

    Stop using static inflexable buffers when cleaning metas and reading files.

commit 52a76582a60d360f74124028ea1f42ea446c1535
Author: Roy Marples <roy@marples.name>
Date:   Wed Nov 28 16:14:38 2007 +0000

    whitespace

commit 1cc62a9994db81e6cf141c9e933962b279937ad8
Author: Roy Marples <roy@marples.name>
Date:   Tue Nov 27 22:03:42 2007 +0000

    Use generic BSD define.

commit 23d0f4e2d182db42c7d9544e5d93d37ffa879523
Author: Roy Marples <roy@marples.name>
Date:   Sat Nov 24 11:03:49 2007 +0000

    3.1.8

commit 2d5beef7d6f2e4f51873bfca95dca7ab004ff10d
Author: Roy Marples <roy@marples.name>
Date:   Sat Nov 24 10:30:14 2007 +0000

    Don't force CFLAGS

commit 0a3b673efc5de3122c0606ad148f2aca8c37eec9
Author: Roy Marples <roy@marples.name>
Date:   Wed Nov 21 10:31:30 2007 +0000

    Merge branch 'master' of marples:/var/git/dhcpcd

commit b0084134a0791e3c6b41a52b4d00b53d0510587d
Author: Roy Marples <roy@marples.name>
Date:   Wed Nov 21 10:31:16 2007 +0000

    We shouldn't specify log or drift locations

commit 570a489d23480189c91f56f317a767bc581dfaec
Author: Roy Marples <roy@marples.name>
Date:   Mon Nov 19 21:00:36 2007 +0000

    whitespace

commit b7d9b0221c8acacfdf63cac7d91cdcf6d7ff64f8
Author: Roy Marples <roy@marples.name>
Date:   Mon Nov 19 20:23:30 2007 +0000

    Don't hardcode as much

commit 2519911e2e3c73c3a7f6b9baf5c2156e2d6c73d8
Author: Roy Marples <roy@marples.name>
Date:   Fri Nov 16 13:08:00 2007 +0000

    Fix file_in_path

commit 9868f79cb4d57c2cef1cb76833ee107ad37dfaaa
Author: Roy Marples <roy@marples.name>
Date:   Thu Nov 15 23:58:16 2007 +0000

    Detect Slackware RC. Also rename ORC to OPENRC and BRC to BSDRC.

commit bbcd33d4f5cd992c106d68a4d517e90d3d4e8486
Author: Roy Marples <roy@marples.name>
Date:   Thu Nov 15 17:58:39 2007 +0000

    Fix atoint for out of range

commit 05bea32986dfead298f0030e5361871948c78da6
Author: Roy Marples <roy@marples.name>
Date:   Thu Nov 15 17:57:10 2007 +0000

    Replace the macro STRINGINT with a function

commit aedfde99fb2a466fa1dc826355b90f69e850b63f
Author: Roy Marples <roy@marples.name>
Date:   Thu Nov 15 12:04:28 2007 +0000

    Put %%INFODIR%% in the man page so it's always swapped out with how dhcpcd is built.

commit b6057d10d2c2a784336265e0c6245382753b7a71
Author: Roy Marples <roy@marples.name>
Date:   Thu Nov 15 11:35:53 2007 +0000

    Re-license as 2-clause BSD as I've re-written everything from the old dhcpcd-2 code base now.

commit d9953ffbacc726660d6a168cc0c6db32029b2635
Author: Roy Marples <roy@marples.name>
Date:   Wed Nov 14 12:53:21 2007 +0000

    Allow INFODIR to control where we keep our info files.
    Respect MANPREFIX.

commit c8adbc61bf067b487302892556a11b18456e78b5
Author: Roy Marples <roy@marples.name>
Date:   Tue Nov 13 14:44:23 2007 +0000

    Ignore FQDN replies for the time being.

commit 11f3adda1216bd5936530203e2eb6bfdf1bdba7d
Author: Roy Marples <roy@marples.name>
Date:   Tue Nov 13 14:36:09 2007 +0000

    whitespace

commit 4145ec1cdaac4160b1012ed3ba9376598c0b8899
Author: Roy Marples <roy@marples.name>
Date:   Tue Nov 13 11:02:51 2007 +0000

    Revert "Link local routes should not be static."
    
    This reverts commit c432e9760b211273cd21b7ee386d658ee00327a1.

commit e7c55c641261622dd790f1bac312f2d9ed1d3524
Author: Roy Marples <roy@marples.name>
Date:   Tue Nov 13 10:55:55 2007 +0000

    If we fail to get an ipv4ll address, start over

commit 912ed56a320879b2a670a5ad3e268038fa447425
Author: Roy Marples <roy@marples.name>
Date:   Tue Nov 13 10:22:45 2007 +0000

    Link local routes should not be static.

commit 56466e6b7b7e526749b7ead3423373846658c8d6
Author: Roy Marples <roy@marples.name>
Date:   Mon Nov 12 11:02:18 2007 +0000

    Buffer signals instead of just using the latest.

commit 816ad2eab1a0dc05931d71379859682fe6b00da8
Author: Roy Marples <roy@marples.name>
Date:   Fri Nov 9 20:48:51 2007 +0000

    Add knobs to work with RedHat, Slackware and generic SYSV init scripts

commit 2669c8a63bb883fd81bed2bc539f09d0367536e0
Author: Roy Marples <roy@marples.name>
Date:   Fri Nov 9 17:02:38 2007 +0000

    RC -> BRC

commit e669863c75ef3865986aacb17581ca03a6018946
Author: Roy Marples <roy@marples.name>
Date:   Fri Nov 9 16:55:00 2007 +0000

    Don't spam the log as much when constantly using IPV4LL addresses.

commit b0e24b8d2184d574f385896537485a8a6a317687
Author: Roy Marples <roy@marples.name>
Date:   Fri Nov 9 16:08:49 2007 +0000

    We should not use ntohl in IN_LOCAL define, instead where we use it.

commit 836e73524da9836d53be15c276df462788dd5a6a
Author: Roy Marples <roy@marples.name>
Date:   Fri Nov 9 15:38:44 2007 +0000

    Add a warning when we get am IPV4LL address and we haven't daemonised

commit 385cd28a7d552e0f2e3b316dc275f8ba1decdd9a
Author: Roy Marples <roy@marples.name>
Date:   Fri Nov 9 13:43:36 2007 +0000

    Wrap _BSD_SOURCE in a __linux__ define.

commit 4a3eaf8724a367e0861b687a24e22046adb3c8bf
Author: Roy Marples <roy@marples.name>
Date:   Thu Nov 8 13:16:00 2007 +0000

    Move signals.c,h to signal.c,h

commit dd86d5270039653a6fd99bc2cb7d002057637649
Author: Roy Marples <roy@marples.name>
Date:   Thu Nov 8 11:46:16 2007 +0000

    Don't report on the failed dhcpcd component for realpath

commit 73c13650c1376e5d5da190a5ef9f97eb49d1b4bf
Author: Roy Marples <roy@marples.name>
Date:   Thu Nov 8 11:06:41 2007 +0000

    Use realpath to work out where dhcpcd is

commit a2d009e40a86fb11524fd7c883285968e3894f44
Author: Roy Marples <roy@marples.name>
Date:   Thu Nov 8 10:41:37 2007 +0000

    Re-add sys/time.h

commit 1fd282eeff63c2af9a50a9fa9f2082f77da17062
Author: Roy Marples <roy@marples.name>
Date:   Thu Nov 8 10:38:54 2007 +0000

    Merge branch 'master' of marples:/var/git/dhcpcd

commit a10f57d079aa93afbc58d3ccaeeee1ddfc35bd01
Author: Roy Marples <roy@marples.name>
Date:   Thu Nov 8 10:37:52 2007 +0000

    Work with the BSD RC system too.

commit 186a35015555b75d69703309a371eecb90917999
Author: Roy Marples <roy@marples.name>
Date:   Thu Nov 8 10:36:49 2007 +0000

    Find resolvconf in path instead of just /sbin.

commit c3cecb957d140ac102e3cef04b5d73cfd8dd27c2
Author: Roy Marples <roy@marples.name>
Date:   Wed Nov 7 21:35:12 2007 +0000

    Ensure copyright is added to the binary

commit 348016d0ac49d1252d523c362940a2aa1e7e4e2f
Author: Roy Marples <roy@marples.name>
Date:   Wed Nov 7 20:59:52 2007 +0000

    timeval defines seconds as long, so we should use long over time_t

commit 6557f5cc3ec255bc213a2bd65dca9577ffa8454a
Author: Roy Marples <roy@marples.name>
Date:   Wed Nov 7 20:28:55 2007 +0000

    Improve the structure of linux netlink messaging code

commit 29a184f3e23d28af84c81e5db6be348cf16fe9ce
Author: Roy Marples <roy@marples.name>
Date:   Wed Nov 7 17:06:05 2007 +0000

    make HAVE_FORK=yes|no should be used if cross compiling.

commit 1f8f3dbdc1f661c64cda2bcbda97df7a72c1d13b
Author: Roy Marples <roy@marples.name>
Date:   Wed Nov 7 16:26:41 2007 +0000

    Reword the headers to just say we use the GPLv2.

commit 755a28e47fb28b412e6a8e664d2bceeeeba284f6
Author: Roy Marples <roy@marples.name>
Date:   Wed Nov 7 16:05:07 2007 +0000

    Reword the license headers just to say we use the GPLv2.

commit 8132f92876e1df20bccc0054389b2febc0c87135
Author: Roy Marples <roy@marples.name>
Date:   Wed Nov 7 15:53:15 2007 +0000

    Remove the reference to udhcp.

commit df022bf7bc72413dbe6fe3f266d760037db452eb
Author: Roy Marples <roy@marples.name>
Date:   Wed Nov 7 15:45:11 2007 +0000

    dhcp_run no longer resembles anything from udhcp, so remove the reference.

commit 867861b7a2af02812d782897003602d46ff0574f
Author: Roy Marples <roy@marples.name>
Date:   Wed Nov 7 15:43:32 2007 +0000

    Clarify recvmsg error

commit dc663ad224b37bc4b65ba88b5892f8a102ce3b69
Author: Roy Marples <roy@marples.name>
Date:   Wed Nov 7 10:50:39 2007 +0000

    We should reset the NAK backoff when we timeout as well

commit 2e60f94241b501d791955a8acb5e679aeafdc286
Author: Roy Marples <roy@marples.name>
Date:   Wed Nov 7 10:43:35 2007 +0000

    Implement an exponetial NAK backoff.

commit ee3485fe1026fd9a28c71977a71fa2589fb8ae35
Author: Roy Marples <roy@marples.name>
Date:   Wed Nov 7 10:42:30 2007 +0000

    Actually read the signal from the buffer

commit de8a9d9887e862c9fefc9b6ff3520c572a57b924
Author: Roy Marples <roy@marples.name>
Date:   Wed Nov 7 10:15:14 2007 +0000

    Clear the signal_pipe fd from the fdset when all signals have
    been read.

commit cfe160119d801f24ee3e99cf2778b7475085c70d
Author: Roy Marples <roy@marples.name>
Date:   Tue Nov 6 15:03:38 2007 +0000

    Update my e-mail address as I have retired from Gentoo.

commit e62c8eee04095efdbfab143a59a6e82a35a61ae6
Author: Roy Marples <roy@marples.name>
Date:   Tue Nov 6 14:12:27 2007 +0000

    As we now use git, don't include .git when making distfiles.

commit 24878742f8265d99db282661c266119e9ee4300f
Author: Roy Marples <roy@marples.name>
Date:   Tue Oct 23 09:07:58 2007 +0000

    Increase ipv4ll lease time to 20 seconds so we attempt a dhcp request every 10 seconds

commit 1b7dbb220432d9221a959fcddc0a806474d3b08f
Author: Roy Marples <roy@marples.name>
Date:   Mon Oct 22 16:03:48 2007 +0000

    Don't release a link local address.

commit 85132e2dccd832d7b8e22d6f0f288034a955ef1e
Author: Roy Marples <roy@marples.name>
Date:   Mon Oct 22 15:03:01 2007 +0000

    If compiled without info support, don't tell the script about the info file.

commit 33eb264faaa1ca27d1d4ecec8b6c1d98bcb1ece2
Author: Roy Marples <roy@marples.name>
Date:   Mon Oct 22 14:32:31 2007 +0000

    Use sysconf to detect if we have a working monotonic clock.

commit 0c036039f1e60c2ab73d455a82149a44fbd46be1
Author: Roy Marples <roy@marples.name>
Date:   Mon Oct 22 13:10:09 2007 +0000

    Only request NTP, NIS, etc if we have compiled that feature in.

commit 402cb88f5624dcf619fe7adfe8fb6a793062c346
Author: Roy Marples <roy@marples.name>
Date:   Mon Oct 22 13:06:18 2007 +0000

    dhcpcd --version now shows what compile time options were used.

commit c624df06d7d5e674227e806f748f3506223812f2
Author: Roy Marples <roy@marples.name>
Date:   Sun Oct 21 19:44:30 2007 +0000

    Don't need this define anymore.

commit 6936aa620d5714c2615ad294f2f31c9790ec5127
Author: Roy Marples <roy@marples.name>
Date:   Sun Oct 21 19:16:53 2007 +0000

    Release 3.1.7

commit 298462e1dc7f8a87a077f7195d701d5fcc52a4fc
Author: Roy Marples <roy@marples.name>
Date:   Sun Oct 21 19:16:19 2007 +0000

    typo

commit ed604a709b499f5ca3129e95d90168c1465e8bc5
Author: Roy Marples <roy@marples.name>
Date:   Sun Oct 21 19:15:23 2007 +0000

    Add warnings about requesting a link local address.

commit cfbd159f4963a70033562a1ac16c7d0d932497ab
Author: Roy Marples <roy@marples.name>
Date:   Sat Oct 20 16:58:13 2007 +0000

    Write the pidfile before we fork so we can easily be stopped by other processes.

commit 6b37baaad11ddf85817aaaea5aaac4259b77866f
Author: Roy Marples <roy@marples.name>
Date:   Wed Oct 17 15:46:04 2007 +0000

    Always define IN_LINKLOCAL

commit a41c971c80cf3a50d252acc186bf0346ea86f7d6
Author: Roy Marples <roy@marples.name>
Date:   Fri Oct 12 11:19:29 2007 +0000

    Always add a link-local route unless we're given a non-private address by the DHCP server.

commit 0c98f75b3738af5a2204cc0cf1a1177367dcf05e
Author: Roy Marples <roy@marples.name>
Date:   Fri Oct 12 11:18:03 2007 +0000

    Change wording

commit 012c8271b38fedb3c9906454f17de10450389030
Author: Roy Marples <roy@marples.name>
Date:   Thu Oct 11 21:05:18 2007 +0000

    Remove temp files when cannot work out linking foo

commit d9448b42248e0868f3ab391e1107141bf0ff058f
Author: Roy Marples <roy@marples.name>
Date:   Thu Oct 11 20:30:24 2007 +0000

    Don't malloc pointer size when we mean data size

commit 1c9d0720f9039b7a8e783d7db7f87d9e0f56e604
Author: Roy Marples <roy@marples.name>
Date:   Thu Oct 11 13:42:12 2007 +0000

    No need for if here

commit e8a08223864c59ea842a70216ad5dd983747f168
Author: Roy Marples <roy@marples.name>
Date:   Thu Oct 11 13:27:06 2007 +0000

    Clarify EINTR

commit b3f5301936ef265fc53a4e02c62edd809b25d3a1
Author: Roy Marples <roy@marples.name>
Date:   Thu Oct 11 13:26:16 2007 +0000

    Reduce stack usage by using malloc more.

commit cdf73a84ba306f0ede27b7395412b40791408133
Author: Roy Marples <roy@marples.name>
Date:   Thu Oct 11 13:24:17 2007 +0000

    Work better with signal handling, arp and send errors

commit fbc4d6f9310e116e50adf21059be200532ec992a
Author: Roy Marples <roy@marples.name>
Date:   Thu Oct 11 13:23:53 2007 +0000

    revert commit - wrong file :/

commit dee1decfb127510588fea4d0ab99a0e4d3f603cc
Author: Roy Marples <roy@marples.name>
Date:   Thu Oct 11 13:21:57 2007 +0000

    Work better with signal handling, arp and send errors

commit 9bb2bc68e98458ed8f8c9dde8b89faa3849ae7c9
Author: Roy Marples <roy@marples.name>
Date:   Thu Oct 11 13:21:02 2007 +0000

    Return on all errors

commit fbc722ff3276df8c44010c83aa0fef4998a079fc
Author: Roy Marples <roy@marples.name>
Date:   Thu Oct 11 13:20:37 2007 +0000

    Handle signals correctly.

commit 9f592213986cc935201390663de319ba783f0051
Author: Roy Marples <roy@marples.name>
Date:   Thu Oct 11 13:19:25 2007 +0000

    Allow none signal pipe users to grab signals

commit 8b67eaba15ceefc46412b6ea2bf50a0dbc384d3a
Author: Roy Marples <roy@marples.name>
Date:   Thu Oct 11 08:56:46 2007 +0000

    If we're on a different subnet from the one we get DHCP for, don't use our current address in messages. Thanks to Wilson Callan.

commit a31bd7a2adb330fc04ee7fa87f2844f12a95f3bf
Author: Roy Marples <roy@marples.name>
Date:   Thu Oct 11 08:53:29 2007 +0000

    Skip over bogus EINTR error on select when arp checking for a different address from what we already have. This should not happen, so a better fix is probably needed.

commit 921aaebd1d280ec43acc8c2ecb09af42f09de46e
Author: Roy Marples <roy@marples.name>
Date:   Tue Oct 9 09:05:29 2007 +0000

    Clarify -r option a little

commit 8bb58112c0ff8d0af63871c1923b198fa8ee38b6
Author: Roy Marples <roy@marples.name>
Date:   Thu Oct 4 11:39:26 2007 +0000

    Release 3.1.6

commit e1f501245e403507e249701ac5d1ed6899051ab8
Author: Roy Marples <roy@marples.name>
Date:   Thu Oct 4 09:57:50 2007 +0000

    --skiproutes has been added for no fork users so that we know if we can delete the route at a later date.

commit 2e0e077d69aad070049810e262022e4b6fb54aa9
Author: Roy Marples <roy@marples.name>
Date:   Tue Sep 4 12:55:23 2007 +0000

    remove the .depend file  for ease of development

commit 28c37f600eac4be8dad940bc01539fc12442ff36
Author: Roy Marples <roy@marples.name>
Date:   Tue Sep 4 12:52:34 2007 +0000

    Add empty .depend file

commit 3e120d46a8dc084b5404f04cf98bf90cc0ba32cc
Author: Roy Marples <roy@marples.name>
Date:   Tue Sep 4 12:48:40 2007 +0000

    Many thanks to Michael Durrant for testing the below changes.
    Compile and work on OSX/Darwin.
    If we have no fork then we re-exec ourselves with --daemonised.
    Improved the build system so we automatically detect if we need
    librt or libresolv and if fork() works or not.
    Move back to using librt for clock_gettime on Linux systems.

commit c1d07a4ec414fa76dfb3ea837f63a7699187a9c8
Author: Roy Marples <roy@marples.name>
Date:   Fri Aug 24 11:05:38 2007 +0000

    Loopify the pmake gcc flag detection

commit f830c2aa70f1fc3692b077d44c2b024e526e8015
Author: Roy Marples <roy@marples.name>
Date:   Tue Aug 21 09:50:01 2007 +0000

    Suck it hard and use gettimeofday for Linux. Lets just hope that the clock works under Linux during ARP floods.

commit 6a3e853169003f63b99d5282488aba21a1ff8db6
Author: Roy Marples <roy@marples.name>
Date:   Mon Aug 20 19:09:12 2007 +0000

    Fix the flushing of addresses on BSD systems.

commit 362a8a9465e8afc7a882ca2c6934333a2e3e8f71
Author: Roy Marples <roy@marples.name>
Date:   Mon Aug 20 16:33:29 2007 +0000

    Prepare 3.1.5

commit 0b48939e2aa7eb125ffc6e97f33735b6b13de298
Author: Roy Marples <roy@marples.name>
Date:   Mon Aug 20 16:33:09 2007 +0000

    Rework the arp code again so that we don't link to librt on Linux.

commit 184826065166942d397b9f5f526d232688133b70
Author: Roy Marples <roy@marples.name>
Date:   Mon Aug 20 15:43:10 2007 +0000

    Fix a potential buffer overflow in hwaddr_ntoa if length > 42.

commit 735402ffd79a9470925e25a9e629840b96e9df73
Author: Roy Marples <roy@marples.name>
Date:   Mon Aug 20 15:36:41 2007 +0000

    Fix a potential heap overflow in decode_CSR when CIDR > 32.

commit 8eabb172393998b8b252342a74879ce979d23e60
Author: Roy Marples <roy@marples.name>
Date:   Mon Aug 20 15:17:37 2007 +0000

    Fix a potential heap overflow in decode_sipservers when length is 1.

commit dfecbc78af96f9d3ca99205df668c1fb5eac9bad
Author: Roy Marples <roy@marples.name>
Date:   Sat Aug 11 16:03:25 2007 +0000

    -L actually doesn't do IPv4LL as advertised.

commit 9eec7053529d5385f96a15308c7693b38cb3fc18
Author: Roy Marples <roy@marples.name>
Date:   Fri Aug 10 11:42:53 2007 +0000

    We still need the common.h header

commit bbce8a383b040acf74b59381dae7a2cde890f137
Author: Roy Marples <roy@marples.name>
Date:   Thu Aug 9 16:27:53 2007 +0000

    Makefile version

commit 7fce7dc1b3a26358cdd84ca6be566ac81565157d
Author: Roy Marples <roy@marples.name>
Date:   Thu Aug 9 16:26:26 2007 +0000

    3.1.4

commit 0930e024c30c4974de82417ddd6ff633cca82b6c
Author: Roy Marples <roy@marples.name>
Date:   Thu Aug 9 16:25:20 2007 +0000

    Ensure ARP checking times out when there is a flood.

commit 8ed838f75bc3dcdb4ae2aedc7ef38e972d16ceb5
Author: Roy Marples <roy@marples.name>
Date:   Thu Aug 9 16:24:36 2007 +0000

    Don't use xmalloc in logger as that is self recursive.

commit 7b82eef6f71904c143c68fc7fe7e9b4c2babe155
Author: Roy Marples <roy@marples.name>
Date:   Fri Aug 3 12:24:17 2007 +0000

    Move signal out of the options struct as it's just local to dhcpcd.c

commit 7159a07a651c8f377c55a46c1bd201312528716c
Author: Roy Marples <roy@marples.name>
Date:   Fri Aug 3 10:33:07 2007 +0000

    Add -x option to quit without releasing the lease.

commit 2d2cbde6d91548986ff3b5b6da6746cd568a79a2
Author: Roy Marples <roy@marples.name>
Date:   Tue Jul 31 14:09:00 2007 +0000

    Fix link routes which broke in 3.1.2.

commit cb7e390e07346c70cb3a3630f70efc0d9974aabc
Author: Roy Marples <roy@marples.name>
Date:   Tue Jul 31 09:57:20 2007 +0000

    Changelog

commit 2774c970bd495ccd02ffd71dcb42fa0c99f19908
Author: Roy Marples <roy@marples.name>
Date:   Tue Jul 31 09:50:48 2007 +0000

    Fix static routes

commit 7b5607ab83e123cd689de3246a51ff3680978f04
Author: Roy Marples <roy@marples.name>
Date:   Mon Jul 30 12:46:53 2007 +0000

    Change the route output to use CIDR instead of netmasks

commit bae37b081b9703d79e1694d04fbc690f2346237f
Author: Roy Marples <roy@marples.name>
Date:   Mon Jul 30 12:45:31 2007 +0000

    Use --nodeps when restarting services

commit fe8495d04889d98ac64cbdb31bc28a351c6335f4
Author: Roy Marples <roy@marples.name>
Date:   Sun Jul 29 10:19:37 2007 +0000

    Simply CIDR calculation, thanks to Francois-Xavier Le Bail.

commit a9a3974b6cf38f7943a02e748deb132bf9760364
Author: Roy Marples <roy@marples.name>
Date:   Sun Jul 29 10:18:52 2007 +0000

    Don't free the dhcp object on RENEW (fixes a segfault)

commit 6d073f75f53e5f1c23248ac12918bed02ae2a1da
Author: Roy Marples <roy@marples.name>
Date:   Thu Jul 26 09:35:45 2007 +0000

    Fix arp segfaulting and final 3.1.1

commit 68590c550d1ef7bc3574bda65c57b7ddbb2edcfc
Author: Roy Marples <roy@marples.name>
Date:   Wed Jul 25 21:01:10 2007 +0000

    Remove getifaddrs code and instead just use ioctls.

commit 8ace6ad70b33c9a1098fc68771420e6123f71655
Author: Roy Marples <roy@marples.name>
Date:   Mon Jul 23 10:31:16 2007 +0000

    Final 3.1.0

commit 4dce6d87531fed636f2e36743ba2ef13754e5b08
Author: Roy Marples <roy@marples.name>
Date:   Sat Jul 21 13:00:18 2007 +0000

    Add new socket code to try and support InfiniBand better.

commit e51274966cae4e89756c46102f2ab04319897c8a
Author: Roy Marples <roy@marples.name>
Date:   Thu Jul 19 15:46:02 2007 +0000

    Fix leak and report correct invalid encoding option for sip servers.

commit fc3617fbf184a486647b068c0f2ae150ae11c268
Author: Roy Marples <roy@marples.name>
Date:   Wed Jul 18 14:22:02 2007 +0000

    Support RFC 3361 SIP Servers.

commit 11efe9f7068161eb22fd11fad040889bb84d5770
Author: Roy Marples <roy@marples.name>
Date:   Wed Jul 18 11:39:30 2007 +0000

    ==-1 is cheaper than <0

commit ed25b07f3657a4d2b2ed1ea19b986c58f013f526
Author: Roy Marples <roy@marples.name>
Date:   Wed Jul 18 11:38:42 2007 +0000

    ==-1 is cheaper than <0

commit d6be0166aa5874a273c4328cea8106aa92aab5d2
Author: Roy Marples <roy@marples.name>
Date:   Wed Jul 18 11:35:50 2007 +0000

    ==-1 is cheaper than <0

commit 77659ce0359c096d8a2667541879f8a59fad8121
Author: Roy Marples <roy@marples.name>
Date:   Wed Jul 18 11:26:59 2007 +0000

    We now do ARP checking by default as recommended by RFC 2131.
    Add RFC 3927 (aka IPV4LL aka APIPA) support by default.

commit ff711cf766f3efd9dc8f79776e688a3a28f52d9a
Author: Roy Marples <roy@marples.name>
Date:   Tue Jul 17 08:34:59 2007 +0000

    Suport DHCP option (52) overload.

commit d358684f8257f0f2c1569f49ded2c911af4c10ab
Author: Roy Marples <roy@marples.name>
Date:   Thu Jul 12 12:52:27 2007 +0000

    Added -T test option. This just sends a DHCP_DISCOVER message and then
    prints the configuration data to stdout - we don't request a lease,
    configure the interface or write the info file.

commit 3f9fb4910121582739abf11b8102ea139885279f
Author: Roy Marples <roy@marples.name>
Date:   Thu Jul 12 06:57:21 2007 +0000

    Pad after end

commit fe07298a4d00959fe4d88e76388ce7c71a3c3903
Author: Roy Marples <roy@marples.name>
Date:   Thu Jun 28 03:42:19 2007 +0000

    Fix adding /32 routes on Linux

commit 2eceac743738f5d2655c9b73d0bf62dab27b5c50
Author: Roy Marples <roy@marples.name>
Date:   Thu Jun 28 03:41:25 2007 +0000

    Fix Client ID's

commit 6390e1ca630550759f167a4207dfd5e0d823c12f
Author: Roy Marples <roy@marples.name>
Date:   Wed Jun 27 21:55:44 2007 +0000

    Don't do any DUID if we have a user specified ClientID

commit f106d9a9277ec22ca392621f62df0c383eb19615
Author: Roy Marples <roy@marples.name>
Date:   Wed Jun 27 00:11:11 2007 +0000

    Fix adding of routes on the BSDs.

commit 7732a9f96f0f76b49d44239612e7e4c16203a967
Author: Roy Marples <roy@marples.name>
Date:   Tue Jun 26 12:14:17 2007 +0000

    ROOTPATH should work correctly again, thanks to danhien.

commit 3cd8e9867a7e39866720dfbf8f840b0852fbd510
Author: Roy Marples <roy@marples.name>
Date:   Tue Jun 26 12:02:26 2007 +0000

    chdir to / for sanity

commit 83bf572a8e0a47d839d47be8f2f435ddfde30100
Author: Roy Marples <roy@marples.name>
Date:   Wed May 30 09:27:53 2007 +0000

    We now have 6 hostname options, which should satisfy everyone.

commit d6293b37c35b056d4bcc40238e8c251f68d49d6c
Author: Roy Marples <roy@marples.name>
Date:   Mon May 28 12:15:27 2007 +0000

    -HH sets the hostname to the full dns name looked up if we need to.

commit bd0e12b72b17d99479d534788f4c8266fce2133e
Author: Roy Marples <roy@marples.name>
Date:   Wed May 23 14:48:02 2007 +0000

    Don't strip the domain when looking up hostname via DNS

commit 4b811f8c785f533d7f48583b8c0ef1931ca3f1b7
Author: Roy Marples <roy@marples.name>
Date:   Tue May 22 08:55:21 2007 +0000

    Minimum packet is 46 bytes

commit e686b5b3f28a13ab412e19bdba3e353d5f13cb70
Author: Roy Marples <roy@marples.name>
Date:   Mon May 21 17:10:10 2007 +0000

    Fix ARP checking

commit 45e3bdc711f70100628ba8dd26570764871433c4
Author: Roy Marples <roy@marples.name>
Date:   Mon May 21 13:55:49 2007 +0000

    Support linux aliased addresses

commit 6c3b1c2a594e947543cf51f784832a240c0623be
Author: Roy Marples <roy@marples.name>
Date:   Tue May 15 13:34:17 2007 +0000

    Enable DHCP_INFORM support via the -s option again, moving DHCP_REQUEST
    to the -r option. This makes us more compatible with dhcpcd-1.x and 2.x.

commit 49f0bcb56c75082f0ac105fd70d93a0da3cd61dc
Author: Roy Marples <roy@marples.name>
Date:   Mon May 14 22:12:01 2007 +0000

    Stop using optional arguments, use '' instead so we're more compatible with dhcpcd-1.x and 2.x. Install /var/lib if it doesn't exist

commit d56e00adb094af15f62575c0e1fc62239c1ab289
Author: Roy Marples <roy@marples.name>
Date:   Mon May 14 13:34:36 2007 +0000

    Rename ch to opt

commit cff1ccb615d01ab1c68fc7c78d520eb49f6a47ab
Author: Roy Marples <roy@marples.name>
Date:   Mon May 14 10:01:56 2007 +0000

    Don't overrwite .info files when dropping if they already exist

commit f94b79a13c3332753abb87b284895c9c61bb2f59
Author: Roy Marples <roy@marples.name>
Date:   Sun May 13 18:44:29 2007 +0000

    Add INSTALL file

commit 00843933ff261758f2e1544c0267e5826db47ac1
Author: Roy Marples <roy@marples.name>
Date:   Sun May 13 17:43:56 2007 +0000

    Ensure that dhcpcd.sh is always called.

commit cefc00ea6f14add619597183708954271c0974c0
Author: Roy Marples <roy@marples.name>
Date:   Sun May 13 13:46:39 2007 +0000

    Keep flock on pidfile open for while running.

commit 438263e0571dc945a5bf85445e4904c0f853cce6
Author: Roy Marples <roy@marples.name>
Date:   Sun May 13 12:28:54 2007 +0000

    flock the pidfile and stop writing the parent pid to it so we're more robst.

commit 9afd5b02383bcf1f6ed2b12ff4016e5f3720d17f
Author: Roy Marples <roy@marples.name>
Date:   Fri May 11 21:31:14 2007 +0000

    Avoid using sizeof for hostname length check

commit 7f1b42ce4f272bbb2013ad86b4d835857bff0fc8
Author: Roy Marples <roy@marples.name>
Date:   Fri May 11 19:55:00 2007 +0000

    Enable DHCP_INFORM support via the -S option

commit 73ac22c3cbee807f37754dae40308217e81e1c0f
Author: Roy Marples <roy@marples.name>
Date:   Fri May 11 11:00:14 2007 +0000

    Fix Makefile gcc options

commit ff962a3c31431520b0e565a3755afa55afe1027f
Author: Roy Marples <roy@marples.name>
Date:   Fri May 11 10:51:32 2007 +0000

    Allow -I to have an optional argument, when missing don't use DUID's

commit c3d07f4c70c363a63fc549364b2f11f276f2056b
Author: Roy Marples <roy@marples.name>
Date:   Thu May 10 16:08:49 2007 +0000

    Add support for RFC 4361

commit 3b963f04a7bd0e30d4944e752a96edc8a5d41e29
Author: Roy Marples <roy@marples.name>
Date:   Thu May 10 16:07:17 2007 +0000

    add missing files

commit 4549f7a4ddb698e3023816909f4899b6dc771904
Author: Roy Marples <roy@marples.name>
Date:   Thu May 10 09:39:26 2007 +0000

    config.h now has the compile time options, instead of being dotted around.
    Added -E option, which reads the last info file and uses the information there
    if we timeout and the lease is still valid, thanks to Roberto Angelino.

commit 233ad2c3cee34e1dd2e0f0e9ecf8e24034b1f739
Author: Roy Marples <roy@marples.name>
Date:   Fri May 4 14:47:09 2007 +0000

    Clean up stuff

commit 7c2e2c9a59e4d3e8137cd122660f52aabac66a15
Author: Roy Marples <roy@marples.name>
Date:   Thu Apr 26 18:46:26 2007 +0000

    Grammer fix by vonr

commit f4f12948356abad24efd0e33374c33b0e9695634
Author: Roy Marples <roy@marples.name>
Date:   Thu Apr 26 16:46:55 2007 +0000

    Although we compile on NetBSD, we fail to add routes correctly.

commit 0731074b52e211799a419ce90462562643b4f658
Author: Roy Marples <roy@marples.name>
Date:   Thu Apr 26 16:16:56 2007 +0000

    Send a FQDN hostname if it contains dots, strip the domain from a looked up hostname if it matches our domain or search and sanitize our fd's a little better.

commit 6e9e8a1d4b24a11ef393a5e51cdb3542b2bece4d
Author: Roy Marples <roy@marples.name>
Date:   Wed Apr 18 15:14:55 2007 +0000

    Use MAXHOSTNAMELEN instead of our define

commit dd58cd5aa3854ab65b05b0909a7aa2d9430f30b7
Author: Roy Marples <roy@marples.name>
Date:   Wed Apr 18 12:03:23 2007 +0000

    Ensure that static routes are always added before routers.

commit 9679555cdca2289c20bab4a526d2e999726c06f4
Author: Roy Marples <roy@marples.name>
Date:   Wed Apr 18 10:16:51 2007 +0000

    Use getnameinfo instead of gethostbyaddr.

commit c5f445cec05fc81e6cf8806bde964a6e9b4e7401
Author: Roy Marples <roy@marples.name>
Date:   Mon Apr 16 08:33:22 2007 +0000

    Rename define and add comment to info file

commit 5a78a4645a45bf8f8528e4efa30994a05b450fe7
Author: Roy Marples <roy@marples.name>
Date:   Sun Apr 15 18:41:14 2007 +0000

    Use vfork instead of fork so we're more embedded friendly.

commit c12527eef4e2523b19f5460770d458c952b724cd
Author: Roy Marples <roy@marples.name>
Date:   Sun Apr 15 17:51:04 2007 +0000

    Remove gateways from the ROUTES and add to GATEWAYS
    define #INFO_COMPAT if you wish your .info file to add support for some
    old 1.x and 2.x structure.

commit ad70fe2922add6c5220e4f710ba600dd7b80dbd0
Author: Roy Marples <roy@marples.name>
Date:   Sat Apr 14 07:53:33 2007 +0000

    dhcpcd-3.0.17

commit ebaea570a4fd93f29f94cf42237a4640f942cca1
Author: Roy Marples <roy@marples.name>
Date:   Fri Apr 13 23:59:24 2007 +0000

    Typo, thanks to A C Hurst

commit 1ed69d51056d8c8195ddc47cb828e56966f5a736
Author: Roy Marples <roy@marples.name>
Date:   Fri Apr 13 08:49:03 2007 +0000

    ignore should be debug message

commit 7cbb81afc39bbf03baecb01ac49048352355a010
Author: Roy Marples <roy@marples.name>
Date:   Thu Apr 12 13:12:25 2007 +0000

    Style updates

commit 3032ddd13538605819841f258ff36adbc328055d
Author: Roy Marples <roy@marples.name>
Date:   Thu Apr 12 06:58:02 2007 +0000

    Update

commit 854f4d91ef12068f27b568113d02fc6211750be3
Author: Roy Marples <roy@marples.name>
Date:   Thu Apr 12 06:52:51 2007 +0000

    Redfine the variable and add a comment

commit 750bc1d4f8aec89d25a5c773985f32757e444dde
Author: Roy Marples <roy@marples.name>
Date:   Wed Apr 11 19:44:37 2007 +0000

    Minimum message size is now 300 bytes for crappy DHCP servers :/

commit 378dcbd5d580b197dbcd4f1c2fc84bf41c28e032
Author: Roy Marples <roy@marples.name>
Date:   Wed Apr 11 13:18:33 2007 +0000

    Cuddle up to LKML style C

commit 96ccff7a0659090f6c4121fe6892a1f37668bafa
Author: Roy Marples <roy@marples.name>
Date:   Tue Apr 10 11:27:37 2007 +0000

    Fix indentation

commit 000ad4a5ccc4e82557e8252a928afc0fc79b2c74
Author: Roy Marples <roy@marples.name>
Date:   Sun Apr 8 17:35:22 2007 +0000

    We should now compile on OpenBSD. Also, we check we can use some gcc flags before blindly erroring.

commit 16a0ff3c7b323338bd907147db69d6a18d382fce
Author: Roy Marples <roy@marples.name>
Date:   Fri Apr 6 12:30:16 2007 +0000

    copy the arg as vsyslog may not do its own copy and use strlcpy instead of strcpy

commit 377f4c2def52361c5c21c751e374f6d80e86c692
Author: Roy Marples <roy@marples.name>
Date:   Thu Apr 5 18:11:05 2007 +0000

    string.h pulls in features.h

commit 3c7fb0d496e3d10bfea45d70e62c3f30694ccec5
Author: Roy Marples <roy@marples.name>
Date:   Thu Apr 5 18:05:38 2007 +0000

    Use libc strlcpy for uclibc and dietlibc

commit 5773b3551c95b8a3d47e6a12a0a8eefebd46b9e2
Author: Roy Marples <roy@marples.name>
Date:   Thu Apr 5 17:38:18 2007 +0000

    Remove the last sprintf

commit 93573fa302c2d0ae141c8c87c5fd89fc3069b5a8
Author: Roy Marples <roy@marples.name>
Date:   Thu Apr 5 17:31:05 2007 +0000

    Use strlcpy if available, if not define our own.

commit 235ce0896deb6ce04326f8a1514f0b600b7c8dc1
Author: Roy Marples <roy@marples.name>
Date:   Thu Apr 5 16:56:58 2007 +0000

    Add safe_strncpy function to ensure everything is NULL terminated

commit 505951cbf0e61e07f4452addf17680c3db6a0409
Author: Roy Marples <roy@marples.name>
Date:   Thu Apr 5 15:01:50 2007 +0000

    Clean ups

commit bc3f8ad57d8bf6d9e6a56ce47cd68b47bfc94d50
Author: Roy Marples <roy@marples.name>
Date:   Thu Apr 5 14:33:39 2007 +0000

    Cast NULL as char * when terminating lists, and use printf like attributes on our logging functions.

commit d3b66c05ec4c8803016eb16b5c3032de2d425d0a
Author: Roy Marples <roy@marples.name>
Date:   Wed Apr 4 14:28:07 2007 +0000

    Add --nomtu/-M option. Also, if MTU is used we restore it to how it was at when we exist, don't get an MTU from the server or get an invalid MTU from the server.

commit 522a128c7236125dd42840ea3e588bcf5b224f84
Author: Roy Marples <roy@marples.name>
Date:   Tue Apr 3 07:03:04 2007 +0000

    You can now build dhcpcd without support for writing ntp, nis and info files
    which makes the binary a few k smaller.
    Support OpenNTP as well as NTP.
    Re-work the state engine a little, so we renew and rebind correctly.
    Subsequent debug options stop dhcpcd from daemonising.

commit b2e9b3c410a0384a24d230091dfdbbf6b17e9d86
Author: Roy Marples <roy@marples.name>
Date:   Fri Mar 23 10:32:11 2007 +0000

    Check that if_nametoindex returns a valid index, thanks to d00mer.

commit d7095767f137764e5a98429f49a2bb42188c38bc
Author: Roy Marples <roy@marples.name>
Date:   Fri Mar 23 10:09:14 2007 +0000

    Build correctly on dietlibc, thanks to d00mer.

commit 1f33c4a5f66b7c834a816080143137063f529bbb
Author: Roy Marples <roy@marples.name>
Date:   Fri Mar 23 10:02:02 2007 +0000

    When MTU is less than 576 we now ignore it instead of setting the MTU to 576.

commit 4a3d9e0cf12e37fa4ea2fe6872d55fc7603a81a8
Author: Roy Marples <roy@marples.name>
Date:   Sun Mar 4 15:08:21 2007 +0000

    When we get an invalid length for a DHCP option, try and continue anyway.

commit 70689e9f9f9f8393a6b7e64cfe3007ea9e01769f
Author: Roy Marples <roy@marples.name>
Date:   Fri Mar 2 12:11:46 2007 +0000

    RFC 2131 is full of confusion regarding MTU it seems as the effective minimum MTU is really 576 or DHCP requests stop working.

commit 644a9ea9af5a3ce488c990460f655595b7f09f4e
Author: Roy Marples <roy@marples.name>
Date:   Thu Mar 1 10:42:01 2007 +0000

    Fix MTU length checking.
    We now request MTU from the DHCP server, and if given we set it.

commit 64168aaa15d457bc35eaf1cc6b7ff1def50c25d1
Author: Roy Marples <roy@marples.name>
Date:   Wed Feb 28 09:18:04 2007 +0000

    3.0.14 done

commit 9e3dfd633db5bab1f188af064ee937575fb2171c
Author: Roy Marples <roy@marples.name>
Date:   Tue Feb 27 12:06:44 2007 +0000

    Don't crash with 0 or invalid length DHCP options, reported by Stefan de Konink.

commit 9dbd1214fc74cbcec598bd5d7fc5a65a9fd443df
Author: Roy Marples <roy@marples.name>
Date:   Fri Feb 23 08:44:38 2007 +0000

    Final 3.0.13

commit b8450a993b4cda4a091126b8ea0cf243f6e4254f
Author: Roy Marples <roy@marples.name>
Date:   Fri Feb 23 08:41:46 2007 +0000

    Final 3.0.13

commit ae22cd29ff943041ff514e2cb4df7c527bb3f8f3
Author: Roy Marples <roy@marples.name>
Date:   Thu Feb 22 07:23:19 2007 +0000

    Really fix firewire

commit ee173eabe31b0852e30f34a44f7b59f7742aa350
Author: Roy Marples <roy@marples.name>
Date:   Wed Feb 21 23:22:25 2007 +0000

    Fix regression on Linux for sending packets over non Ethernet devices.

commit 5ef6a67f97f59184d7ab5044e25c553bbbe1e30b
Author: Roy Marples <roy@marples.name>
Date:   Wed Feb 21 22:20:04 2007 +0000

    define ARPHRD_IEEE1394 if it doesn not exist, like for Linux-2.4 kernels.

commit e82c870500d2de97f2bb05771cd33e993a2ef8e4
Author: Roy Marples <roy@marples.name>
Date:   Wed Feb 21 12:56:22 2007 +0000

    Finalise 3.0.12

commit c59fd7179f65ef39251228d6f1d6e37eea24e388
Author: Roy Marples <roy@marples.name>
Date:   Wed Feb 21 11:40:50 2007 +0000

    No more errors reported under valgrind :)

commit d75f02b58e49ba07dd633c8b2d234ca625dc345e
Author: Roy Marples <roy@marples.name>
Date:   Wed Feb 21 10:50:24 2007 +0000

    Clean up some valgrind errors

commit 91f9f12b1f17388f6452ba375b8d9ae6d3b998ba
Author: Roy Marples <roy@marples.name>
Date:   Wed Feb 21 10:30:50 2007 +0000

    Stop using sleeps as it may mess with our signal handler. Display cidr when adding/deleting addreses.

commit ffb6d9d1b8d380996173262d6e13f72326f05bdd
Author: Roy Marples <roy@marples.name>
Date:   Tue Feb 20 22:57:10 2007 +0000

    Test to see if the pid in the pidfile is actually running before claiming
    that we are.
    Fix the  error since 3.0.6.
    We now ensure that our renewal and rebind times are sane.
    Fix flushing interfaces for systems without getifaddrs and >1 interface.
    All netlink error messages are now prefixed with netlink.

commit 9a53860f012dc9ea68914036c5507bfbf71a34de
Author: Roy Marples <roy@marples.name>
Date:   Mon Feb 12 17:08:44 2007 +0000

    man page touchups

commit 092592331f8838823edeab9fb364b553cea608c2
Author: Roy Marples <roy@marples.name>
Date:   Mon Feb 12 16:12:50 2007 +0000

    Add DHCP over FireWire 1394 (RFC 2855) and InfiniBand (RFC 4390) support.

commit 37aeb387c5dec2138b1f0e3261b19eef12b82ebc
Author: Roy Marples <roy@marples.name>
Date:   Thu Feb 8 09:40:22 2007 +0000

    Don't try to send messages when we infinite leasetime and the interface
    fd is closed.

commit b57f8e83a87c2a6f522ee6cccec73f5b43e214be
Author: Roy Marples <roy@marples.name>
Date:   Sun Jan 28 16:54:27 2007 +0000

    Bother bother reading the existing ntp.conf file once we have matched all our servers

commit c9a679298d878013d777c948da24c2d1bde80390
Author: Roy Marples <roy@marples.name>
Date:   Sat Jan 27 16:20:59 2007 +0000

    Tag 3.0.10

commit b0baf8751867fa292d2172ef88fac5a042558e6a
Author: Roy Marples <roy@marples.name>
Date:   Sat Jan 27 16:18:20 2007 +0000

    3.0.10

commit 324844f918f0c09bb5097a4856e2be6a5ae6bfc6
Author: Roy Marples <roy@marples.name>
Date:   Sat Jan 27 13:59:38 2007 +0000

    Only write a new ntp.conf if any of our servers are not present in it.

commit 15493e55ffd511f8651b98edde70654dfb4870c1
Author: Roy Marples <roy@marples.name>
Date:   Sat Jan 27 13:31:39 2007 +0000

    Respond to SIGCHLD with a wait so we don't leave zombies around.

commit 69a4dcec50c641389b6195bc6dd2258e5f897eba
Author: Roy Marples <roy@marples.name>
Date:   Thu Jan 18 14:17:10 2007 +0000

    Update changelog

commit 09212ea7595883887de9feeb1062e4d30d42266d
Author: Roy Marples <roy@marples.name>
Date:   Thu Jan 18 14:02:40 2007 +0000

    For infinite timeout, we now resent the last request at +TIMEOUT_MINI
    intervals until TIMEOUT_MINI_INF is reached, thanks to Steve.

commit c8d53a99b2d2cde534bd1a405952671ec0fbb2fc
Author: Roy Marples <roy@marples.name>
Date:   Wed Jan 17 18:24:18 2007 +0000

    Typo

commit 3d19de577b30a50cc124067698d71a0dc1b51ca6
Author: Roy Marples <roy@marples.name>
Date:   Tue Jan 16 17:54:07 2007 +0000

    For infinite timeout, we now resent the last request at TIMEOUT_MINI
    intervals like we do otherwise.
    We now return a non zero exit code on SIGTERM and SIGINT if we have not
    forked into the background.
    When NIS and/or NTP servers are updated, we restart the service for them
    if we can.

commit ea8d3c946dcf5976e7817c4f95c8f92db59eb2ae
Author: Roy Marples <roy@marples.name>
Date:   Sun Jan 7 11:09:59 2007 +0000

    Version makefile

commit ff67b8bd99bb47a5e9388d1eea5c1fe8c110f434
Author: Roy Marples <roy@marples.name>
Date:   Sun Jan 7 11:08:04 2007 +0000

    3.0.9

commit 11a02f26df40049eea9b88ee64f586d8fbd27cd5
Author: Roy Marples <roy@marples.name>
Date:   Thu Dec 28 18:44:16 2006 +0000

    Add static routes before any default routes as a router may require a host
    route in the static routes.

commit 959142ac097e0286efd524533862b511226bb9ef
Author: Roy Marples <roy@marples.name>
Date:   Thu Dec 21 21:12:28 2006 +0000

    3.0.8

commit bfdb46fc8f4a453e98c91f21afebceae7bf4ef84
Author: Roy Marples <roy@marples.name>
Date:   Thu Dec 21 21:00:14 2006 +0000

    Code clean

commit 886314877323f8fb6e85a3f7e335caecd3369586
Author: Roy Marples <roy@marples.name>
Date:   Thu Dec 21 18:28:45 2006 +0000

    Tweak makefile

commit e07455bcc75bb471386d59b930813f9ff1ec434b
Author: Roy Marples <roy@marples.name>
Date:   Thu Dec 21 18:23:15 2006 +0000

    Change back to gnu99 to support generic Linux headers until they work with c99 like they should.

commit cace38987052ef41b6dea64979e328166260b6de
Author: Roy Marples <roy@marples.name>
Date:   Thu Dec 21 16:51:16 2006 +0000

    Fix arp checking
    linux-2.6.19 headers NOW don't work with c99 which is just wrong, so
    dhcpcd no longer builds against these kernel headers. You get a nice
    error though :)

commit 12e81a3f6cd5545f986dc25c65a0fcd3d9eb5535
Author: Roy Marples <roy@marples.name>
Date:   Tue Dec 19 10:06:45 2006 +0000

    3.0.7

commit c3137c1c6a84f9ed4a7b4659386337af861faf24
Author: Roy Marples <roy@marples.name>
Date:   Tue Dec 19 10:06:21 2006 +0000

    Add NetBSD and OpenBSD support - untested though

commit dc3f2dc75bb20f77bebdf3266db015cb5e652a0d
Author: Roy Marples <roy@marples.name>
Date:   Mon Dec 18 14:30:32 2006 +0000

    Clean up warnings on Sparc/Linux

commit 75e3d557128403b15929b25330de5ba2ae0d0a45
Author: Roy Marples <roy@marples.name>
Date:   Mon Dec 18 10:28:32 2006 +0000

    Allow Token Ring on Linux

commit 96bff6ea5013b70bfcc04f5c835a2e579d20440d
Author: Roy Marples <roy@marples.name>
Date:   Mon Dec 18 09:43:44 2006 +0000

    Clean up compile warnings on Sparc/FreeBSD

commit fb9f54013c3df5b7013e628dd83ee658c287b63b
Author: Roy Marples <roy@marples.name>
Date:   Fri Dec 15 18:28:54 2006 +0000

    dhcpcd is reported to work on Darwin :)

commit 388b686f7b9ab2e0c225d124196db5ab894051d7
Author: Roy Marples <roy@marples.name>
Date:   Fri Dec 15 14:47:45 2006 +0000

    Add -Werror back

commit a2d14c214c2aff125a021ee52f6f9c86e2134192
Author: Roy Marples <roy@marples.name>
Date:   Fri Dec 15 14:47:01 2006 +0000

    Fix cleanmetas function and fix FreeBSD again

commit ed7d8727caa1775e520ca86e188b19bde5d8d61b
Author: Roy Marples <roy@marples.name>
Date:   Fri Dec 15 11:44:23 2006 +0000

    Fix silly warning on s390

commit c6414ee205be7c70fdd9fcba7c20e592ec02b13b
Author: Roy Marples <roy@marples.name>
Date:   Fri Dec 15 11:33:44 2006 +0000

    Use -pipe again

commit 32d928bfd39cfbe819df91c766b4703a8ed30b63
Author: Roy Marples <roy@marples.name>
Date:   Fri Dec 15 11:23:32 2006 +0000

    Define _BSD_SOURCE and change to c99 - more warnings cleaned up.

commit 99444ec9ed5815a56938d015022b08ffd244a1a9
Author: Roy Marples <roy@marples.name>
Date:   Fri Dec 15 00:00:18 2006 +0000

    Compiles on FreeBSD again

commit d3e2c11ab406f172488df1b8d71ad3c0c0f51107
Author: Roy Marples <roy@marples.name>
Date:   Thu Dec 14 23:47:56 2006 +0000

    Make the consts sane

commit 262fe7db607e2fe9b7a20d8b8b32760fe4b0d32f
Author: Roy Marples <roy@marples.name>
Date:   Thu Dec 14 23:17:27 2006 +0000

    Add loads of debugging CFLAGS so we can remove all compiler warnings

commit fb4477f477d1faa60759f2b94e29c12999e1db49
Author: Roy Marples <roy@marples.name>
Date:   Mon Dec 11 13:16:28 2006 +0000

    Don't set the broadcast flag anymore as all BPF and Linux sockets should be
    able to unicast correctly.

commit 94fdb30903a58d6b6286b494eb77454b3ec2a052
Author: Roy Marples <roy@marples.name>
Date:   Wed Dec 6 11:34:46 2006 +0000

    Fix yp.conf creation

commit b4b0162f0870d2e15b22866920429e3ad0bc3b09
Author: Roy Marples <roy@marples.name>
Date:   Wed Dec 6 11:16:43 2006 +0000

    Compile fix for FreeBSD

commit d7070a265e7d389d00441e6a58c133c3ae888742
Author: Roy Marples <roy@marples.name>
Date:   Wed Dec 6 10:10:07 2006 +0000

    Update ChangeLog

commit 966be2e6e855d57637ea1922e71451007b70314b
Author: Roy Marples <roy@marples.name>
Date:   Wed Dec 6 10:06:51 2006 +0000

    Tag 3.0.4

commit 40ec9a9debec3974531a6c1e297a3b4b2e93499f
Author: Roy Marples <roy@marples.name>
Date:   Wed Dec 6 10:02:03 2006 +0000

    Fix netmask thanks to Marc Duponcheel.

commit 71b1afde0f2887daea87ef6f2da56df7c8819ef6
Author: Roy Marples <roy@marples.name>
Date:   Wed Dec 6 09:37:15 2006 +0000

    Send the current hostname by default.

commit 627bfed14e1733b899a3c3cbf1d5c86c4a30f442
Author: Roy Marples <roy@marples.name>
Date:   Tue Dec 5 10:12:50 2006 +0000

    Revert mistaken commit

commit 92af7201aee6b800f49ba0c1c393f491c231d780
Author: Roy Marples <roy@marples.name>
Date:   Tue Dec 5 09:42:35 2006 +0000

    Tag dhcpcd-3.0.3

commit 91fe3f5a69f07d6d22b83d2890d5c90a85e8d256
Author: Roy Marples <roy@marples.name>
Date:   Tue Dec 5 09:38:10 2006 +0000

    Fix NIS, #define RESOLVCONF and send the parameter list with DISCOVER messages

commit 4a742ad844faa24ea33b1dc1b132be4ed9701d64
Author: Roy Marples <roy@marples.name>
Date:   Mon Dec 4 21:13:04 2006 +0000

    Send hostname/fqdn in DISCOVER and INFORM messages too.

commit 22ee2ae60cd4aa7477463a449c6fd39ceca9048e
Author: Roy Marples <roy@marples.name>
Date:   Mon Dec 4 16:09:18 2006 +0000

    Don't do if (foo) when foo is a char array and not a pointer

commit 3265eabc054a9b7a5ae26e6bfb71e495fb9a084e
Author: Roy Marples <roy@marples.name>
Date:   Mon Dec 4 14:08:44 2006 +0000

    Fix writing to /etc/resolv.conf when resolvconf not present and add more debug statements

commit be950ddfb83ff062bb73b6915294491af775adad
Author: Roy Marples <roy@marples.name>
Date:   Mon Dec 4 12:56:30 2006 +0000

    Clean some style and stop using %m (use %s + strerror (errno) instead)

commit b38bad32f4156c663dfd8f24f2d06b034db605ba
Author: Roy Marples <roy@marples.name>
Date:   Mon Dec 4 12:40:14 2006 +0000

    Only include linux/if_addr.h for 2.6.19 kernels and better

commit 1f3464377ddfe43005c9beb3e64c323d8e9bd438
Author: Roy Marples <roy@marples.name>
Date:   Mon Dec 4 09:56:40 2006 +0000

    Include linux/if_addr.h so we compile on 2.6.19 kernels, thanks to AlexExtreme.

commit ef95a74bcd39bccd11ff5fe49bceb2e33caf865f
Author: Roy Marples <roy@marples.name>
Date:   Sun Dec 3 10:28:57 2006 +0000

    Linux systems without glibc-2.3 don't have getifaddrs, so we define our own.

commit 1bc54d0eb63cc4797ed68005c31bc8dd77b0074e
Author: Roy Marples <roy@marples.name>
Date:   Fri Dec 1 20:08:33 2006 +0000

    Changed the default timeout to 20 seconds, allowing hme Sparc drivers to work.

commit 5f581197c47178570bfb9c0fb11d3271c14dc40e
Author: Roy Marples <roy@marples.name>
Date:   Fri Dec 1 16:22:15 2006 +0000

    Add userlen back

commit 24c57f1305a0bc39a2771451c992e06332dfb1d0
Author: Roy Marples <roy@marples.name>
Date:   Fri Dec 1 12:50:53 2006 +0000

    Set the rfds correctly so we can get a reply after re-sending a request.
    Set the seconds elasped and maximum message size correctly in DHCP messages.
    Now compiles on Linux 2.4 kernels.

commit 05dac403dd3d99a1eecac5fc7c33ea134dbaab97
Author: Roy Marples <roy@marples.name>
Date:   Thu Nov 30 15:58:45 2006 +0000

    xmalloc dhcp objects so we can swap pointer around easily.

commit 479225b66be5928818dd7b61cee4247e39338350
Author: Roy Marples <roy@marples.name>
Date:   Thu Nov 30 13:04:23 2006 +0000

    Quote all vars in the info file.
    -n and -G options now work as stated in the man page.
    Handle select loops with large timeouts and infinite lease times.
    Correctly set the broadcast flag.
    make_dhcp_packet already has byte ordered addresses, thanks to TGL
    for the fix.
    If we get a NAK then always re-enter the INIT state.

commit 4e9d8ad4db49c4ec45425bf19c0e861f421bbdeb
Author: Roy Marples <roy@marples.name>
Date:   Mon Nov 27 21:32:54 2006 +0000

    Don't define CC

commit 804317ef987e3b194d3102d2b21add77e0c6072b
Author: Roy Marples <roy@marples.name>
Date:   Mon Nov 27 21:13:01 2006 +0000

    Tweak Makefile

commit e9b849fac0fb63b889c60dc34fee401cec11ba2c
Author: Roy Marples <roy@marples.name>
Date:   Mon Nov 27 20:45:59 2006 +0000

    Don't bundle the .svn dir in the Makefile

commit cced195e703c548e7375727ea91bbdcd76aae517
Author: Roy Marples <roy@marples.name>
Date:   Mon Nov 27 20:23:22 2006 +0000

    Add dhcpcd-3 re-write
